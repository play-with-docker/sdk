{"version":3,"sources":["webpack:///pwd.js","webpack:///webpack/bootstrap 5e52a563bf48cd22c252","webpack:///./~/xterm/lib/common/Lifecycle.js","webpack:///./~/xterm/lib/core/buffer/BufferLine.js","webpack:///./~/xterm/lib/common/EventEmitter2.js","webpack:///./~/xterm/lib/renderer/atlas/Types.js","webpack:///./~/xterm/lib/common/Platform.js","webpack:///./~/xterm/lib/ui/Lifecycle.js","webpack:///./~/xterm/lib/common/Types.js","webpack:///./~/xterm/lib/common/data/EscapeSequences.js","webpack:///./~/xterm/lib/renderer/BaseRenderLayer.js","webpack:///./~/xterm/lib/Strings.js","webpack:///./~/xterm/lib/core/input/TextDecoder.js","webpack:///./~/xterm/lib/renderer/atlas/BaseCharAtlas.js","webpack:///./~/xterm/lib/renderer/atlas/CharAtlasUtils.js","webpack:///./~/xterm/lib/Buffer.js","webpack:///./~/xterm/lib/CharWidth.js","webpack:///./~/xterm/lib/MouseHelper.js","webpack:///./~/xterm/lib/MouseZoneManager.js","webpack:///./~/xterm/lib/common/TypedArrayUtils.js","webpack:///./~/xterm/lib/renderer/CharacterJoinerRegistry.js","webpack:///./~/xterm/lib/renderer/atlas/CharAtlasCache.js","webpack:///./~/xterm/lib/renderer/atlas/CharAtlasGenerator.js","webpack:///./~/xterm/lib/ui/ColorManager.js","webpack:///./~/xterm/lib/ui/RenderDebouncer.js","webpack:///./~/xterm/lib/ui/ScreenDprMonitor.js","webpack:///./~/reconnecting-websocket/dist/index.js","webpack:///./~/xterm/dist/xterm.css?05b7","webpack:///./~/wolfy87-eventemitter/EventEmitter.js","webpack:///./~/xterm/lib/addons/fit/fit.js","webpack:///./~/xterm/lib/public/Terminal.js","webpack:///./index.js","webpack:///./~/xterm/dist/xterm.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/lib/addStyles.js","webpack:///./~/style-loader/lib/urls.js","webpack:///./~/xterm/lib/AccessibilityManager.js","webpack:///./~/xterm/lib/BufferSet.js","webpack:///./~/xterm/lib/CharMeasure.js","webpack:///./~/xterm/lib/Clipboard.js","webpack:///./~/xterm/lib/CompositionHelper.js","webpack:///./~/xterm/lib/EscapeSequenceParser.js","webpack:///./~/xterm/lib/InputHandler.js","webpack:///./~/xterm/lib/Linkifier.js","webpack:///./~/xterm/lib/SelectionManager.js","webpack:///./~/xterm/lib/SelectionModel.js","webpack:///./~/xterm/lib/SoundManager.js","webpack:///./~/xterm/lib/Terminal.js","webpack:///./~/xterm/lib/Viewport.js","webpack:///./~/xterm/lib/WindowsMode.js","webpack:///./~/xterm/lib/common/CircularList.js","webpack:///./~/xterm/lib/common/Clone.js","webpack:///./~/xterm/lib/common/EventEmitter.js","webpack:///./~/xterm/lib/core/buffer/BufferReflow.js","webpack:///./~/xterm/lib/core/buffer/Marker.js","webpack:///./~/xterm/lib/core/data/Charsets.js","webpack:///./~/xterm/lib/core/input/Keyboard.js","webpack:///./~/xterm/lib/handlers/AltClickHandler.js","webpack:///./~/xterm/lib/public/AddonManager.js","webpack:///./~/xterm/lib/renderer/CursorRenderLayer.js","webpack:///./~/xterm/lib/renderer/GridCache.js","webpack:///./~/xterm/lib/renderer/LinkRenderLayer.js","webpack:///./~/xterm/lib/renderer/RenderCoordinator.js","webpack:///./~/xterm/lib/renderer/Renderer.js","webpack:///./~/xterm/lib/renderer/SelectionRenderLayer.js","webpack:///./~/xterm/lib/renderer/TextRenderLayer.js","webpack:///./~/xterm/lib/renderer/atlas/DynamicCharAtlas.js","webpack:///./~/xterm/lib/renderer/atlas/LRUMap.js","webpack:///./~/xterm/lib/renderer/atlas/NoneCharAtlas.js","webpack:///./~/xterm/lib/renderer/atlas/StaticCharAtlas.js","webpack:///./~/xterm/lib/renderer/dom/DomRenderer.js","webpack:///./~/xterm/lib/renderer/dom/DomRendererRowFactory.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Disposable","this","_disposables","_isDisposed","dispose","forEach","length","register","push","unregister","index","indexOf","splice","__extends","extendStatics","b","setPrototypeOf","__proto__","Array","__","constructor","create","TextDecoder_1","Types_1","DEFAULT_ATTR","DEFAULT_COLOR","CHAR_DATA_ATTR_INDEX","CHAR_DATA_CHAR_INDEX","CHAR_DATA_WIDTH_INDEX","CHAR_DATA_CODE_INDEX","NULL_CELL_CHAR","NULL_CELL_WIDTH","NULL_CELL_CODE","WHITESPACE_CELL_CHAR","WHITESPACE_CELL_WIDTH","WHITESPACE_CELL_CODE","CELL_SIZE","AttributeData","fg","bg","toColorRGB","fromColorRGB","clone","newObj","isInverse","isBold","isUnderline","isBlink","isInvisible","isItalic","isDim","getFgColorMode","getBgColorMode","isFgRGB","isBgRGB","isFgPalette","isBgPalette","isFgDefault","isBgDefault","getFgColor","getBgColor","DEFAULT_ATTR_DATA","freeze","CellData","_super","_this","apply","arguments","content","combinedData","fromCharData","obj","setFromCharData","isCombined","getWidth","getChars","stringFromCodePoint","getCode","charCodeAt","combined","code","second","getAsCharData","BufferLine","cols","fillCellData","isWrapped","_combined","_data","Uint32Array","cell","setCell","cp","set","hasWidth","getFg","getBg","hasContent","getCodePoint","getString","loadCell","startIndex","setCellFromCodePoint","codePoint","width","addCodepointToCell","insertCells","pos","deleteCells","replaceCells","start","end","resize","data","subarray","keys","key","parseInt","fill","copyFrom","line","el","newLine","getTrimmedLength","copyCellsFrom","src","srcCol","destCol","applyInReverse","srcData","srcCombinedKeys","translateToString","trimRight","startCol","endCol","Math","min","result","EventEmitter2","_listeners","_event","listener","fire","queue","undefined","INVERTED_DEFAULT_COLOR","DIM_OPACITY","CHAR_ATLAS_CELL_SPACING","contains","arr","isNode","navigator","userAgent","platform","isFirefox","isSafari","test","isMSIE","isMac","isIpad","isIphone","isMSWindows","isLinux","addDisposableDomListener","node","type","handler","useCapture","addEventListener","removeEventListener","C0","NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL","C1","PAD","HOP","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","SGCI","SCI","CSI","ST","OSC","PM","APC","Types_2","CharAtlasCache_1","BufferLine_1","BaseRenderLayer","_container","id","zIndex","_alpha","_colors","_scaledCharWidth","_scaledCharHeight","_scaledCellWidth","_scaledCellHeight","_scaledCharLeft","_scaledCharTop","_currentGlyphIdentifier","chars","bold","dim","italic","_canvas","document","createElement","classList","add","style","toString","_initCanvas","appendChild","removeChild","_charAtlas","_ctx","getContext","alpha","clearAll","onOptionsChanged","terminal","onBlur","onFocus","onCursorMove","onGridChanged","startRow","endRow","onSelectionChanged","columnSelectMode","setColors","colorSet","_refreshCharAtlas","setTransparency","oldCanvas","cloneNode","replaceChild","rows","acquireCharAtlas","warmUp","scaledCellWidth","scaledCellHeight","scaledCharWidth","scaledCharHeight","scaledCharLeft","scaledCharTop","scaledCanvasWidth","height","scaledCanvasHeight","canvasWidth","canvasHeight","fillCells","x","y","fillRect","fillBottomLineAtCells","window","devicePixelRatio","fillLeftLineAtCell","strokeRectAtCell","lineWidth","strokeRect","clearRect","fillStyle","background","css","clearCells","fillCharTrueColor","font","_getFont","textBaseline","_clipRow","fillText","drawChars","_drawUncachedChars","options","drawBoldTextInBrightColors","enableBold","draw","save","join","ansi","foreground","globalAlpha","restore","beginPath","rect","clip","fontWeight","fontWeightBold","fontSize","fontFamily","blankLine","promptLabel","tooMuchOutput","String","fromCharCode","utf32ToString","codepoint","StringToUtf32","_interim","clear","decode","input","target","size","startPos","Utf8ToUtf32","interim","Uint8Array","byte1","byte2","byte3","byte4","discardInterim","tmp","missing","fourStop","BaseCharAtlas","_didWarmUp","_doWarmUp","beginFrame","default","generateConfig","colors","clonedColors","cursor","cursorAccent","selection","slice","experimentalCharAtlas","allowTransparency","configEquals","a","rgba","is256Color","colorCode","CircularList_1","BufferReflow_1","Marker_1","MAX_BUFFER_SIZE","Buffer","_terminal","_hasScrollback","savedCurAttrData","markers","_nullCell","_whitespaceCell","_cols","_rows","getNullCell","attr","getWhitespaceCell","getBlankLine","lines","maxLength","absoluteY","ybase","relativeY","ydisp","_getCorrectBufferLength","correctBufferLength","scrollback","fillViewportRows","fillAttr","CircularList","scrollTop","scrollBottom","setupTabStops","newCols","newRows","nullCell","newMaxLength","addToY","pop","amountToTrim","trimStart","max","savedY","savedX","_isReflowEnabled","_reflow","windowsMode","_reflowLarger","_reflowSmaller","toRemove","reflowLargerGetLinesToRemove","newLayoutResult","reflowLargerCreateNewLayout","reflowLargerApplyNewLayout","layout","_reflowLargerAdjustViewport","countRemoved","viewportAdjustments","toInsert","countToInsert","nextLine","wrappedLines","unshift","lastLineLength","destLineLengths","reflowSmallerGetNewLineLengths","linesToAdd","trimmedLines","newLines","destLineIndex","srcLineIndex","cellsToCopy","wrappedLinesIndex","getWrappedLineTrimmedLength","insertEvents","originalLines","originalLinesLength","originalLineIndex","nextToInsertIndex","nextToInsert","countInsertedSoFar","nextI","amount","insertCountEmitted","onInsertEmitter","onTrimEmitter","stringIndexToBufferIndex","lineIndex","stringIndex","length_1","translateBufferLineToString","getWrappedRangeForLine","first","last","tabs","prevStop","tabStopWidth","nextStop","addMarker","marker","Marker","onTrim","onInsert","event","onDelete","onDispose","_removeMarker","iterator","endIndex","startOverscan","endOverscan","BufferStringIterator","_buffer","_trimRight","_startIndex","_endIndex","_startOverscan","_endOverscan","_current","hasNext","next","range","getStringCellWidth","wcwidth","TypedArrayUtils_1","opts","bisearch","ucs","mid","wcwidthHigh","COMBINING_HIGH","COMBINING_BMP","control","table","nul","r","num","MouseHelper","_renderCoordinator","getCoordsRelativeToElement","element","getBoundingClientRect","clientX","left","clientY","top","getCoords","charMeasure","colCount","rowCount","isSelection","coords","ceil","dimensions","actualCellWidth","actualCellHeight","getRawByteCoords","Lifecycle_1","Lifecycle_2","MouseZoneManager","_zones","_areZonesActive","_tooltipTimeout","_currentZone","_lastHoverCoords","e","_onMouseDown","_mouseMoveListener","_onMouseMove","_mouseLeaveListener","_onMouseLeave","_clickListener","_onClick","_deactivate","zone","_activate","y1","y2","leaveCallback","pageX","pageY","_onHover","_findZoneEventAt","clearTimeout","hoverCallback","setTimeout","_onTooltip","tooltipCallback","_initialSelectionLength","getSelection","willLinkActivate","preventDefault","stopImmediatePropagation","currentSelectionLength","clickCallback","mouseHelper","screenElement","x1","x2","MouseZone","array","fillFallback","concat","JoinedCellData","firstCell","_width","Error","CharacterJoinerRegistry","_characterJoiners","_nextCharacterJoinerId","_workCell","registerCharacterJoiner","joiner","deregisterCharacterJoiner","joinerId","getJoinedCharacters","row","buffer","ranges","lineStr","rangeStartColumn","currentStringIndex","rangeStartStringIndex","rangeAttrFG","rangeAttrBG","joinedRanges","_getJoinedRanges","lineData","text","substring","joinerRanges","j","_mergeRanges","_stringRangesToCellRanges","currentRangeIndex","currentRangeStarted","currentRange","newRange","inRange","newConfig","CharAtlasUtils_1","charAtlasCache","entry","ownedByIndex","ownedBy","config","atlas","newEntry","charAtlasImplementations","removeTerminalFromCache","DynamicCharAtlas_1","NoneCharAtlas_1","StaticCharAtlas_1","generateStaticCharAtlasTexture","context","canvasFactory","cellWidth","cellHeight","canvas","ctx","getFont","colorIndex","Platform_1","charAtlasImageData","getImageData","clearColor","createImageBitmap","imageData","color","isEmpty","g","offset","fromHex","toPaddedHex","DEFAULT_FOREGROUND","DEFAULT_BACKGROUND","DEFAULT_CURSOR","DEFAULT_CURSOR_ACCENT","DEFAULT_SELECTION","DEFAULT_ANSI_COLORS","v","ch","ColorManager","globalCompositeOperation","_litmusColor","createLinearGradient","setTheme","theme","_parseColor","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","fallback","console","warn","RenderDebouncer","_renderCallback","_animationFrame","cancelAnimationFrame","refresh","rowStart","rowEnd","_rowCount","_rowStart","_rowEnd","requestAnimationFrame","_innerRefresh","ScreenDprMonitor","_currentDevicePixelRatio","setListener","_listener","clearListener","_outerListener","_updateDpr","_resolutionMediaMatchList","removeListener","matchMedia","addListener","isWebSocket","CLOSING","isGlobalWebSocket","WebSocket","getDefaultOptions","maxReconnectionDelay","minReconnectionDelay","reconnectionDelayGrowFactor","connectionTimeout","maxRetries","Infinity","debug","bypassProperty","dst","initReconnectionDelay","random","updateReconnectionDelay","previousDelay","newDelay","LEVEL_0_EVENTS","reassignEventListeners","ws","oldWs","listeners","_a","ReconnectingWebsocket","url","protocols","connectingTimeout","reconnectDelay","retriesCount","shouldRetry","savedOnClose","TypeError","filter","log","params","_i","emitError","msg","err","isArray","error","fn","onerror","handleClose","connect","wsUrl","close","onclose","reason","_b","_c","keepClosed","_d","fastClose","_e","delay","fakeCloseEvent_1","wasClean","send","some","transform","locals","EventEmitter","indexOfListener","alias","isValidListener","RegExp","proto","originalGlobalValue","getListeners","evt","response","events","_getEvents","flattenListeners","flatListeners","getListenersAsObject","listenerIsWrapped","once","on","addOnceListener","defineEvent","defineEvents","evts","off","addListeners","manipulateListeners","removeListeners","remove","single","multiple","removeEvent","_events","removeAllListeners","emitEvent","args","listenersMap","_getOnceReturnValue","trigger","emit","setOnceReturnValue","_onceReturnValue","noConflict","proposeGeometry","term","parentElement","parentElementStyle","getComputedStyle","parentElementHeight","getPropertyValue","parentElementWidth","elementStyle","elementPadding","bottom","right","elementPaddingVer","elementPaddingHor","availableHeight","availableWidth","_core","viewport","scrollBarWidth","floor","fit","geometry","terminalConstructor","Terminal_1","Strings","AddonManager_1","Terminal","_addonManager","AddonManager","onLineFeed","onSelectionChange","onData","onTitleChange","onScroll","onKey","onRender","onResize","textarea","BufferApiView","blur","focus","addDisposableListener","columns","writeln","open","parent","attachCustomKeyEventHandler","customKeyEventHandler","addCsiHandler","flag","callback","addOscHandler","ident","registerLinkMatcher","regex","deregisterLinkMatcher","matcherId","cursorYOffset","hasSelection","select","column","getSelectionPosition","clearSelection","selectAll","selectLines","destroy","scrollLines","scrollPages","pageCount","scrollToTop","scrollToBottom","scrollToLine","write","writeUtf8","getOption","setOption","reset","applyAddon","addon","loadAddon","getLine","BufferLineApiView","_line","getCell","BufferCellApiView","startColumn","endColumn","_x","__webpack_exports__","registerInputHandlers","termName","instance","self","actions","querySelectorAll","onclick","socket","innerText","registerPortHandlers","link","anchor","port","getAttribute","protocol","proxy_host","baseUrl","split","attributes","href","openFn","onauxclick","oncontextmenu","setAttribute","setOpts","ports","ImageName","oauthProvider","sendRequest","req","request","XMLHttpRequest","asyncReq","sync","method","headers","setRequestHeader","withCredentials","onload","JSON","stringify","verifyCallback","encodeURIComponent","onloadCallback","pwd","instances","instanceBuffer","login","cb","screen","terms","els","selector","loginBtn","className","eventMethod","eventer","createSession","resp","status","sessionData","parse","responseText","hostname","init","session_id","querySelector","closeSession","sessionId","getUserInfo","u","newSession","host","ls","onresize","session","createInstance","upload","setup","exec","command","createTerminal","elements","t","cursorBlink","Hostname","cssWithMappingToString","item","useSourceMap","cssMapping","btoa","sourceMapping","toComment","sources","map","source","sourceRoot","sourceMap","unescape","list","mediaQuery","alreadyImportedModules","addStylesToDom","styles","domStyle","stylesInDom","refs","parts","addStyle","listToStyles","newStyles","base","media","part","insertStyleElement","getElement","insertInto","lastStyleElementInsertedAtTop","stylesInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","removeStyleElement","parentNode","idx","createStyleElement","attrs","addAttrs","createLinkElement","rel","update","singleton","styleIndex","singletonCounter","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","applyToTag","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","fixUrls","blob","oldSrc","isOldIE","memo","all","atob","DEBUG","newList","mayRemove","textStore","replacement","Boolean","location","currentDir","pathname","replace","fullMatch","origUrl","unquotedOrigUrl","trim","$1","newUrl","RenderDebouncer_1","ScreenDprMonitor_1","AccessibilityManager","_dimensions","_liveRegionLineCount","_charsToConsume","_charsToAnnounce","_accessibilityTreeRoot","_rowContainer","_rowElements","_createAccessibilityTreeNode","_topBoundaryFocusListener","_onBoundaryFocus","_bottomBoundaryFocusListener","_refreshRowsDimensions","_renderRowsDebouncer","_renderRows","_refreshRows","_liveRegion","insertAdjacentElement","_onResize","char","_onChar","spaceCount","_onTab","_onKey","_clearLiveRegion","_screenDprMonitor","position","boundaryElement","beforeBoundaryElement","relatedTarget","topBoundaryElement","bottomBoundaryElement","shift","newElement","children","tabIndex","_refreshRowDimensions","MAX_ROWS_TO_READ","textContent","keyChar","setSize","posInSet","_announceCharacters","setDimensions","Buffer_1","EventEmitter2_1","BufferSet","_onBufferActivate","_normal","_alt","_activeBuffer","activateNormalBuffer","activeBuffer","inactiveBuffer","activateAltBuffer","CharMeasure","_onCharSizeChanged","_document","_parentElement","_measureElement","_height","measure","adjustedHeight","prepareTextForTerminal","bracketTextForPaste","bracketedPasteMode","copyHandler","ev","selectionManager","browser","clipboardData","setData","selectionText","pasteHandler","stopPropagation","dispatchPaste","cancel","getData","moveTextAreaUnderMouseCursor","rightClickHandler","shouldSelectWord","isClickInSelection","selectWordAtCursor","CompositionHelper","_textarea","_compositionView","_isComposing","_isSendingComposition","_compositionPosition","compositionstart","compositionupdate","updateCompositionElements","compositionend","_finalizeComposition","keydown","keyCode","_handleAnyTextareaChanges","waitForPropagation","_clearTextareaPosition","currentCompositionPosition_1","oldValue","newValue","diff","dontRecurse","isCursorInViewport","lineHeight","cursorTop","cursorLeft","compositionViewBounds","low","high","TransitionTable","state","action","addMany","codes","PRINTABLES","EXECUTABLES","VT500_TRANSITION_TABLE","states","DcsDummy","hook","collect","put","unhook","EscapeSequenceParser","TRANSITIONS","initialState","currentState","_osc","_params","_collect","_printHandlerFb","_executeHandlerFb","_csiHandlerFb","_escHandlerFb","_oscHandlerFb","identifier","_dcsHandlerFb","_errorHandlerFb","_printHandler","_executeHandlers","_csiHandlers","_escHandlers","_oscHandlers","_dcsHandlers","_activeDcsHandler","_errorHandler","setEscHandler","setPrintHandler","clearPrintHandler","setExecuteHandler","clearExecuteHandler","setExecuteHandlerFallback","handlerList","handlerIndex","setCsiHandler","clearCsiHandler","setCsiHandlerFallback","collectAndFlag","clearEscHandler","setEscHandlerFallback","setOscHandler","clearOscHandler","setOscHandlerFallback","setDcsHandler","clearDcsHandler","setDcsHandlerFallback","setErrorHandler","clearErrorHandler","transition","print","dcs","osc","dcsHandler","inject","abort","handlers","j_1","handlers_1","j_2","EscapeSequences_1","Charsets_1","CharWidth_1","EscapeSequenceParser_1","GLEVEL","DECRQSS","pt","STYLES","InputHandler","_parser","_parseBuffer","_stringDecoder","_utf8Decoder","_onCursorMove","_onData","_onLineFeed","_onScroll","insertChars","cursorUp","cursorDown","cursorForward","cursorBackward","cursorNextLine","cursorPrecedingLine","cursorCharAbsolute","cursorPosition","cursorForwardTab","eraseInDisplay","eraseInLine","insertLines","deleteLines","deleteChars","scrollUp","scrollDown","eraseChars","cursorBackwardTab","charPosAbsolute","hPositionRelative","repeatPrecedingCharacter","sendDeviceAttributes","linePosAbsolute","vPositionRelative","hVPosition","tabClear","setMode","resetMode","charAttributes","deviceStatus","softReset","setCursorStyle","setScrollRegion","saveCursor","restoreCursor","bell","lineFeed","carriageReturn","backspace","tab","shiftOut","shiftIn","tabSet","setTitle","reverseIndex","keypadApplicationMode","keypadNumericMode","setgLevel","selectDefaultCharset","this_1","CHARSETS","selectCharset","cursorStartX","cursorStartY","parseUtf8","chWidth","charset","screenReaderMode","wraparoundMode","insertMode","curAttr","curAttrData","bufferRow","updateRange","scroll","convertEol","originalX","eraseAttrData","param","col","_eraseInBufferLine","clearWrap","_resetBufferLine","scrollBackSize","scrollBottomRowsOffset","scrollBottomAbsolute","is","applicationCursor","setgCharset","DEFAULT_CHARSET","savedCols","originMode","applicationKeypad","syncScrollArea","x10Mouse","vt200Mouse","normalMouse","mouseEvents","disable","sendFocus","utfMouse","sgrMouse","urxvtMouse","cursorHidden","buffers","showCursor","enable","glevel","charsets","isBlinking","handleTitle","level","MouseZoneManager_1","Linkifier","_linkMatchers","_nextLinkMatcherId","_onLinkHover","_onLinkLeave","_onLinkTooltip","_rowsToLinkify","attachToDom","mouseZoneManager","_mouseZoneManager","linkifyRows","_rowsTimeoutId","_linkifyRows","TIME_BEFORE_LINKIFY","absoluteRowIndexStart","absoluteRowIndexEnd","overscanLineLimit","OVERSCAN_CHAR_LIMIT","_doLinkifyRow","matcher","matchIndex","validationCallback","hoverTooltipCallback","hoverLeaveCallback","priority","_addLinkMatcherToList","rowIndex","match","rex","flags","uri","lastIndex","bufferIndex","isValid","_addLink","_createLinkHoverEvent","MouseHelper_1","Browser","SelectionModel_1","AltClickHandler_1","WORD_SEPARATORS","NON_BREAKING_SPACE_CHAR","ALL_NON_BREAKING_SPACE_REGEX","SelectionManager","_charMeasure","_enabled","_onLinuxMouseSelection","_onRedrawRequest","_onSelectionChange","_initListeners","_model","SelectionModel","_activeSelectionMode","_removeMouseDownListeners","active","_mouseUpListener","_onMouseUp","initBuffersListeners","_trimListener","_onTrim","onBufferActivate","finalSelectionStart","finalSelectionEnd","lineText","startRowEndCol","bufferLine","isLinuxMouseSelection","_refreshAnimationFrame","_refresh","_getMouseBufferCoords","_areCoordsInSelection","_selectWordAt","selectionEnd","isSelectAllActive","selectionStart","_getMouseEventScrollAmount","terminalHeight","abs","round","shouldForceSelection","altKey","macOptionClickForcesSelection","shiftKey","onMouseDown","_mouseDownTimeStamp","timeStamp","button","_dragScrollAmount","_onIncrementalClick","detail","_onSingleClick","_onDoubleClick","_onTripleClick","_addMouseDownListeners","ownerDocument","_dragScrollIntervalTimer","setInterval","_dragScroll","clearInterval","selectionStartLength","shouldColumnSelect","_selectLineAt","previousSelectionEnd","_selectToWordAt","timeElapsed","AltClickHandler","move","_convertViewportColToCharacterIndex","charIndex","setSelection","_getWordAt","allowWhitespaceOnlySelection","followWrappedLinesAbove","followWrappedLinesBelow","charOffset","leftWideCharCount","rightWideCharCount","leftLongCharOffset","rightLongCharOffset","charAt","length_2","_isCharWordSeparator","length_3","length_4","previousBufferLine","previousLineWordPosition","nextBufferLine","nextLineWordPosition","wordPosition","areSelectionValuesReversed","wrappedRange","startPlusLength","DEFAULT_BELL_SOUND","SoundManager","_audioContext","audioContextCtor","AudioContext","webkitAudioContext","playBellSound","audioContext","bellAudioSource","createBufferSource","decodeAudioData","_base64ToArrayBuffer","_removeMimeType","bellSound","destination","base64","binaryString","len","bytes","dataURI","wasModifierKeyOnlyEvent","BufferSet_1","CompositionHelper_1","EventEmitter_1","Viewport_1","Clipboard_1","InputHandler_1","Renderer_1","Linkifier_1","SelectionManager_1","CharMeasure_1","SoundManager_1","AccessibilityManager_1","DomRenderer_1","Keyboard_1","Clone_1","WindowsMode_1","ColorManager_1","RenderCoordinator_1","CONSTRUCTOR_ONLY_OPTIONS","DEFAULT_OPTIONS","cursorStyle","bellStyle","letterSpacing","screenKeys","macOptionIsMeta","cancelEvents","disableStdin","useFlowControl","rightClickSelectsWord","rendererType","_blankLine","_onRender","_onTitleChange","_setup","domEvent","_windowsMode","_customKeyEventHandler","_parent","body","cursorState","gcharset","_eraseAttrData","currentParam","writeBuffer","writeBufferUtf8","_writeInProgress","_xoffSentToCatchUp","_userScrolling","_inputHandler","linkifier","soundManager","applyWindowsMode","preventScroll","activeElement","hasFocus","_setTheme","newBufferLength","needsRefresh","setRenderer","_createRenderer","_accessibilityManager","_onTextAreaFocus","updateCursorStyle","_onTextAreaBlur","_initGlobal","_bindKeys","pasteHandlerWrapper","_keyDown","_keyPress","_keyUp","_compositionHelper","_queueLinkification","_context","defaultView","dir","fragment","createDocumentFragment","_viewportElement","_viewportScrollArea","_helperContainer","_theme","_colorManager","renderer","RenderCoordinator","Viewport","onThemeChange","onCharSizeChanged","onDimensionsChange","onRedrawRequest","onLinuxMouseSelection","toggle","bindMouse","Renderer","DomRenderer","sendButton","getButton","sendEvent","overrideType","pressed","sendMove","encode","_vt300Mouse","data_1","_decLocator","page","meta","ctrl","mod","which","deltaY","metaKey","ctrlKey","moveHandler","hasScrollback","getLinesScrolled","sequence","onWheel","onTouchStart","onTouchMove","refreshRows","eraseAttr","topRow","bottomRow","willBufferBeTrimmed","isFull","recycle","scrollRegionHeight","shiftElements","disp","suppressScrollEvent","oldYdisp","scrollAmount","_innerWriteUtf8","bufferOffset","startTime","Date","now","_refreshStart","_refreshEnd","_innerWrite","normal","evaluateKeyboardEvent","scrollCount","_isThirdLevelShift","thirdLevelKey","charCode","_soundBell","_visualBell","_visualBellTimer","isNaN","maxRange","title","inputHandler","writeInProgress","xoffSentToCatchUp","userScrolling","force","FALLBACK_SCROLL_BAR_WIDTH","_scrollArea","_currentRowHeight","_lastRecordedBufferLength","_lastRecordedViewportHeight","_lastRecordedBufferHeight","_lastScrollTop","_wheelPartialScroll","_ignoreNextScrollEvent","offsetWidth","onDimensionsChance","backgroundColor","offsetHeight","newBufferHeight","newScrollTop","offsetParent","newRow","_getPixelsScrolled","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","_lastTouchY","touches","lastChar","_maxLength","onDeleteEmitter","_array","_length","newArray","_getCyclicIndex","newLength","deleteCount","items","countToTrim","count","expandListBy","val","depth","clonedObject","disposed","emitMayRemoveListeners","oldCols","bufferAbsoluteY","srcTrimmedTineLength","srcRemainingCells","destRemainingCells","countToRemove","i_1","nextToRemoveIndex","nextToRemoveStart","countRemovedSoFar","newLayout","newLayoutLines","newLineLengths","cellsNeeded","reduce","srcLine","cellsAvailable","oldTrimmedLength","endsWithWide","lineLength","endsInNull","followingLineStartsWithWide","_id","_nextId","isDisposed","_onDispose","applicationCursorMode","modifiers","keyMapping","KEYCODE_KEY_MAPPINGS","48","49","50","51","52","53","54","55","56","57","186","187","188","189","190","191","192","219","220","221","222","repeat","str","rpt","_mouseEvent","_lines","_startCol","_startRow","coordinates","coordinate","_endCol","_endRow","_arrowSequences","_moveHorizontallyOnly","_resetStartingRow","_moveToRequestedRow","_moveToRequestedCol","_bufferLine","_wrappedRowsForRow","_sequence","_wrappedRowsCount","_verticalDirection","direction","_horizontalDirection","wrappedRows","currentRow","lineWraps","forward","currentCol","bufferStr","_addons","loadedAddon","_wrappedAddonDispose","activate","BaseRenderLayer_1","CursorRenderLayer","container","_cell","_state","isFocused","_cursorRenderers","_renderBarCursor","_renderBlockCursor","_renderUnderlineCursor","_clearCursor","_cursorBlinkStateManager","pause","resume","CursorBlinkStateManager","_render","restartBlinkAnimation","isPaused","triggeredByAnimationFrame","cursorY","viewportRelativeCursorY","_renderBlurCursor","isCursorVisible","strokeStyle","_restartInterval","_blinkStartTimeout","_blinkInterval","_animationTimeRestarted","timeToStart","time","GridCache","cache","LinkRenderLayer","onLinkHover","onLinkLeave","_clearCurrentLink","middleRowCount","_renderer","_isPaused","_needsFullRefresh","_canvasWidth","_canvasHeight","_onDimensionsChange","_onRefreshRequest","_renderDebouncer","onDevicePixelRatioChange","observer_1","IntersectionObserver","_onIntersectionChange","threshold","observe","disconnect","intersectionRatio","renderRows","_fireOnCanvasResize","changeOptions","_fullRefresh","TextRenderLayer_1","SelectionRenderLayer_1","CursorRenderLayer_1","LinkRenderLayer_1","CharacterJoinerRegistry_1","_characterJoinerRegistry","_renderLayers","TextRenderLayer","SelectionRenderLayer","_devicePixelRatio","_updateDimensions","_runOperation","operation","_clearState","_didStateChange","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","middleRowsCount","_areCoordinatesEqual","coord1","coord2","GridCache_1","characterJoinerRegistry","_characterOverlapCache","terminalFont","_characterWidth","_characterFont","_forEachCell","firstRow","lastRow","joinerRegistry","isJoined","lastCharX","_isOverlapping","_drawBackground","startX","startY","prevFillStyle","nextFillStyle","_drawForeground","overlaps","measureText","getGlyphCacheKey","glyph","BaseCharAtlas_1","CharAtlasGenerator_1","LRUMap_1","TEXTURE_WIDTH","TEXTURE_HEIGHT","TRANSPARENT_COLOR","DynamicCharAtlas","_config","_drawToCacheCount","_glyphsWaitingOnBitmap","_bitmapCommitTimeout","_bitmap","_cacheCanvas","_cacheCtx","tmpCanvas","_tmpCtx","capacity","_cacheMap","prealloc","_canCache","glyphKey","cacheValue","_drawFromCache","peek","cacheValue_1","_drawToCache","_toCoordinateX","_toCoordinateY","cacheX","cacheY","drawImage","inBitmap","_getColorFromAnsiIndex","_getBackgroundColor","_getForegroundColor","fontStyle","putImageData","_addGlyphToBitmap","_generateBitmap","glyphsMovingToBitmap","then","bitmap","LRUMap","_map","_head","_tail","_nodePool","_unlinkNode","prev","_appendNode","tail","nodePool","peekValue","head","NoneCharAtlas","StaticCharAtlas","_canvasFactory","HTMLCanvasElement","_texture","texture","_isCached","isAscii","isBasicColor","isDefaultColor","isDefaultBackground","charAtlasCellWidth","charAtlasCellHeight","DomRendererRowFactory_1","TERMINAL_CLASS_PREFIX","ROW_CONTAINER_CLASS","SELECTION_CLASS","nextTerminalId","_terminalClass","_refreshRowElements","_selectionContainer","_injectCss","_rowFactory","DomRendererRowFactory","_themeStyleElement","_dimensionsStyleElement","overflow","_terminalSelector","innerHTML","BOLD_CLASS","ITALIC_CLASS","CURSOR_CLASS","CURSOR_BLINK_CLASS","CURSOR_STYLE_BLOCK_CLASS","CURSOR_STYLE_BAR_CLASS","CURSOR_STYLE_UNDERLINE_CLASS","documentFragment","_createSelectionElement","endCol_1","colStart","colEnd","cursorAbsoluteY","cursorX","rowElement","createRow","_setCellUnderline","enabled","span","textDecoration","DIM_CLASS","UNDERLINE_CLASS","_terminalOptions","isCursorRow","charElement","swapColor"],"mappings":"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","file":"pwd.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 29);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable = (function () {\n    function Disposable() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    Disposable.prototype.dispose = function () {\n        this._isDisposed = true;\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables.length = 0;\n    };\n    Disposable.prototype.register = function (d) {\n        this._disposables.push(d);\n    };\n    Disposable.prototype.unregister = function (d) {\n        var index = this._disposables.indexOf(d);\n        if (index !== -1) {\n            this._disposables.splice(index, 1);\n        }\n    };\n    return Disposable;\n}());\nexports.Disposable = Disposable;\n//# sourceMappingURL=Lifecycle.js.map\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextDecoder_1 = __webpack_require__(10);\nvar Types_1 = __webpack_require__(6);\nexports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);\nexports.CHAR_DATA_ATTR_INDEX = 0;\nexports.CHAR_DATA_CHAR_INDEX = 1;\nexports.CHAR_DATA_WIDTH_INDEX = 2;\nexports.CHAR_DATA_CODE_INDEX = 3;\nexports.NULL_CELL_CHAR = '';\nexports.NULL_CELL_WIDTH = 1;\nexports.NULL_CELL_CODE = 0;\nexports.WHITESPACE_CELL_CHAR = ' ';\nexports.WHITESPACE_CELL_WIDTH = 1;\nexports.WHITESPACE_CELL_CODE = 32;\nvar CELL_SIZE = 3;\nvar AttributeData = (function () {\n    function AttributeData() {\n        this.fg = 0;\n        this.bg = 0;\n    }\n    AttributeData.toColorRGB = function (value) {\n        return [\n            value >>> 16 & 255,\n            value >>> 8 & 255,\n            value & 255\n        ];\n    };\n    AttributeData.fromColorRGB = function (value) {\n        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;\n    };\n    AttributeData.prototype.clone = function () {\n        var newObj = new AttributeData();\n        newObj.fg = this.fg;\n        newObj.bg = this.bg;\n        return newObj;\n    };\n    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };\n    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };\n    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };\n    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };\n    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };\n    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };\n    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };\n    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };\n    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };\n    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };\n    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };\n    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };\n    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };\n    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };\n    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };\n    AttributeData.prototype.getFgColor = function () {\n        switch (this.fg & 50331648) {\n            case 16777216:\n            case 33554432: return this.fg & 255;\n            case 50331648: return this.fg & 16777215;\n            default: return -1;\n        }\n    };\n    AttributeData.prototype.getBgColor = function () {\n        switch (this.bg & 50331648) {\n            case 16777216:\n            case 33554432: return this.bg & 255;\n            case 50331648: return this.bg & 16777215;\n            default: return -1;\n        }\n    };\n    return AttributeData;\n}());\nexports.AttributeData = AttributeData;\nexports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData());\nvar CellData = (function (_super) {\n    __extends(CellData, _super);\n    function CellData() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.content = 0;\n        _this.fg = 0;\n        _this.bg = 0;\n        _this.combinedData = '';\n        return _this;\n    }\n    CellData.fromCharData = function (value) {\n        var obj = new CellData();\n        obj.setFromCharData(value);\n        return obj;\n    };\n    CellData.prototype.isCombined = function () {\n        return this.content & 2097152;\n    };\n    CellData.prototype.getWidth = function () {\n        return this.content >> 22;\n    };\n    CellData.prototype.getChars = function () {\n        if (this.content & 2097152) {\n            return this.combinedData;\n        }\n        if (this.content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);\n        }\n        return '';\n    };\n    CellData.prototype.getCode = function () {\n        return (this.isCombined())\n            ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n            : this.content & 2097151;\n    };\n    CellData.prototype.setFromCharData = function (value) {\n        this.fg = value[exports.CHAR_DATA_ATTR_INDEX];\n        this.bg = 0;\n        var combined = false;\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 2) {\n            combined = true;\n        }\n        else if (value[exports.CHAR_DATA_CHAR_INDEX].length === 2) {\n            var code = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                var second = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n                }\n                else {\n                    combined = true;\n                }\n            }\n            else {\n                combined = true;\n            }\n        }\n        else {\n            this.content = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        if (combined) {\n            this.combinedData = value[exports.CHAR_DATA_CHAR_INDEX];\n            this.content = 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    CellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return CellData;\n}(AttributeData));\nexports.CellData = CellData;\nvar BufferLine = (function () {\n    function BufferLine(cols, fillCellData, isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        this.isWrapped = isWrapped;\n        this._combined = {};\n        this._data = new Uint32Array(cols * CELL_SIZE);\n        var cell = fillCellData || CellData.fromCharData([0, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE]);\n        for (var i = 0; i < cols; ++i) {\n            this.setCell(i, cell);\n        }\n        this.length = cols;\n    }\n    BufferLine.prototype.get = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        var cp = content & 2097151;\n        return [\n            this._data[index * CELL_SIZE + 1],\n            (content & 2097152)\n                ? this._combined[index]\n                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',\n            content >> 22,\n            (content & 2097152)\n                ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n                : cp\n        ];\n    };\n    BufferLine.prototype.set = function (index, value) {\n        this._data[index * CELL_SIZE + 1] = value[exports.CHAR_DATA_ATTR_INDEX];\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 1) {\n            this._combined[index] = value[1];\n            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        else {\n            this._data[index * CELL_SIZE + 0] = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    BufferLine.prototype.getWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] >> 22;\n    };\n    BufferLine.prototype.hasWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 12582912;\n    };\n    BufferLine.prototype.getFg = function (index) {\n        return this._data[index * CELL_SIZE + 1];\n    };\n    BufferLine.prototype.getBg = function (index) {\n        return this._data[index * CELL_SIZE + 2];\n    };\n    BufferLine.prototype.hasContent = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 4194303;\n    };\n    BufferLine.prototype.getCodePoint = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index].charCodeAt(this._combined[index].length - 1);\n        }\n        return content & 2097151;\n    };\n    BufferLine.prototype.isCombined = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 2097152;\n    };\n    BufferLine.prototype.getString = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index];\n        }\n        if (content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(content & 2097151);\n        }\n        return '';\n    };\n    BufferLine.prototype.loadCell = function (index, cell) {\n        var startIndex = index * CELL_SIZE;\n        cell.content = this._data[startIndex + 0];\n        cell.fg = this._data[startIndex + 1];\n        cell.bg = this._data[startIndex + 2];\n        if (cell.content & 2097152) {\n            cell.combinedData = this._combined[index];\n        }\n        return cell;\n    };\n    BufferLine.prototype.setCell = function (index, cell) {\n        if (cell.content & 2097152) {\n            this._combined[index] = cell.combinedData;\n        }\n        this._data[index * CELL_SIZE + 0] = cell.content;\n        this._data[index * CELL_SIZE + 1] = cell.fg;\n        this._data[index * CELL_SIZE + 2] = cell.bg;\n    };\n    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {\n        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);\n        this._data[index * CELL_SIZE + 1] = fg;\n        this._data[index * CELL_SIZE + 2] = bg;\n    };\n    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);\n        }\n        else {\n            if (content & 2097151) {\n                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);\n                content &= ~2097151;\n                content |= 2097152;\n            }\n            else {\n                content = codePoint | (1 << 22);\n            }\n            this._data[index * CELL_SIZE + 0] = content;\n        }\n    };\n    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = this.length - pos - n - 1; i >= 0; --i) {\n                this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n            }\n            for (var i = 0; i < n; ++i) {\n                this.setCell(pos + i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = 0; i < this.length - pos - n; ++i) {\n                this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n            }\n            for (var i = this.length - n; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {\n        while (start < end && start < this.length) {\n            this.setCell(start++, fillCellData);\n        }\n    };\n    BufferLine.prototype.resize = function (cols, fillCellData) {\n        if (cols === this.length) {\n            return;\n        }\n        if (cols > this.length) {\n            var data = new Uint32Array(cols * CELL_SIZE);\n            if (this.length) {\n                if (cols * CELL_SIZE < this._data.length) {\n                    data.set(this._data.subarray(0, cols * CELL_SIZE));\n                }\n                else {\n                    data.set(this._data);\n                }\n            }\n            this._data = data;\n            for (var i = this.length; i < cols; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            if (cols) {\n                var data = new Uint32Array(cols * CELL_SIZE);\n                data.set(this._data.subarray(0, cols * CELL_SIZE));\n                this._data = data;\n                var keys = Object.keys(this._combined);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = parseInt(keys[i], 10);\n                    if (key >= cols) {\n                        delete this._combined[key];\n                    }\n                }\n            }\n            else {\n                this._data = new Uint32Array(0);\n                this._combined = {};\n            }\n        }\n        this.length = cols;\n    };\n    BufferLine.prototype.fill = function (fillCellData) {\n        this._combined = {};\n        for (var i = 0; i < this.length; ++i) {\n            this.setCell(i, fillCellData);\n        }\n    };\n    BufferLine.prototype.copyFrom = function (line) {\n        if (this.length !== line.length) {\n            this._data = new Uint32Array(line._data);\n        }\n        else {\n            this._data.set(line._data);\n        }\n        this.length = line.length;\n        this._combined = {};\n        for (var el in line._combined) {\n            this._combined[el] = line._combined[el];\n        }\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLine.prototype.clone = function () {\n        var newLine = new BufferLine(0);\n        newLine._data = new Uint32Array(this._data);\n        newLine.length = this.length;\n        for (var el in this._combined) {\n            newLine._combined[el] = this._combined[el];\n        }\n        newLine.isWrapped = this.isWrapped;\n        return newLine;\n    };\n    BufferLine.prototype.getTrimmedLength = function () {\n        for (var i = this.length - 1; i >= 0; --i) {\n            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {\n                return i + (this._data[i * CELL_SIZE + 0] >> 22);\n            }\n        }\n        return 0;\n    };\n    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {\n        var srcData = src._data;\n        if (applyInReverse) {\n            for (var cell = length - 1; cell >= 0; cell--) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        else {\n            for (var cell = 0; cell < length; cell++) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        var srcCombinedKeys = Object.keys(src._combined);\n        for (var i = 0; i < srcCombinedKeys.length; i++) {\n            var key = parseInt(srcCombinedKeys[i], 10);\n            if (key >= srcCol) {\n                this._combined[key - srcCol + destCol] = src._combined[key];\n            }\n        }\n    };\n    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {\n        if (trimRight === void 0) { trimRight = false; }\n        if (startCol === void 0) { startCol = 0; }\n        if (endCol === void 0) { endCol = this.length; }\n        if (trimRight) {\n            endCol = Math.min(endCol, this.getTrimmedLength());\n        }\n        var result = '';\n        while (startCol < endCol) {\n            var content = this._data[startCol * CELL_SIZE + 0];\n            var cp = content & 2097151;\n            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : exports.WHITESPACE_CELL_CHAR;\n            startCol += (content >> 22) || 1;\n        }\n        return result;\n    };\n    return BufferLine;\n}());\nexports.BufferLine = BufferLine;\n//# sourceMappingURL=BufferLine.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2 = (function () {\n    function EventEmitter2() {\n        this._listeners = [];\n    }\n    Object.defineProperty(EventEmitter2.prototype, \"event\", {\n        get: function () {\n            var _this = this;\n            if (!this._event) {\n                this._event = function (listener) {\n                    _this._listeners.push(listener);\n                    var disposable = {\n                        dispose: function () {\n                            for (var i = 0; i < _this._listeners.length; i++) {\n                                if (_this._listeners[i] === listener) {\n                                    _this._listeners.splice(i, 1);\n                                    return;\n                                }\n                            }\n                        }\n                    };\n                    return disposable;\n                };\n            }\n            return this._event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EventEmitter2.prototype.fire = function (data) {\n        var queue = [];\n        for (var i = 0; i < this._listeners.length; i++) {\n            queue.push(this._listeners[i]);\n        }\n        for (var i = 0; i < queue.length; i++) {\n            queue[i].call(undefined, data);\n        }\n    };\n    return EventEmitter2;\n}());\nexports.EventEmitter2 = EventEmitter2;\n//# sourceMappingURL=EventEmitter2.js.map\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.INVERTED_DEFAULT_COLOR = 257;\nexports.DIM_OPACITY = 0.5;\nexports.CHAR_ATLAS_CELL_SPACING = 1;\n//# sourceMappingURL=Types.js.map\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode = (typeof navigator === 'undefined') ? true : false;\nvar userAgent = (isNode) ? 'node' : navigator.userAgent;\nvar platform = (isNode) ? 'node' : navigator.platform;\nexports.isFirefox = !!~userAgent.indexOf('Firefox');\nexports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');\nexports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);\nexports.isIpad = platform === 'iPad';\nexports.isIphone = platform === 'iPhone';\nexports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);\nexports.isLinux = platform.indexOf('Linux') >= 0;\nfunction contains(arr, el) {\n    return arr.indexOf(el) >= 0;\n}\n//# sourceMappingURL=Platform.js.map\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction addDisposableDomListener(node, type, handler, useCapture) {\n    node.addEventListener(type, handler, useCapture);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            node.removeEventListener(type, handler, useCapture);\n        }\n    };\n}\nexports.addDisposableDomListener = addDisposableDomListener;\n//# sourceMappingURL=Lifecycle.js.map\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_COLOR = 256;\n//# sourceMappingURL=Types.js.map\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar C0;\n(function (C0) {\n    C0.NUL = '\\x00';\n    C0.SOH = '\\x01';\n    C0.STX = '\\x02';\n    C0.ETX = '\\x03';\n    C0.EOT = '\\x04';\n    C0.ENQ = '\\x05';\n    C0.ACK = '\\x06';\n    C0.BEL = '\\x07';\n    C0.BS = '\\x08';\n    C0.HT = '\\x09';\n    C0.LF = '\\x0a';\n    C0.VT = '\\x0b';\n    C0.FF = '\\x0c';\n    C0.CR = '\\x0d';\n    C0.SO = '\\x0e';\n    C0.SI = '\\x0f';\n    C0.DLE = '\\x10';\n    C0.DC1 = '\\x11';\n    C0.DC2 = '\\x12';\n    C0.DC3 = '\\x13';\n    C0.DC4 = '\\x14';\n    C0.NAK = '\\x15';\n    C0.SYN = '\\x16';\n    C0.ETB = '\\x17';\n    C0.CAN = '\\x18';\n    C0.EM = '\\x19';\n    C0.SUB = '\\x1a';\n    C0.ESC = '\\x1b';\n    C0.FS = '\\x1c';\n    C0.GS = '\\x1d';\n    C0.RS = '\\x1e';\n    C0.US = '\\x1f';\n    C0.SP = '\\x20';\n    C0.DEL = '\\x7f';\n})(C0 = exports.C0 || (exports.C0 = {}));\nvar C1;\n(function (C1) {\n    C1.PAD = '\\x80';\n    C1.HOP = '\\x81';\n    C1.BPH = '\\x82';\n    C1.NBH = '\\x83';\n    C1.IND = '\\x84';\n    C1.NEL = '\\x85';\n    C1.SSA = '\\x86';\n    C1.ESA = '\\x87';\n    C1.HTS = '\\x88';\n    C1.HTJ = '\\x89';\n    C1.VTS = '\\x8a';\n    C1.PLD = '\\x8b';\n    C1.PLU = '\\x8c';\n    C1.RI = '\\x8d';\n    C1.SS2 = '\\x8e';\n    C1.SS3 = '\\x8f';\n    C1.DCS = '\\x90';\n    C1.PU1 = '\\x91';\n    C1.PU2 = '\\x92';\n    C1.STS = '\\x93';\n    C1.CCH = '\\x94';\n    C1.MW = '\\x95';\n    C1.SPA = '\\x96';\n    C1.EPA = '\\x97';\n    C1.SOS = '\\x98';\n    C1.SGCI = '\\x99';\n    C1.SCI = '\\x9a';\n    C1.CSI = '\\x9b';\n    C1.ST = '\\x9c';\n    C1.OSC = '\\x9d';\n    C1.PM = '\\x9e';\n    C1.APC = '\\x9f';\n})(C1 = exports.C1 || (exports.C1 = {}));\n//# sourceMappingURL=EscapeSequences.js.map\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = __webpack_require__(6);\nvar Types_2 = __webpack_require__(3);\nvar CharAtlasCache_1 = __webpack_require__(19);\nvar BufferLine_1 = __webpack_require__(1);\nvar BaseRenderLayer = (function () {\n    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {\n        this._container = _container;\n        this._alpha = _alpha;\n        this._colors = _colors;\n        this._scaledCharWidth = 0;\n        this._scaledCharHeight = 0;\n        this._scaledCellWidth = 0;\n        this._scaledCellHeight = 0;\n        this._scaledCharLeft = 0;\n        this._scaledCharTop = 0;\n        this._currentGlyphIdentifier = {\n            chars: '',\n            code: 0,\n            bg: 0,\n            fg: 0,\n            bold: false,\n            dim: false,\n            italic: false\n        };\n        this._canvas = document.createElement('canvas');\n        this._canvas.classList.add(\"xterm-\" + id + \"-layer\");\n        this._canvas.style.zIndex = zIndex.toString();\n        this._initCanvas();\n        this._container.appendChild(this._canvas);\n    }\n    BaseRenderLayer.prototype.dispose = function () {\n        this._container.removeChild(this._canvas);\n        if (this._charAtlas) {\n            this._charAtlas.dispose();\n        }\n    };\n    BaseRenderLayer.prototype._initCanvas = function () {\n        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });\n        if (!this._alpha) {\n            this.clearAll();\n        }\n    };\n    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };\n    BaseRenderLayer.prototype.onBlur = function (terminal) { };\n    BaseRenderLayer.prototype.onFocus = function (terminal) { };\n    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };\n    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };\n    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n    };\n    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {\n        this._refreshCharAtlas(terminal, colorSet);\n    };\n    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {\n        if (alpha === this._alpha) {\n            return;\n        }\n        var oldCanvas = this._canvas;\n        this._alpha = alpha;\n        this._canvas = this._canvas.cloneNode();\n        this._initCanvas();\n        this._container.replaceChild(this._canvas, oldCanvas);\n        this._refreshCharAtlas(terminal, this._colors);\n        this.onGridChanged(terminal, 0, terminal.rows - 1);\n    };\n    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {\n        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n            return;\n        }\n        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n        this._charAtlas.warmUp();\n    };\n    BaseRenderLayer.prototype.resize = function (terminal, dim) {\n        this._scaledCellWidth = dim.scaledCellWidth;\n        this._scaledCellHeight = dim.scaledCellHeight;\n        this._scaledCharWidth = dim.scaledCharWidth;\n        this._scaledCharHeight = dim.scaledCharHeight;\n        this._scaledCharLeft = dim.scaledCharLeft;\n        this._scaledCharTop = dim.scaledCharTop;\n        this._canvas.width = dim.scaledCanvasWidth;\n        this._canvas.height = dim.scaledCanvasHeight;\n        this._canvas.style.width = dim.canvasWidth + \"px\";\n        this._canvas.style.height = dim.canvasHeight + \"px\";\n        if (!this._alpha) {\n            this.clearAll();\n        }\n        this._refreshCharAtlas(terminal, this._colors);\n    };\n    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {\n        if (width === void 0) { width = 1; }\n        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {\n        this._ctx.lineWidth = window.devicePixelRatio;\n        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.clearAll = function () {\n        if (this._alpha) {\n            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n    };\n    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {\n        if (this._alpha) {\n            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n    };\n    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, cell, x, y) {\n        this._ctx.font = this._getFont(terminal, false, false);\n        this._ctx.textBaseline = 'middle';\n        this._clipRow(terminal, y);\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n    };\n    BaseRenderLayer.prototype.drawChars = function (terminal, cell, x, y) {\n        if (cell.isFgRGB() || cell.isBgRGB()) {\n            this._drawUncachedChars(terminal, cell, x, y);\n            return;\n        }\n        var fg;\n        var bg;\n        if (cell.isInverse()) {\n            fg = (cell.isBgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();\n            bg = (cell.isFgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();\n        }\n        else {\n            bg = (cell.isBgDefault()) ? Types_1.DEFAULT_COLOR : cell.getBgColor();\n            fg = (cell.isFgDefault()) ? Types_1.DEFAULT_COLOR : cell.getFgColor();\n        }\n        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Types_2.INVERTED_DEFAULT_COLOR;\n        fg += drawInBrightColor ? 8 : 0;\n        this._currentGlyphIdentifier.chars = cell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n        this._currentGlyphIdentifier.code = cell.getCode() || BufferLine_1.WHITESPACE_CELL_CODE;\n        this._currentGlyphIdentifier.bg = bg;\n        this._currentGlyphIdentifier.fg = fg;\n        this._currentGlyphIdentifier.bold = cell.isBold() && terminal.options.enableBold;\n        this._currentGlyphIdentifier.dim = !!cell.isDim();\n        this._currentGlyphIdentifier.italic = !!cell.isItalic();\n        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        if (!atlasDidDraw) {\n            this._drawUncachedChars(terminal, cell, x, y);\n        }\n    };\n    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, cell, x, y) {\n        this._ctx.save();\n        this._ctx.font = this._getFont(terminal, cell.isBold() && terminal.options.enableBold, !!cell.isItalic());\n        this._ctx.textBaseline = 'middle';\n        if (cell.isInverse()) {\n            if (cell.isBgDefault()) {\n                this._ctx.fillStyle = this._colors.background.css;\n            }\n            else if (cell.isBgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else {\n                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;\n            }\n        }\n        else {\n            if (cell.isFgDefault()) {\n                this._ctx.fillStyle = this._colors.foreground.css;\n            }\n            else if (cell.isFgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n            }\n            else {\n                var fg = cell.getFgColor();\n                if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                    fg += 8;\n                }\n                this._ctx.fillStyle = this._colors.ansi[fg].css;\n            }\n        }\n        this._clipRow(terminal, y);\n        if (cell.isDim()) {\n            this._ctx.globalAlpha = Types_2.DIM_OPACITY;\n        }\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n        this._ctx.restore();\n    };\n    BaseRenderLayer.prototype._clipRow = function (terminal, y) {\n        this._ctx.beginPath();\n        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);\n        this._ctx.clip();\n    };\n    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {\n        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n        var fontStyle = isItalic ? 'italic' : '';\n        return fontStyle + \" \" + fontWeight + \" \" + terminal.options.fontSize * window.devicePixelRatio + \"px \" + terminal.options.fontFamily;\n    };\n    return BaseRenderLayer;\n}());\nexports.BaseRenderLayer = BaseRenderLayer;\n//# sourceMappingURL=BaseRenderLayer.js.map\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blankLine = 'Blank line';\nexports.promptLabel = 'Terminal input';\nexports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n//# sourceMappingURL=Strings.js.map\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction stringFromCodePoint(codePoint) {\n    if (codePoint > 0xFFFF) {\n        codePoint -= 0x10000;\n        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n    }\n    return String.fromCharCode(codePoint);\n}\nexports.stringFromCodePoint = stringFromCodePoint;\nfunction utf32ToString(data, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = data.length; }\n    var result = '';\n    for (var i = start; i < end; ++i) {\n        var codepoint = data[i];\n        if (codepoint > 0xFFFF) {\n            codepoint -= 0x10000;\n            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n        }\n        else {\n            result += String.fromCharCode(codepoint);\n        }\n    }\n    return result;\n}\nexports.utf32ToString = utf32ToString;\nvar StringToUtf32 = (function () {\n    function StringToUtf32() {\n        this._interim = 0;\n    }\n    StringToUtf32.prototype.clear = function () {\n        this._interim = 0;\n    };\n    StringToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var startPos = 0;\n        if (this._interim) {\n            var second = input.charCodeAt(startPos++);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                target[size++] = this._interim;\n                target[size++] = second;\n            }\n            this._interim = 0;\n        }\n        for (var i = startPos; i < length; ++i) {\n            var code = input.charCodeAt(i);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                if (++i >= length) {\n                    this._interim = code;\n                    return size;\n                }\n                var second = input.charCodeAt(i);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n                }\n                else {\n                    target[size++] = code;\n                    target[size++] = second;\n                }\n                continue;\n            }\n            target[size++] = code;\n        }\n        return size;\n    };\n    return StringToUtf32;\n}());\nexports.StringToUtf32 = StringToUtf32;\nvar Utf8ToUtf32 = (function () {\n    function Utf8ToUtf32() {\n        this.interim = new Uint8Array(3);\n    }\n    Utf8ToUtf32.prototype.clear = function () {\n        this.interim.fill(0);\n    };\n    Utf8ToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var byte1;\n        var byte2;\n        var byte3;\n        var byte4;\n        var codepoint = 0;\n        var startPos = 0;\n        if (this.interim[0]) {\n            var discardInterim = false;\n            var cp = this.interim[0];\n            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n            var pos = 0;\n            var tmp = void 0;\n            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n                cp <<= 6;\n                cp |= tmp;\n            }\n            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n            var missing = type - pos;\n            while (startPos < missing) {\n                if (startPos >= length) {\n                    return 0;\n                }\n                tmp = input[startPos++];\n                if ((tmp & 0xC0) !== 0x80) {\n                    startPos--;\n                    discardInterim = true;\n                    break;\n                }\n                else {\n                    this.interim[pos++] = tmp;\n                    cp <<= 6;\n                    cp |= tmp & 0x3F;\n                }\n            }\n            if (!discardInterim) {\n                if (type === 2) {\n                    if (cp < 0x80) {\n                        startPos--;\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else if (type === 3) {\n                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF)) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else {\n                    if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n            }\n            this.interim.fill(0);\n        }\n        var fourStop = length - 4;\n        var i = startPos;\n        while (i < length) {\n            while (i < fourStop\n                && !((byte1 = input[i]) & 0x80)\n                && !((byte2 = input[i + 1]) & 0x80)\n                && !((byte3 = input[i + 2]) & 0x80)\n                && !((byte4 = input[i + 3]) & 0x80)) {\n                target[size++] = byte1;\n                target[size++] = byte2;\n                target[size++] = byte3;\n                target[size++] = byte4;\n                i += 4;\n            }\n            byte1 = input[i++];\n            if (byte1 < 0x80) {\n                target[size++] = byte1;\n            }\n            else if ((byte1 & 0xE0) === 0xC0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n                if (codepoint < 0x80) {\n                    i--;\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF0) === 0xE0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF)) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF8) === 0xF0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    this.interim[2] = byte3;\n                    return size;\n                }\n                byte4 = input[i++];\n                if ((byte4 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else {\n            }\n        }\n        return size;\n    };\n    return Utf8ToUtf32;\n}());\nexports.Utf8ToUtf32 = Utf8ToUtf32;\n//# sourceMappingURL=TextDecoder.js.map\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas = (function () {\n    function BaseCharAtlas() {\n        this._didWarmUp = false;\n    }\n    BaseCharAtlas.prototype.dispose = function () { };\n    BaseCharAtlas.prototype.warmUp = function () {\n        if (!this._didWarmUp) {\n            this._doWarmUp();\n            this._didWarmUp = true;\n        }\n    };\n    BaseCharAtlas.prototype._doWarmUp = function () { };\n    BaseCharAtlas.prototype.beginFrame = function () { };\n    return BaseCharAtlas;\n}());\nexports.default = BaseCharAtlas;\n//# sourceMappingURL=BaseCharAtlas.js.map\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = __webpack_require__(6);\nfunction generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {\n    var clonedColors = {\n        foreground: colors.foreground,\n        background: colors.background,\n        cursor: null,\n        cursorAccent: null,\n        selection: null,\n        ansi: colors.ansi.slice(0, 16)\n    };\n    return {\n        type: terminal.options.experimentalCharAtlas,\n        devicePixelRatio: window.devicePixelRatio,\n        scaledCharWidth: scaledCharWidth,\n        scaledCharHeight: scaledCharHeight,\n        fontFamily: terminal.options.fontFamily,\n        fontSize: terminal.options.fontSize,\n        fontWeight: terminal.options.fontWeight,\n        fontWeightBold: terminal.options.fontWeightBold,\n        allowTransparency: terminal.options.allowTransparency,\n        colors: clonedColors\n    };\n}\nexports.generateConfig = generateConfig;\nfunction configEquals(a, b) {\n    for (var i = 0; i < a.colors.ansi.length; i++) {\n        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n            return false;\n        }\n    }\n    return a.type === b.type &&\n        a.devicePixelRatio === b.devicePixelRatio &&\n        a.fontFamily === b.fontFamily &&\n        a.fontSize === b.fontSize &&\n        a.fontWeight === b.fontWeight &&\n        a.fontWeightBold === b.fontWeightBold &&\n        a.allowTransparency === b.allowTransparency &&\n        a.scaledCharWidth === b.scaledCharWidth &&\n        a.scaledCharHeight === b.scaledCharHeight &&\n        a.colors.foreground === b.colors.foreground &&\n        a.colors.background === b.colors.background;\n}\nexports.configEquals = configEquals;\nfunction is256Color(colorCode) {\n    return colorCode < Types_1.DEFAULT_COLOR;\n}\nexports.is256Color = is256Color;\n//# sourceMappingURL=CharAtlasUtils.js.map\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CircularList_1 = __webpack_require__(48);\nvar BufferLine_1 = __webpack_require__(1);\nvar BufferReflow_1 = __webpack_require__(51);\nvar Marker_1 = __webpack_require__(52);\nexports.MAX_BUFFER_SIZE = 4294967295;\nvar Buffer = (function () {\n    function Buffer(_terminal, _hasScrollback) {\n        this._terminal = _terminal;\n        this._hasScrollback = _hasScrollback;\n        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.markers = [];\n        this._nullCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.NULL_CELL_CHAR, BufferLine_1.NULL_CELL_WIDTH, BufferLine_1.NULL_CELL_CODE]);\n        this._whitespaceCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.WHITESPACE_CELL_CHAR, BufferLine_1.WHITESPACE_CELL_WIDTH, BufferLine_1.WHITESPACE_CELL_CODE]);\n        this._cols = this._terminal.cols;\n        this._rows = this._terminal.rows;\n        this.clear();\n    }\n    Buffer.prototype.getNullCell = function (attr) {\n        if (attr) {\n            this._nullCell.fg = attr.fg;\n            this._nullCell.bg = attr.bg;\n        }\n        else {\n            this._nullCell.fg = 0;\n            this._nullCell.bg = 0;\n        }\n        return this._nullCell;\n    };\n    Buffer.prototype.getWhitespaceCell = function (attr) {\n        if (attr) {\n            this._whitespaceCell.fg = attr.fg;\n            this._whitespaceCell.bg = attr.bg;\n        }\n        else {\n            this._whitespaceCell.fg = 0;\n            this._whitespaceCell.bg = 0;\n        }\n        return this._whitespaceCell;\n    };\n    Buffer.prototype.getBlankLine = function (attr, isWrapped) {\n        return new BufferLine_1.BufferLine(this._terminal.cols, this.getNullCell(attr), isWrapped);\n    };\n    Object.defineProperty(Buffer.prototype, \"hasScrollback\", {\n        get: function () {\n            return this._hasScrollback && this.lines.maxLength > this._rows;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"isCursorInViewport\", {\n        get: function () {\n            var absoluteY = this.ybase + this.y;\n            var relativeY = absoluteY - this.ydisp;\n            return (relativeY >= 0 && relativeY < this._rows);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._getCorrectBufferLength = function (rows) {\n        if (!this._hasScrollback) {\n            return rows;\n        }\n        var correctBufferLength = rows + this._terminal.options.scrollback;\n        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;\n    };\n    Buffer.prototype.fillViewportRows = function (fillAttr) {\n        if (this.lines.length === 0) {\n            if (fillAttr === undefined) {\n                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;\n            }\n            var i = this._rows;\n            while (i--) {\n                this.lines.push(this.getBlankLine(fillAttr));\n            }\n        }\n    };\n    Buffer.prototype.clear = function () {\n        this.ydisp = 0;\n        this.ybase = 0;\n        this.y = 0;\n        this.x = 0;\n        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));\n        this.scrollTop = 0;\n        this.scrollBottom = this._rows - 1;\n        this.setupTabStops();\n    };\n    Buffer.prototype.resize = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var newMaxLength = this._getCorrectBufferLength(newRows);\n        if (newMaxLength > this.lines.maxLength) {\n            this.lines.maxLength = newMaxLength;\n        }\n        if (this.lines.length > 0) {\n            if (this._cols < newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n            var addToY = 0;\n            if (this._rows < newRows) {\n                for (var y = this._rows; y < newRows; y++) {\n                    if (this.lines.length < newRows + this.ybase) {\n                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                            this.ybase--;\n                            addToY++;\n                            if (this.ydisp > 0) {\n                                this.ydisp--;\n                            }\n                        }\n                        else {\n                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                        }\n                    }\n                }\n            }\n            else {\n                for (var y = this._rows; y > newRows; y--) {\n                    if (this.lines.length > newRows + this.ybase) {\n                        if (this.lines.length > this.ybase + this.y + 1) {\n                            this.lines.pop();\n                        }\n                        else {\n                            this.ybase++;\n                            this.ydisp++;\n                        }\n                    }\n                }\n            }\n            if (newMaxLength < this.lines.maxLength) {\n                var amountToTrim = this.lines.length - newMaxLength;\n                if (amountToTrim > 0) {\n                    this.lines.trimStart(amountToTrim);\n                    this.ybase = Math.max(this.ybase - amountToTrim, 0);\n                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n                }\n                this.lines.maxLength = newMaxLength;\n            }\n            this.x = Math.min(this.x, newCols - 1);\n            this.y = Math.min(this.y, newRows - 1);\n            if (addToY) {\n                this.y += addToY;\n            }\n            this.savedY = Math.min(this.savedY, newRows - 1);\n            this.savedX = Math.min(this.savedX, newCols - 1);\n            this.scrollTop = 0;\n        }\n        this.scrollBottom = newRows - 1;\n        if (this._isReflowEnabled) {\n            this._reflow(newCols, newRows);\n            if (this._cols > newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n        }\n        this._cols = newCols;\n        this._rows = newRows;\n    };\n    Object.defineProperty(Buffer.prototype, \"_isReflowEnabled\", {\n        get: function () {\n            return this._hasScrollback && !this._terminal.options.windowsMode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._reflow = function (newCols, newRows) {\n        if (this._cols === newCols) {\n            return;\n        }\n        if (newCols > this._cols) {\n            this._reflowLarger(newCols, newRows);\n        }\n        else {\n            this._reflowSmaller(newCols, newRows);\n        }\n    };\n    Buffer.prototype._reflowLarger = function (newCols, newRows) {\n        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n        if (toRemove.length > 0) {\n            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);\n            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n        }\n    };\n    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var viewportAdjustments = countRemoved;\n        while (viewportAdjustments-- > 0) {\n            if (this.ybase === 0) {\n                if (this.y > 0) {\n                    this.y--;\n                }\n                if (this.lines.length < newRows) {\n                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                }\n            }\n            else {\n                if (this.ydisp === this.ybase) {\n                    this.ydisp--;\n                }\n                this.ybase--;\n            }\n        }\n    };\n    Buffer.prototype._reflowSmaller = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var toInsert = [];\n        var countToInsert = 0;\n        for (var y = this.lines.length - 1; y >= 0; y--) {\n            var nextLine = this.lines.get(y);\n            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n                continue;\n            }\n            var wrappedLines = [nextLine];\n            while (nextLine.isWrapped && y > 0) {\n                nextLine = this.lines.get(--y);\n                wrappedLines.unshift(nextLine);\n            }\n            var absoluteY = this.ybase + this.y;\n            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n                continue;\n            }\n            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n            var linesToAdd = destLineLengths.length - wrappedLines.length;\n            var trimmedLines = void 0;\n            if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n            }\n            else {\n                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n            }\n            var newLines = [];\n            for (var i = 0; i < linesToAdd; i++) {\n                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);\n                newLines.push(newLine);\n            }\n            if (newLines.length > 0) {\n                toInsert.push({\n                    start: y + wrappedLines.length + countToInsert,\n                    newLines: newLines\n                });\n                countToInsert += newLines.length;\n            }\n            wrappedLines.push.apply(wrappedLines, newLines);\n            var destLineIndex = destLineLengths.length - 1;\n            var destCol = destLineLengths[destLineIndex];\n            if (destCol === 0) {\n                destLineIndex--;\n                destCol = destLineLengths[destLineIndex];\n            }\n            var srcLineIndex = wrappedLines.length - linesToAdd - 1;\n            var srcCol = lastLineLength;\n            while (srcLineIndex >= 0) {\n                var cellsToCopy = Math.min(srcCol, destCol);\n                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n                destCol -= cellsToCopy;\n                if (destCol === 0) {\n                    destLineIndex--;\n                    destCol = destLineLengths[destLineIndex];\n                }\n                srcCol -= cellsToCopy;\n                if (srcCol === 0) {\n                    srcLineIndex--;\n                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);\n                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n                }\n            }\n            for (var i = 0; i < wrappedLines.length; i++) {\n                if (destLineLengths[i] < newCols) {\n                    wrappedLines[i].setCell(destLineLengths[i], nullCell);\n                }\n            }\n            var viewportAdjustments = linesToAdd - trimmedLines;\n            while (viewportAdjustments-- > 0) {\n                if (this.ybase === 0) {\n                    if (this.y < newRows - 1) {\n                        this.y++;\n                        this.lines.pop();\n                    }\n                    else {\n                        this.ybase++;\n                        this.ydisp++;\n                    }\n                }\n                else {\n                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n                        if (this.ybase === this.ydisp) {\n                            this.ydisp++;\n                        }\n                        this.ybase++;\n                    }\n                }\n            }\n        }\n        if (toInsert.length > 0) {\n            var insertEvents = [];\n            var originalLines = [];\n            for (var i = 0; i < this.lines.length; i++) {\n                originalLines.push(this.lines.get(i));\n            }\n            var originalLinesLength = this.lines.length;\n            var originalLineIndex = originalLinesLength - 1;\n            var nextToInsertIndex = 0;\n            var nextToInsert = toInsert[nextToInsertIndex];\n            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n            var countInsertedSoFar = 0;\n            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n                        this.lines.set(i--, nextToInsert.newLines[nextI]);\n                    }\n                    i++;\n                    insertEvents.push({\n                        index: originalLineIndex + 1,\n                        amount: nextToInsert.newLines.length\n                    });\n                    countInsertedSoFar += nextToInsert.newLines.length;\n                    nextToInsert = toInsert[++nextToInsertIndex];\n                }\n                else {\n                    this.lines.set(i, originalLines[originalLineIndex--]);\n                }\n            }\n            var insertCountEmitted = 0;\n            for (var i = insertEvents.length - 1; i >= 0; i--) {\n                insertEvents[i].index += insertCountEmitted;\n                this.lines.onInsertEmitter.fire(insertEvents[i]);\n                insertCountEmitted += insertEvents[i].amount;\n            }\n            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n            if (amountToTrim > 0) {\n                this.lines.onTrimEmitter.fire(amountToTrim);\n            }\n        }\n    };\n    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {\n        if (trimRight === void 0) { trimRight = false; }\n        while (stringIndex) {\n            var line = this.lines.get(lineIndex);\n            if (!line) {\n                return [-1, -1];\n            }\n            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;\n            for (var i = 0; i < length_1; ++i) {\n                if (line.get(i)[BufferLine_1.CHAR_DATA_WIDTH_INDEX]) {\n                    stringIndex -= line.get(i)[BufferLine_1.CHAR_DATA_CHAR_INDEX].length || 1;\n                }\n                if (stringIndex < 0) {\n                    return [lineIndex, i];\n                }\n            }\n            lineIndex++;\n        }\n        return [lineIndex, 0];\n    };\n    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {\n        if (startCol === void 0) { startCol = 0; }\n        var line = this.lines.get(lineIndex);\n        if (!line) {\n            return '';\n        }\n        return line.translateToString(trimRight, startCol, endCol);\n    };\n    Buffer.prototype.getWrappedRangeForLine = function (y) {\n        var first = y;\n        var last = y;\n        while (first > 0 && this.lines.get(first).isWrapped) {\n            first--;\n        }\n        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {\n            last++;\n        }\n        return { first: first, last: last };\n    };\n    Buffer.prototype.setupTabStops = function (i) {\n        if (i !== null && i !== undefined) {\n            if (!this.tabs[i]) {\n                i = this.prevStop(i);\n            }\n        }\n        else {\n            this.tabs = {};\n            i = 0;\n        }\n        for (; i < this._cols; i += this._terminal.options.tabStopWidth) {\n            this.tabs[i] = true;\n        }\n    };\n    Buffer.prototype.prevStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[--x] && x > 0)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.nextStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[++x] && x < this._cols)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.addMarker = function (y) {\n        var _this = this;\n        var marker = new Marker_1.Marker(y);\n        this.markers.push(marker);\n        marker.register(this.lines.onTrim(function (amount) {\n            marker.line -= amount;\n            if (marker.line < 0) {\n                marker.dispose();\n            }\n        }));\n        marker.register(this.lines.onInsert(function (event) {\n            if (marker.line >= event.index) {\n                marker.line += event.amount;\n            }\n        }));\n        marker.register(this.lines.onDelete(function (event) {\n            if (marker.line >= event.index && marker.line < event.index + event.amount) {\n                marker.dispose();\n            }\n            if (marker.line > event.index) {\n                marker.line -= event.amount;\n            }\n        }));\n        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));\n        return marker;\n    };\n    Buffer.prototype._removeMarker = function (marker) {\n        this.markers.splice(this.markers.indexOf(marker), 1);\n    };\n    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {\n        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n    };\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nvar BufferStringIterator = (function () {\n    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {\n        if (_startIndex === void 0) { _startIndex = 0; }\n        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }\n        if (_startOverscan === void 0) { _startOverscan = 0; }\n        if (_endOverscan === void 0) { _endOverscan = 0; }\n        this._buffer = _buffer;\n        this._trimRight = _trimRight;\n        this._startIndex = _startIndex;\n        this._endIndex = _endIndex;\n        this._startOverscan = _startOverscan;\n        this._endOverscan = _endOverscan;\n        if (this._startIndex < 0) {\n            this._startIndex = 0;\n        }\n        if (this._endIndex > this._buffer.lines.length) {\n            this._endIndex = this._buffer.lines.length;\n        }\n        this._current = this._startIndex;\n    }\n    BufferStringIterator.prototype.hasNext = function () {\n        return this._current < this._endIndex;\n    };\n    BufferStringIterator.prototype.next = function () {\n        var range = this._buffer.getWrappedRangeForLine(this._current);\n        if (range.first < this._startIndex - this._startOverscan) {\n            range.first = this._startIndex - this._startOverscan;\n        }\n        if (range.last > this._endIndex + this._endOverscan) {\n            range.last = this._endIndex + this._endOverscan;\n        }\n        range.first = Math.max(range.first, 0);\n        range.last = Math.min(range.last, this._buffer.lines.length);\n        var result = '';\n        for (var i = range.first; i <= range.last; ++i) {\n            result += this._buffer.translateBufferLineToString(i, this._trimRight);\n        }\n        this._current = range.last + 1;\n        return { range: range, content: result };\n    };\n    return BufferStringIterator;\n}());\nexports.BufferStringIterator = BufferStringIterator;\n//# sourceMappingURL=Buffer.js.map\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypedArrayUtils_1 = __webpack_require__(17);\nexports.wcwidth = (function (opts) {\n    var COMBINING_BMP = [\n        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n    ];\n    var COMBINING_HIGH = [\n        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n        [0xE0100, 0xE01EF]\n    ];\n    function bisearch(ucs, data) {\n        var min = 0;\n        var max = data.length - 1;\n        var mid;\n        if (ucs < data[0][0] || ucs > data[max][1]) {\n            return false;\n        }\n        while (max >= min) {\n            mid = (min + max) >> 1;\n            if (ucs > data[mid][1]) {\n                min = mid + 1;\n            }\n            else if (ucs < data[mid][0]) {\n                max = mid - 1;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    function wcwidthHigh(ucs) {\n        if (bisearch(ucs, COMBINING_HIGH)) {\n            return 0;\n        }\n        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {\n            return 2;\n        }\n        return 1;\n    }\n    var control = opts.control | 0;\n    var table = new Uint8Array(65536);\n    TypedArrayUtils_1.fill(table, 1);\n    table[0] = opts.nul;\n    TypedArrayUtils_1.fill(table, opts.control, 1, 32);\n    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);\n    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);\n    table[0x2329] = 2;\n    table[0x232a] = 2;\n    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);\n    table[0x303f] = 1;\n    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);\n    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);\n    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);\n    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);\n    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);\n    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);\n    for (var r = 0; r < COMBINING_BMP.length; ++r) {\n        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);\n    }\n    return function (num) {\n        if (num < 32) {\n            return control | 0;\n        }\n        if (num < 127) {\n            return 1;\n        }\n        if (num < 65536) {\n            return table[num];\n        }\n        return wcwidthHigh(num);\n    };\n})({ nul: 0, control: 0 });\nfunction getStringCellWidth(s) {\n    var result = 0;\n    var length = s.length;\n    for (var i = 0; i < length; ++i) {\n        var code = s.charCodeAt(i);\n        if (0xD800 <= code && code <= 0xDBFF) {\n            if (++i >= length) {\n                return result + exports.wcwidth(code);\n            }\n            var second = s.charCodeAt(i);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                result += exports.wcwidth(second);\n            }\n        }\n        result += exports.wcwidth(code);\n    }\n    return result;\n}\nexports.getStringCellWidth = getStringCellWidth;\n//# sourceMappingURL=CharWidth.js.map\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper = (function () {\n    function MouseHelper(_renderCoordinator) {\n        this._renderCoordinator = _renderCoordinator;\n    }\n    MouseHelper.getCoordsRelativeToElement = function (event, element) {\n        var rect = element.getBoundingClientRect();\n        return [event.clientX - rect.left, event.clientY - rect.top];\n    };\n    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {\n        if (!charMeasure.width || !charMeasure.height) {\n            return null;\n        }\n        var coords = MouseHelper.getCoordsRelativeToElement(event, element);\n        if (!coords) {\n            return null;\n        }\n        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderCoordinator.dimensions.actualCellWidth / 2 : 0)) / this._renderCoordinator.dimensions.actualCellWidth);\n        coords[1] = Math.ceil(coords[1] / this._renderCoordinator.dimensions.actualCellHeight);\n        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n        return coords;\n    };\n    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {\n        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);\n        var x = coords[0];\n        var y = coords[1];\n        x += 32;\n        y += 32;\n        return { x: x, y: y };\n    };\n    return MouseHelper;\n}());\nexports.MouseHelper = MouseHelper;\n//# sourceMappingURL=MouseHelper.js.map\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = __webpack_require__(0);\nvar Lifecycle_2 = __webpack_require__(5);\nvar HOVER_DURATION = 500;\nvar MouseZoneManager = (function (_super) {\n    __extends(MouseZoneManager, _super);\n    function MouseZoneManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._zones = [];\n        _this._areZonesActive = false;\n        _this._tooltipTimeout = null;\n        _this._currentZone = null;\n        _this._lastHoverCoords = [null, null];\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));\n        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };\n        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };\n        _this._clickListener = function (e) { return _this._onClick(e); };\n        return _this;\n    }\n    MouseZoneManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._deactivate();\n    };\n    MouseZoneManager.prototype.add = function (zone) {\n        this._zones.push(zone);\n        if (this._zones.length === 1) {\n            this._activate();\n        }\n    };\n    MouseZoneManager.prototype.clearAll = function (start, end) {\n        if (this._zones.length === 0) {\n            return;\n        }\n        if (!end) {\n            start = 0;\n            end = this._terminal.rows - 1;\n        }\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if ((zone.y1 > start && zone.y1 <= end + 1) ||\n                (zone.y2 > start && zone.y2 <= end + 1) ||\n                (zone.y1 < start && zone.y2 > end + 1)) {\n                if (this._currentZone && this._currentZone === zone) {\n                    this._currentZone.leaveCallback();\n                    this._currentZone = null;\n                }\n                this._zones.splice(i--, 1);\n            }\n        }\n        if (this._zones.length === 0) {\n            this._deactivate();\n        }\n    };\n    MouseZoneManager.prototype._activate = function () {\n        if (!this._areZonesActive) {\n            this._areZonesActive = true;\n            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.addEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.addEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._deactivate = function () {\n        if (this._areZonesActive) {\n            this._areZonesActive = false;\n            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.removeEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.removeEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._onMouseMove = function (e) {\n        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n            this._onHover(e);\n            this._lastHoverCoords = [e.pageX, e.pageY];\n        }\n    };\n    MouseZoneManager.prototype._onHover = function (e) {\n        var _this = this;\n        var zone = this._findZoneEventAt(e);\n        if (zone === this._currentZone) {\n            return;\n        }\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n        if (!zone) {\n            return;\n        }\n        this._currentZone = zone;\n        if (zone.hoverCallback) {\n            zone.hoverCallback(e);\n        }\n        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);\n    };\n    MouseZoneManager.prototype._onTooltip = function (e) {\n        this._tooltipTimeout = null;\n        var zone = this._findZoneEventAt(e);\n        if (zone && zone.tooltipCallback) {\n            zone.tooltipCallback(e);\n        }\n    };\n    MouseZoneManager.prototype._onMouseDown = function (e) {\n        this._initialSelectionLength = this._terminal.getSelection().length;\n        if (!this._areZonesActive) {\n            return;\n        }\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            if (zone.willLinkActivate(e)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        }\n    };\n    MouseZoneManager.prototype._onMouseLeave = function (e) {\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n    };\n    MouseZoneManager.prototype._onClick = function (e) {\n        var zone = this._findZoneEventAt(e);\n        var currentSelectionLength = this._terminal.getSelection().length;\n        if (zone && currentSelectionLength === this._initialSelectionLength) {\n            zone.clickCallback(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    };\n    MouseZoneManager.prototype._findZoneEventAt = function (e) {\n        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);\n        if (!coords) {\n            return null;\n        }\n        var x = coords[0];\n        var y = coords[1];\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if (zone.y1 === zone.y2) {\n                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n                    return zone;\n                }\n            }\n            else {\n                if ((y === zone.y1 && x >= zone.x1) ||\n                    (y === zone.y2 && x < zone.x2) ||\n                    (y > zone.y1 && y < zone.y2)) {\n                    return zone;\n                }\n            }\n        }\n        return null;\n    };\n    return MouseZoneManager;\n}(Lifecycle_1.Disposable));\nexports.MouseZoneManager = MouseZoneManager;\nvar MouseZone = (function () {\n    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.clickCallback = clickCallback;\n        this.hoverCallback = hoverCallback;\n        this.tooltipCallback = tooltipCallback;\n        this.leaveCallback = leaveCallback;\n        this.willLinkActivate = willLinkActivate;\n    }\n    return MouseZone;\n}());\nexports.MouseZone = MouseZone;\n//# sourceMappingURL=MouseZoneManager.js.map\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fill(array, value, start, end) {\n    if (array.fill) {\n        return array.fill(value, start, end);\n    }\n    return fillFallback(array, value, start, end);\n}\nexports.fill = fill;\nfunction fillFallback(array, value, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = array.length; }\n    if (start >= array.length) {\n        return array;\n    }\n    start = (array.length + start) % array.length;\n    if (end >= array.length) {\n        end = array.length;\n    }\n    else {\n        end = (array.length + end) % array.length;\n    }\n    for (var i = start; i < end; ++i) {\n        array[i] = value;\n    }\n    return array;\n}\nexports.fillFallback = fillFallback;\nfunction concat(a, b) {\n    var result = new a.constructor(a.length + b.length);\n    result.set(a);\n    result.set(b, a.length);\n    return result;\n}\nexports.concat = concat;\n//# sourceMappingURL=TypedArrayUtils.js.map\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = __webpack_require__(1);\nvar JoinedCellData = (function (_super) {\n    __extends(JoinedCellData, _super);\n    function JoinedCellData(firstCell, chars, width) {\n        var _this = _super.call(this) || this;\n        _this.content = 0;\n        _this.combinedData = '';\n        _this.fg = firstCell.fg;\n        _this.bg = firstCell.bg;\n        _this.combinedData = chars;\n        _this._width = width;\n        return _this;\n    }\n    JoinedCellData.prototype.isCombined = function () {\n        return 2097152;\n    };\n    JoinedCellData.prototype.getWidth = function () {\n        return this._width;\n    };\n    JoinedCellData.prototype.getChars = function () {\n        return this.combinedData;\n    };\n    JoinedCellData.prototype.getCode = function () {\n        return 0x1FFFFF;\n    };\n    JoinedCellData.prototype.setFromCharData = function (value) {\n        throw new Error('not implemented');\n    };\n    JoinedCellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return JoinedCellData;\n}(BufferLine_1.AttributeData));\nexports.JoinedCellData = JoinedCellData;\nvar CharacterJoinerRegistry = (function () {\n    function CharacterJoinerRegistry(_terminal) {\n        this._terminal = _terminal;\n        this._characterJoiners = [];\n        this._nextCharacterJoinerId = 0;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {\n        var joiner = {\n            id: this._nextCharacterJoinerId++,\n            handler: handler\n        };\n        this._characterJoiners.push(joiner);\n        return joiner.id;\n    };\n    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {\n        for (var i = 0; i < this._characterJoiners.length; i++) {\n            if (this._characterJoiners[i].id === joinerId) {\n                this._characterJoiners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {\n        if (this._characterJoiners.length === 0) {\n            return [];\n        }\n        var line = this._terminal.buffer.lines.get(row);\n        if (line.length === 0) {\n            return [];\n        }\n        var ranges = [];\n        var lineStr = line.translateToString(true);\n        var rangeStartColumn = 0;\n        var currentStringIndex = 0;\n        var rangeStartStringIndex = 0;\n        var rangeAttrFG = line.getFg(0);\n        var rangeAttrBG = line.getBg(0);\n        for (var x = 0; x < line.getTrimmedLength(); x++) {\n            line.loadCell(x, this._workCell);\n            if (this._workCell.getWidth() === 0) {\n                continue;\n            }\n            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n                if (x - rangeStartColumn > 1) {\n                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n                    for (var i = 0; i < joinedRanges.length; i++) {\n                        ranges.push(joinedRanges[i]);\n                    }\n                }\n                rangeStartColumn = x;\n                rangeStartStringIndex = currentStringIndex;\n                rangeAttrFG = this._workCell.fg;\n                rangeAttrBG = this._workCell.bg;\n            }\n            currentStringIndex += this._workCell.getChars().length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n        }\n        if (this._terminal.cols - rangeStartColumn > 1) {\n            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n            for (var i = 0; i < joinedRanges.length; i++) {\n                ranges.push(joinedRanges[i]);\n            }\n        }\n        return ranges;\n    };\n    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {\n        var text = line.substring(startIndex, endIndex);\n        var joinedRanges = this._characterJoiners[0].handler(text);\n        for (var i = 1; i < this._characterJoiners.length; i++) {\n            var joinerRanges = this._characterJoiners[i].handler(text);\n            for (var j = 0; j < joinerRanges.length; j++) {\n                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);\n            }\n        }\n        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n        return joinedRanges;\n    };\n    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {\n        var currentRangeIndex = 0;\n        var currentRangeStarted = false;\n        var currentStringIndex = 0;\n        var currentRange = ranges[currentRangeIndex];\n        if (!currentRange) {\n            return;\n        }\n        for (var x = startCol; x < this._terminal.cols; x++) {\n            var width = line.getWidth(x);\n            var length_1 = line.getString(x).length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n            if (width === 0) {\n                continue;\n            }\n            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n                currentRange[0] = x;\n                currentRangeStarted = true;\n            }\n            if (currentRange[1] <= currentStringIndex) {\n                currentRange[1] = x;\n                currentRange = ranges[++currentRangeIndex];\n                if (!currentRange) {\n                    break;\n                }\n                if (currentRange[0] <= currentStringIndex) {\n                    currentRange[0] = x;\n                    currentRangeStarted = true;\n                }\n                else {\n                    currentRangeStarted = false;\n                }\n            }\n            currentStringIndex += length_1;\n        }\n        if (currentRange) {\n            currentRange[1] = this._terminal.cols;\n        }\n    };\n    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {\n        var inRange = false;\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (!inRange) {\n                if (newRange[1] <= range[0]) {\n                    ranges.splice(i, 0, newRange);\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    return ranges;\n                }\n                if (newRange[0] < range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    inRange = true;\n                }\n                continue;\n            }\n            else {\n                if (newRange[1] <= range[0]) {\n                    ranges[i - 1][1] = newRange[1];\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n                    ranges.splice(i, 1);\n                    inRange = false;\n                    return ranges;\n                }\n                ranges.splice(i, 1);\n                i--;\n            }\n        }\n        if (inRange) {\n            ranges[ranges.length - 1][1] = newRange[1];\n        }\n        else {\n            ranges.push(newRange);\n        }\n        return ranges;\n    };\n    return CharacterJoinerRegistry;\n}());\nexports.CharacterJoinerRegistry = CharacterJoinerRegistry;\n//# sourceMappingURL=CharacterJoinerRegistry.js.map\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CharAtlasUtils_1 = __webpack_require__(12);\nvar DynamicCharAtlas_1 = __webpack_require__(64);\nvar NoneCharAtlas_1 = __webpack_require__(66);\nvar StaticCharAtlas_1 = __webpack_require__(67);\nvar charAtlasImplementations = {\n    'none': NoneCharAtlas_1.default,\n    'static': StaticCharAtlas_1.default,\n    'dynamic': DynamicCharAtlas_1.default\n};\nvar charAtlasCache = [];\nfunction acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {\n    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        var ownedByIndex = entry.ownedBy.indexOf(terminal);\n        if (ownedByIndex >= 0) {\n            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n                return entry.atlas;\n            }\n            if (entry.ownedBy.length === 1) {\n                entry.atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                entry.ownedBy.splice(ownedByIndex, 1);\n            }\n            break;\n        }\n    }\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n            entry.ownedBy.push(terminal);\n            return entry.atlas;\n        }\n    }\n    var newEntry = {\n        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),\n        config: newConfig,\n        ownedBy: [terminal]\n    };\n    charAtlasCache.push(newEntry);\n    return newEntry.atlas;\n}\nexports.acquireCharAtlas = acquireCharAtlas;\nfunction removeTerminalFromCache(terminal) {\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var index = charAtlasCache[i].ownedBy.indexOf(terminal);\n        if (index !== -1) {\n            if (charAtlasCache[i].ownedBy.length === 1) {\n                charAtlasCache[i].atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                charAtlasCache[i].ownedBy.splice(index, 1);\n            }\n            break;\n        }\n    }\n}\nexports.removeTerminalFromCache = removeTerminalFromCache;\n//# sourceMappingURL=CharAtlasCache.js.map\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Platform_1 = __webpack_require__(4);\nvar Types_1 = __webpack_require__(3);\nfunction generateStaticCharAtlasTexture(context, canvasFactory, config) {\n    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);\n    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });\n    ctx.fillStyle = config.colors.background.css;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    ctx.fillStyle = config.colors.foreground.css;\n    ctx.font = getFont(config.fontWeight, config);\n    ctx.textBaseline = 'middle';\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight / 2);\n        ctx.restore();\n    }\n    ctx.save();\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight * 1.5);\n        ctx.restore();\n    }\n    ctx.restore();\n    ctx.font = getFont(config.fontWeight, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2 + 16) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.restore();\n    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {\n        return canvas;\n    }\n    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    clearColor(charAtlasImageData, config.colors.background);\n    return context.createImageBitmap(charAtlasImageData);\n}\nexports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;\nfunction clearColor(imageData, color) {\n    var isEmpty = true;\n    var r = color.rgba >>> 24;\n    var g = color.rgba >>> 16 & 0xFF;\n    var b = color.rgba >>> 8 & 0xFF;\n    for (var offset = 0; offset < imageData.data.length; offset += 4) {\n        if (imageData.data[offset] === r &&\n            imageData.data[offset + 1] === g &&\n            imageData.data[offset + 2] === b) {\n            imageData.data[offset + 3] = 0;\n        }\n        else {\n            isEmpty = false;\n        }\n    }\n    return isEmpty;\n}\nexports.clearColor = clearColor;\nfunction getFont(fontWeight, config) {\n    return fontWeight + \" \" + config.fontSize * config.devicePixelRatio + \"px \" + config.fontFamily;\n}\n//# sourceMappingURL=CharAtlasGenerator.js.map\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_FOREGROUND = fromHex('#ffffff');\nvar DEFAULT_BACKGROUND = fromHex('#000000');\nvar DEFAULT_CURSOR = fromHex('#ffffff');\nvar DEFAULT_CURSOR_ACCENT = fromHex('#000000');\nvar DEFAULT_SELECTION = {\n    css: 'rgba(255, 255, 255, 0.3)',\n    rgba: 0xFFFFFF77\n};\nexports.DEFAULT_ANSI_COLORS = (function () {\n    var colors = [\n        fromHex('#2e3436'),\n        fromHex('#cc0000'),\n        fromHex('#4e9a06'),\n        fromHex('#c4a000'),\n        fromHex('#3465a4'),\n        fromHex('#75507b'),\n        fromHex('#06989a'),\n        fromHex('#d3d7cf'),\n        fromHex('#555753'),\n        fromHex('#ef2929'),\n        fromHex('#8ae234'),\n        fromHex('#fce94f'),\n        fromHex('#729fcf'),\n        fromHex('#ad7fa8'),\n        fromHex('#34e2e2'),\n        fromHex('#eeeeec')\n    ];\n    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n    for (var i = 0; i < 216; i++) {\n        var r = v[(i / 36) % 6 | 0];\n        var g = v[(i / 6) % 6 | 0];\n        var b = v[i % 6];\n        colors.push({\n            css: \"#\" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),\n            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0\n        });\n    }\n    for (var i = 0; i < 24; i++) {\n        var c = 8 + i * 10;\n        var ch = toPaddedHex(c);\n        colors.push({\n            css: \"#\" + ch + ch + ch,\n            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0\n        });\n    }\n    return colors;\n})();\nfunction fromHex(css) {\n    return {\n        css: css,\n        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF\n    };\n}\nfunction toPaddedHex(c) {\n    var s = c.toString(16);\n    return s.length < 2 ? '0' + s : s;\n}\nvar ColorManager = (function () {\n    function ColorManager(document, allowTransparency) {\n        this.allowTransparency = allowTransparency;\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get rendering context');\n        }\n        this._ctx = ctx;\n        this._ctx.globalCompositeOperation = 'copy';\n        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n        this.colors = {\n            foreground: DEFAULT_FOREGROUND,\n            background: DEFAULT_BACKGROUND,\n            cursor: DEFAULT_CURSOR,\n            cursorAccent: DEFAULT_CURSOR_ACCENT,\n            selection: DEFAULT_SELECTION,\n            ansi: exports.DEFAULT_ANSI_COLORS.slice()\n        };\n    }\n    ColorManager.prototype.setTheme = function (theme) {\n        if (theme === void 0) { theme = {}; }\n        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);\n        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);\n        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);\n        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);\n        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);\n        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);\n        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);\n        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);\n        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);\n        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);\n        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);\n        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);\n        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);\n        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);\n        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);\n        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);\n    };\n    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {\n        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }\n        if (css === undefined) {\n            return fallback;\n        }\n        this._ctx.fillStyle = this._litmusColor;\n        this._ctx.fillStyle = css;\n        if (typeof this._ctx.fillStyle !== 'string') {\n            console.warn(\"Color: \" + css + \" is invalid using fallback \" + fallback.css);\n            return fallback;\n        }\n        this._ctx.fillRect(0, 0, 1, 1);\n        var data = this._ctx.getImageData(0, 0, 1, 1).data;\n        if (!allowTransparency && data[3] !== 0xFF) {\n            console.warn(\"Color: \" + css + \" is using transparency, but allowTransparency is false. \" +\n                (\"Using fallback \" + fallback.css + \".\"));\n            return fallback;\n        }\n        return {\n            css: css,\n            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0\n        };\n    };\n    return ColorManager;\n}());\nexports.ColorManager = ColorManager;\n//# sourceMappingURL=ColorManager.js.map\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer = (function () {\n    function RenderDebouncer(_renderCallback) {\n        this._renderCallback = _renderCallback;\n    }\n    RenderDebouncer.prototype.dispose = function () {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = undefined;\n        }\n    };\n    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {\n        var _this = this;\n        this._rowCount = rowCount;\n        rowStart = rowStart !== undefined ? rowStart : 0;\n        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n        if (this._animationFrame) {\n            return;\n        }\n        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });\n    };\n    RenderDebouncer.prototype._innerRefresh = function () {\n        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n            return;\n        }\n        this._rowStart = Math.max(this._rowStart, 0);\n        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);\n        this._renderCallback(this._rowStart, this._rowEnd);\n        this._rowStart = undefined;\n        this._rowEnd = undefined;\n        this._animationFrame = undefined;\n    };\n    return RenderDebouncer;\n}());\nexports.RenderDebouncer = RenderDebouncer;\n//# sourceMappingURL=RenderDebouncer.js.map\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = __webpack_require__(0);\nvar ScreenDprMonitor = (function (_super) {\n    __extends(ScreenDprMonitor, _super);\n    function ScreenDprMonitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._currentDevicePixelRatio = window.devicePixelRatio;\n        return _this;\n    }\n    ScreenDprMonitor.prototype.setListener = function (listener) {\n        var _this = this;\n        if (this._listener) {\n            this.clearListener();\n        }\n        this._listener = listener;\n        this._outerListener = function () {\n            if (!_this._listener) {\n                return;\n            }\n            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);\n            _this._updateDpr();\n        };\n        this._updateDpr();\n    };\n    ScreenDprMonitor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.clearListener();\n    };\n    ScreenDprMonitor.prototype._updateDpr = function () {\n        if (!this._resolutionMediaMatchList || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._currentDevicePixelRatio = window.devicePixelRatio;\n        this._resolutionMediaMatchList = window.matchMedia(\"screen and (resolution: \" + window.devicePixelRatio + \"dppx)\");\n        this._resolutionMediaMatchList.addListener(this._outerListener);\n    };\n    ScreenDprMonitor.prototype.clearListener = function () {\n        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._resolutionMediaMatchList = undefined;\n        this._listener = undefined;\n        this._outerListener = undefined;\n    };\n    return ScreenDprMonitor;\n}(Lifecycle_1.Disposable));\nexports.ScreenDprMonitor = ScreenDprMonitor;\n//# sourceMappingURL=ScreenDprMonitor.js.map\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n;\n;\n;\nvar isWebSocket = function (constructor) {\n    return constructor && constructor.CLOSING === 2;\n};\nvar isGlobalWebSocket = function () {\n    return typeof WebSocket !== 'undefined' && isWebSocket(WebSocket);\n};\nvar getDefaultOptions = function () { return ({\n    constructor: isGlobalWebSocket() ? WebSocket : null,\n    maxReconnectionDelay: 10000,\n    minReconnectionDelay: 1500,\n    reconnectionDelayGrowFactor: 1.3,\n    connectionTimeout: 4000,\n    maxRetries: Infinity,\n    debug: false,\n}); };\nvar bypassProperty = function (src, dst, name) {\n    Object.defineProperty(dst, name, {\n        get: function () { return src[name]; },\n        set: function (value) { src[name] = value; },\n        enumerable: true,\n        configurable: true,\n    });\n};\nvar initReconnectionDelay = function (config) {\n    return (config.minReconnectionDelay + Math.random() * config.minReconnectionDelay);\n};\nvar updateReconnectionDelay = function (config, previousDelay) {\n    var newDelay = previousDelay * config.reconnectionDelayGrowFactor;\n    return (newDelay > config.maxReconnectionDelay)\n        ? config.maxReconnectionDelay\n        : newDelay;\n};\nvar LEVEL_0_EVENTS = ['onopen', 'onclose', 'onmessage', 'onerror'];\nvar reassignEventListeners = function (ws, oldWs, listeners) {\n    Object.keys(listeners).forEach(function (type) {\n        listeners[type].forEach(function (_a) {\n            var listener = _a[0], options = _a[1];\n            ws.addEventListener(type, listener, options);\n        });\n    });\n    if (oldWs) {\n        LEVEL_0_EVENTS.forEach(function (name) {\n            ws[name] = oldWs[name];\n        });\n    }\n};\nvar ReconnectingWebsocket = function (url, protocols, options) {\n    var _this = this;\n    if (options === void 0) { options = {}; }\n    var ws;\n    var connectingTimeout;\n    var reconnectDelay = 0;\n    var retriesCount = 0;\n    var shouldRetry = true;\n    var savedOnClose = null;\n    var listeners = {};\n    // require new to construct\n    if (!(this instanceof ReconnectingWebsocket)) {\n        throw new TypeError(\"Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator\");\n    }\n    // Set config. Not using `Object.assign` because of IE11\n    var config = getDefaultOptions();\n    Object.keys(config)\n        .filter(function (key) { return options.hasOwnProperty(key); })\n        .forEach(function (key) { return config[key] = options[key]; });\n    if (!isWebSocket(config.constructor)) {\n        throw new TypeError('Invalid WebSocket constructor. Set `options.constructor`');\n    }\n    var log = config.debug ? function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return console.log.apply(console, ['RWS:'].concat(params));\n    } : function () { };\n    /**\n     * Not using dispatchEvent, otherwise we must use a DOM Event object\n     * Deferred because we want to handle the close event before this\n     */\n    var emitError = function (code, msg) { return setTimeout(function () {\n        var err = new Error(msg);\n        err.code = code;\n        if (Array.isArray(listeners.error)) {\n            listeners.error.forEach(function (_a) {\n                var fn = _a[0];\n                return fn(err);\n            });\n        }\n        if (ws.onerror) {\n            ws.onerror(err);\n        }\n    }, 0); };\n    var handleClose = function () {\n        log('handleClose', { shouldRetry: shouldRetry });\n        retriesCount++;\n        log('retries count:', retriesCount);\n        if (retriesCount > config.maxRetries) {\n            emitError('EHOSTDOWN', 'Too many failed connection attempts');\n            return;\n        }\n        if (!reconnectDelay) {\n            reconnectDelay = initReconnectionDelay(config);\n        }\n        else {\n            reconnectDelay = updateReconnectionDelay(config, reconnectDelay);\n        }\n        log('handleClose - reconnectDelay:', reconnectDelay);\n        if (shouldRetry) {\n            setTimeout(connect, reconnectDelay);\n        }\n    };\n    var connect = function () {\n        if (!shouldRetry) {\n            return;\n        }\n        log('connect');\n        var oldWs = ws;\n        var wsUrl = (typeof url === 'function') ? url() : url;\n        ws = new config.constructor(wsUrl, protocols);\n        connectingTimeout = setTimeout(function () {\n            log('timeout');\n            ws.close();\n            emitError('ETIMEDOUT', 'Connection timeout');\n        }, config.connectionTimeout);\n        log('bypass properties');\n        for (var key in ws) {\n            // @todo move to constant\n            if (['addEventListener', 'removeEventListener', 'close', 'send'].indexOf(key) < 0) {\n                bypassProperty(ws, _this, key);\n            }\n        }\n        ws.addEventListener('open', function () {\n            clearTimeout(connectingTimeout);\n            log('open');\n            reconnectDelay = initReconnectionDelay(config);\n            log('reconnectDelay:', reconnectDelay);\n            retriesCount = 0;\n        });\n        ws.addEventListener('close', handleClose);\n        reassignEventListeners(ws, oldWs, listeners);\n        // because when closing with fastClose=true, it is saved and set to null to avoid double calls\n        ws.onclose = ws.onclose || savedOnClose;\n        savedOnClose = null;\n    };\n    log('init');\n    connect();\n    this.close = function (code, reason, _a) {\n        if (code === void 0) { code = 1000; }\n        if (reason === void 0) { reason = ''; }\n        var _b = _a === void 0 ? {} : _a, _c = _b.keepClosed, keepClosed = _c === void 0 ? false : _c, _d = _b.fastClose, fastClose = _d === void 0 ? true : _d, _e = _b.delay, delay = _e === void 0 ? 0 : _e;\n        log('close - params:', { reason: reason, keepClosed: keepClosed, fastClose: fastClose, delay: delay, retriesCount: retriesCount, maxRetries: config.maxRetries });\n        shouldRetry = !keepClosed && retriesCount <= config.maxRetries;\n        if (delay) {\n            reconnectDelay = delay;\n        }\n        ws.close(code, reason);\n        if (fastClose) {\n            var fakeCloseEvent_1 = {\n                code: code,\n                reason: reason,\n                wasClean: true,\n            };\n            // execute close listeners soon with a fake closeEvent\n            // and remove them from the WS instance so they\n            // don't get fired on the real close.\n            handleClose();\n            ws.removeEventListener('close', handleClose);\n            // run and remove level2\n            if (Array.isArray(listeners.close)) {\n                listeners.close.forEach(function (_a) {\n                    var listener = _a[0], options = _a[1];\n                    listener(fakeCloseEvent_1);\n                    ws.removeEventListener('close', listener, options);\n                });\n            }\n            // run and remove level0\n            if (ws.onclose) {\n                savedOnClose = ws.onclose;\n                ws.onclose(fakeCloseEvent_1);\n                ws.onclose = null;\n            }\n        }\n    };\n    this.send = function (data) {\n        ws.send(data);\n    };\n    this.addEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            if (!listeners[type].some(function (_a) {\n                var l = _a[0];\n                return l === listener;\n            })) {\n                listeners[type].push([listener, options]);\n            }\n        }\n        else {\n            listeners[type] = [[listener, options]];\n        }\n        ws.addEventListener(type, listener, options);\n    };\n    this.removeEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            listeners[type] = listeners[type].filter(function (_a) {\n                var l = _a[0];\n                return l !== listener;\n            });\n        }\n        ws.removeEventListener(type, listener, options);\n    };\n};\nmodule.exports = ReconnectingWebsocket;\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(30);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(32)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../css-loader/index.js!./xterm.css\", function() {\n\t\t\tvar newContent = require(\"!!../../css-loader/index.js!./xterm.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * EventEmitter v5.2.6 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - https://oli.me.uk/\n * @preserve\n */\n\n;(function (exports) {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    function isValidListener (listener) {\n        if (typeof listener === 'function' || listener instanceof RegExp) {\n            return true\n        } else if (listener && typeof listener === 'object') {\n            return isValidListener(listener.listener)\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        if (!isValidListener(listener)) {\n            throw new TypeError('listener must be a function');\n        }\n\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0; i < listeners.length; i++) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n            return EventEmitter;\n        }.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}(typeof window !== 'undefined' ? window : this || {}));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction proposeGeometry(term) {\n    if (!term.element.parentElement) {\n        return null;\n    }\n    var parentElementStyle = window.getComputedStyle(term.element.parentElement);\n    var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    var elementStyle = window.getComputedStyle(term.element);\n    var elementPadding = {\n        top: parseInt(elementStyle.getPropertyValue('padding-top')),\n        bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n        right: parseInt(elementStyle.getPropertyValue('padding-right')),\n        left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    var elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    var elementPaddingHor = elementPadding.right + elementPadding.left;\n    var availableHeight = parentElementHeight - elementPaddingVer;\n    var availableWidth = parentElementWidth - elementPaddingHor - term._core.viewport.scrollBarWidth;\n    var geometry = {\n        cols: Math.floor(availableWidth / term._core._renderCoordinator.dimensions.actualCellWidth),\n        rows: Math.floor(availableHeight / term._core._renderCoordinator.dimensions.actualCellHeight)\n    };\n    return geometry;\n}\nexports.proposeGeometry = proposeGeometry;\nfunction fit(term) {\n    var geometry = proposeGeometry(term);\n    if (geometry) {\n        if (term.rows !== geometry.rows || term.cols !== geometry.cols) {\n            term._core._renderCoordinator.clear();\n            term.resize(geometry.cols, geometry.rows);\n        }\n    }\n}\nexports.fit = fit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.proposeGeometry = function () {\n        return proposeGeometry(this);\n    };\n    terminalConstructor.prototype.fit = function () {\n        fit(this);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=fit.js.map\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = __webpack_require__(45);\nvar Strings = __webpack_require__(9);\nvar AddonManager_1 = __webpack_require__(56);\nvar Terminal = (function () {\n    function Terminal(options) {\n        this._core = new Terminal_1.Terminal(options);\n        this._addonManager = new AddonManager_1.AddonManager();\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._core.onCursorMove; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._core.onLineFeed; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._core.onSelectionChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._core.onData; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._core.onTitleChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._core.onScroll; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._core.onKey; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._core.onRender; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._core.onResize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"element\", {\n        get: function () { return this._core.element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"textarea\", {\n        get: function () { return this._core.textarea; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"rows\", {\n        get: function () { return this._core.rows; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"cols\", {\n        get: function () { return this._core.cols; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () { return new BufferApiView(this._core.buffer); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () { return this._core.markers; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.blur = function () {\n        this._core.blur();\n    };\n    Terminal.prototype.focus = function () {\n        this._core.focus();\n    };\n    Terminal.prototype.on = function (type, listener) {\n        this._core.on(type, listener);\n    };\n    Terminal.prototype.off = function (type, listener) {\n        this._core.off(type, listener);\n    };\n    Terminal.prototype.emit = function (type, data) {\n        this._core.emit(type, data);\n    };\n    Terminal.prototype.addDisposableListener = function (type, handler) {\n        return this._core.addDisposableListener(type, handler);\n    };\n    Terminal.prototype.resize = function (columns, rows) {\n        this._core.resize(columns, rows);\n    };\n    Terminal.prototype.writeln = function (data) {\n        this._core.writeln(data);\n    };\n    Terminal.prototype.open = function (parent) {\n        this._core.open(parent);\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._core.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._core.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        return this._core.registerLinkMatcher(regex, handler, options);\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        this._core.deregisterLinkMatcher(matcherId);\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        return this._core.registerCharacterJoiner(handler);\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        this._core.deregisterCharacterJoiner(joinerId);\n    };\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        return this._core.addMarker(cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this._core.hasSelection();\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this._core.select(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this._core.getSelection();\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        return this._core.getSelectionPosition();\n    };\n    Terminal.prototype.clearSelection = function () {\n        this._core.clearSelection();\n    };\n    Terminal.prototype.selectAll = function () {\n        this._core.selectAll();\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        this._core.selectLines(start, end);\n    };\n    Terminal.prototype.dispose = function () {\n        this._addonManager.dispose();\n        this._core.dispose();\n    };\n    Terminal.prototype.destroy = function () {\n        this._core.destroy();\n    };\n    Terminal.prototype.scrollLines = function (amount) {\n        this._core.scrollLines(amount);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this._core.scrollPages(pageCount);\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this._core.scrollToTop();\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this._core.scrollToBottom();\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        this._core.scrollToLine(line);\n    };\n    Terminal.prototype.clear = function () {\n        this._core.clear();\n    };\n    Terminal.prototype.write = function (data) {\n        this._core.write(data);\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        this._core.writeUtf8(data);\n    };\n    Terminal.prototype.getOption = function (key) {\n        return this._core.getOption(key);\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        this._core.setOption(key, value);\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        this._core.refresh(start, end);\n    };\n    Terminal.prototype.reset = function () {\n        this._core.reset();\n    };\n    Terminal.applyAddon = function (addon) {\n        addon.apply(Terminal);\n    };\n    Terminal.prototype.loadAddon = function (addon) {\n        return this._addonManager.loadAddon(this, addon);\n    };\n    Object.defineProperty(Terminal, \"strings\", {\n        get: function () {\n            return Strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nvar BufferApiView = (function () {\n    function BufferApiView(_buffer) {\n        this._buffer = _buffer;\n    }\n    Object.defineProperty(BufferApiView.prototype, \"cursorY\", {\n        get: function () { return this._buffer.y; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"cursorX\", {\n        get: function () { return this._buffer.x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"viewportY\", {\n        get: function () { return this._buffer.ydisp; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"baseY\", {\n        get: function () { return this._buffer.ybase; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"length\", {\n        get: function () { return this._buffer.lines.length; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferApiView.prototype.getLine = function (y) {\n        var line = this._buffer.lines.get(y);\n        if (!line) {\n            return undefined;\n        }\n        return new BufferLineApiView(line);\n    };\n    return BufferApiView;\n}());\nvar BufferLineApiView = (function () {\n    function BufferLineApiView(_line) {\n        this._line = _line;\n    }\n    Object.defineProperty(BufferLineApiView.prototype, \"isWrapped\", {\n        get: function () { return this._line.isWrapped; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferLineApiView.prototype.getCell = function (x) {\n        if (x < 0 || x >= this._line.length) {\n            return undefined;\n        }\n        return new BufferCellApiView(this._line, x);\n    };\n    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {\n        return this._line.translateToString(trimRight, startColumn, endColumn);\n    };\n    return BufferLineApiView;\n}());\nvar BufferCellApiView = (function () {\n    function BufferCellApiView(_line, _x) {\n        this._line = _line;\n        this._x = _x;\n    }\n    Object.defineProperty(BufferCellApiView.prototype, \"char\", {\n        get: function () { return this._line.getString(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferCellApiView.prototype, \"width\", {\n        get: function () { return this._line.getWidth(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    return BufferCellApiView;\n}());\n//# sourceMappingURL=Terminal.js.map\n\n/***/ }),\n/* 29 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_xterm__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_xterm___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_xterm__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_xterm_lib_addons_fit_fit__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_xterm_lib_addons_fit_fit___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_xterm_lib_addons_fit_fit__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_reconnecting_websocket__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_reconnecting_websocket___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_reconnecting_websocket__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_xterm_dist_xterm_css__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_xterm_dist_xterm_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_xterm_dist_xterm_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_wolfy87_eventemitter__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_wolfy87_eventemitter___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_wolfy87_eventemitter__);\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_xterm__[\"Terminal\"].applyAddon(__WEBPACK_IMPORTED_MODULE_1_xterm_lib_addons_fit_fit__);  // Apply the `fit` addon\n\n(function (window) {\n\n  'use strict';\n\n\n  // Private functions\n\n  function injectScript(src, cb) {\n    var sj = document.createElement('script');\n    sj.type = 'text/javascript';\n    sj.async = true;\n    sj.src = src;\n    sj.addEventListener ? sj.addEventListener('load', cb, false) : sj.attachEvent('onload', cb);\n    var s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(sj, s);\n  }\n\n\n  // Process recaptcha input and inits SDK\n  var verifyCallback = function(response) {\n    var self = this;\n    var data = encodeURIComponent('g-recaptcha-response') + '=' + encodeURIComponent(response);\n    data += '&' + encodeURIComponent('session-duration') + '=' + encodeURIComponent('60m');\n  };\n\n  // register Recaptcha global onload callback\n  window.onloadCallback = function() {\n    //Register captcha only on the first term to avoid showing multiple times\n    verifyCallback.call(window.pwd);\n  }\n\n  function registerInputHandlers(termName, instance) {\n    var self = this;\n    // Attach block actions\n    var actions = document.querySelectorAll('code[class*=\"'+termName+'\"]');\n    for (var n=0; n < actions.length; ++n) {\n      actions[n].onclick = function() {\n\tself.socket.emit('instance terminal in', instance.name, this.innerText);\n        /* Prompt support\n\tvar lines = this.innerText.split(\"\\n\");\n        for (var i = 0; i < lines.length; i ++) {\n          var line = lines[i];\n          // if line starts with\n          if (line.startsWith(\"$\")) {\n            self.socket.emit('instance terminal in', instance.name, line.replace('$','')+'\\n');\n          }\n        }\n\t*/\n      };\n    }\n  }\n\n  function registerPortHandlers(termName, instance) {\n    var self = this;\n    // Attach block actions\n    var actions = document.querySelectorAll('[data-term*=\"'+termName+'\"]');\n    for (var n=0; n < actions.length; ++n) {\n      var anchor = actions[n];\n      var port = anchor.getAttribute(\"data-port\");\n      var protocol = anchor.getAttribute(\"data-protocol\") || 'http:';\n      var link;\n      if (port) {\n        link = protocol + '//'+ instance.proxy_host + '-' + port + '.direct.' + self.opts.baseUrl.split('/')[2] + anchor.attributes.href.value;\n      }\n      var openFn = function(link) {\n        return function(evt) {\n          evt.preventDefault();\n          if (link) {\n            window.open(link, '_blank');\n          }\n        };\n      }\n      anchor.onclick = openFn(link);\n      anchor.onauxclick = openFn(link);\n      anchor.oncontextmenu = function(evt) {\n        if (link) {\n          this.setAttribute(\"href\", link);\n        }\n      };\n    }\n  }\n\n\n  // PWD instance\n  var pwd = function () {\n    this.instances = {};\n    this.instanceBuffer = {};\n    return;\n  };\n\n\n  pwd.prototype = Object.create(__WEBPACK_IMPORTED_MODULE_4_wolfy87_eventemitter___default.a.prototype)\n  pwd.prototype.constructor = pwd;\n\n\n  function setOpts(opts) {\n    var opts = opts || {};\n    this.opts = opts;\n    this.opts.baseUrl = this.opts.baseUrl || 'https://labs.play-with-docker.com';\n    this.opts.ports = this.opts.ports || [];\n    this.opts.ImageName = this.opts.ImageName || '';\n    this.opts.oauthProvider = this.opts.oauthProvider || 'docker';\n  }\n\n  pwd.prototype.login = function(cb) {\n    var self = this;\n    var width = screen.width*0.6;\n    var height = screen.height*0.6;\n    var x = screen.width/2 - width/2;\n    var y = screen.height/2 - height/2;\n\n    // display login btn in 1st terminal only\n    var term = window.pwd.terms[0];\n    var els = document.querySelectorAll(term.selector);\n    var loginBtn = document.createElement(\"input\");\n    loginBtn.type = 'button';\n    loginBtn.value = 'Log-in to access';\n    loginBtn.className = 'btn btn-lg btn-primary'\n    loginBtn.onclick = function() {\n      window.open(self.opts.baseUrl + '/oauth/providers/' + self.opts.oauthProvider + '/login', 'PWDLogin', 'width='+width+',height='+height+',left='+x+',top='+y);\n      var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n      var eventer = window[eventMethod];\n      var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n      // Listen to message from child window\n      eventer(messageEvent,function(e) {\n        if (e.data === 'done') {\n          els[0].removeChild(loginBtn);\n          cb();\n        }\n      }, false);\n    };\n    els[0].appendChild(loginBtn);\n  }\n\n  pwd.prototype.createSession = function(cb) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: this.opts.baseUrl + '/',\n      opts: {headers:{'Content-type':'application/x-www-form-urlencoded'}},\n      data: encodeURIComponent('session-duration') + '=' + encodeURIComponent('90m')\n    }, function(resp) {\n      //TODO handle errors\n      if (resp.status == 200) {\n        self.emitEvent('init')\n        var sessionData = JSON.parse(resp.responseText);\n        // fetch current scheme from opts to use in the new session hostname\n        self.opts.baseUrl = self.opts.baseUrl.split('/')[0] + '//' + sessionData.hostname;\n        self.init(sessionData.session_id, self.opts, function() {\n          self.terms.forEach(function(term) {\n\n            // Create terminals only for those elements that exist at least once in the DOM\n            if (document.querySelector(term.selector)) {\n              self.terminal(term);\n            }\n          });\n          cb();\n        });\n      } else if (resp.status == 403) {\n        //TODO login should return error and handle it\n        self.login(function() {\n          self.createSession(cb)\n        });\n      };\n    });\n  }\n\n  pwd.prototype.closeSession = function(callback) {\n    if (this.sessionId) {\n      sendRequest({\n        method: 'DELETE',\n        url: this.opts.baseUrl + '/sessions/' + this.sessionId,\n        opts: {headers:{'Content-type':'application/json'}},\n        sync: true\n      }, function(response) {\n        if (response.status == 200) {\n          callback();\n        } else {\n          callback(new Error(\"Error deleting session\"));\n        }\n      });\n    }\n  }\n\n  pwd.prototype.getUserInfo = function(callback) {\n    sendRequest({\n      method: 'GET',\n      url: this.opts.baseUrl + '/users/me',\n      opts: {headers:{'Content-type':'application/json'}}\n    }, function(response) {\n      if (response.status == 200) {\n        var u = JSON.parse(response.responseText);\n        callback(u);\n      } else {\n        callback(undefined);\n      }\n    });\n  }\n\n  pwd.prototype.newSession = function(terms, opts, callback) {\n    var self = this;\n    setOpts.call(this, opts);\n    terms = terms || [];\n    if (terms.length > 0) {\n      this.terms = terms;\n      this.createSession(function(err) {\n          if (err) {\n            console.warn('Could not create session');\n          }\n          !callback || callback();\n      });\n    } else {\n      console.warn('No terms specified, nothing to do.');\n    }\n  };\n\n  // your sdk init function\n  pwd.prototype.init = function (sessionId, opts, callback) {\n    var self = this;\n    setOpts.call(this, opts);\n    this.sessionId = sessionId;\n    var l = document.createElement(\"a\");\n    l.href = this.opts.baseUrl;\n\t\tthis.socket = new __WEBPACK_IMPORTED_MODULE_2_reconnecting_websocket___default.a((l.protocol === 'http:' ? 'ws://' : 'wss://') + l.host + '/sessions/' + sessionId + '/ws/' );\n\t\tthis.socket.listeners = {};\n\n\t\tthis.socket.on = function(name, cb) {\n\t\t\tif (!self.socket.listeners[name]) {\n\t\t\t\tself.socket.listeners[name] = [];\n\t\t\t}\n\t\t\tself.socket.listeners[name].push(cb);\n\t\t}\n\t  this.socket.emit = function() {\n\t\t\tvar name = arguments[0]\n\t\t\tvar args = [];\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\targs.push(arguments[i]);\n\t\t\t}\n\t\t\tself.socket.send(JSON.stringify({name: name, args: args}));\n\t\t}\n\n\t\tthis.socket.addEventListener('message', function (event) {\n\t\t\tvar m = JSON.parse(event.data);\n\t\t\tvar ls = self.socket.listeners[m.name];\n\t\t\tif (ls) {\n\t\t\t\tfor (var i=0; i<ls.length; i++) {\n\t\t\t\t\tvar l = ls[i];\n\t\t\t\t\tl.apply(l, m.args);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n    this.socket.on('instance terminal out', function(name ,data) {\n      var instance = self.instances[name];\n      if (instance && instance.terms) {\n        instance.terms.forEach(function(term) {term.write(data)});\n      } else {\n        //Buffer the data if term is not ready\n        if (self.instanceBuffer[name] == undefined) self.instanceBuffer[name] = '';\n        self.instanceBuffer[name] += data;\n      }\n    });\n\n    // Resize all terminals\n    this.socket.on('instance viewport resize', function(cols, rows) {\n      // Resize all terminals\n      for (var name in self.instances) {\n        self.instances[name].terms.forEach(function(term){\n          term.resize(cols,rows);\n        });\n      };\n    });\n\n    // Handle window resizing\n    window.onresize = function() {\n      self.resize();\n    };\n\n    sendRequest({\n      method: 'GET',\n      url: this.opts.baseUrl + '/sessions/' + sessionId,\n    }, function(response) {\n      var session = JSON.parse(response.responseText);\n      for (var name in session.instances) {\n        var i = session.instances[name];\n        // Setup empty terms\n        i.terms = [];\n        self.instances[name] = i;\n      }\n      !callback || callback();\n    });\n  };\n\n\n  pwd.prototype.resize = function() {\n    var name = Object.keys(this.instances)[0]\n    for (var n in this.instances) {\n      // there might be some instances without terminals\n      if (this.instances[n].terms) {\n        for (var i = 0; i < this.instances[n].terms.length; i ++) {\n          var term = this.instances[n].terms[i];\n          var size = term.proposeGeometry();\n          if (size.cols && size.rows) {\n            return this.socket.emit('instance viewport resize', size.cols, size.rows);\n          }\n        }\n      }\n    }\n  };\n\n\n  // I know, opts and data can be ommited. I'm not a JS developer =(\n  // Data needs to be sent encoded appropriately\n  function sendRequest(req, callback) {\n    var request = new XMLHttpRequest();\n    var asyncReq = !req.sync\n    request.open(req.method, req.url, asyncReq);\n\n    if (req.opts && req.opts.headers) {\n      for (var key in req.opts.headers) {\n        request.setRequestHeader(key, req.opts.headers[key]);\n      }\n    }\n    request.withCredentials = true;\n    request.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n    request.onload = function() {\n      callback(request);\n    };\n    if (typeof(req.data) === 'object' && req.data.constructor.name != 'FormData') {\n      request.send(JSON.stringify(req.data));\n    } else {\n      request.send(req.data);\n    }\n  };\n\n  pwd.prototype.createInstance = function(opts, callback) {\n    var self = this;\n    opts.ImageName = opts.ImageName || self.opts.ImageName;\n    //TODO handle http connection errors\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/instances',\n      opts: {headers:{'Content-type':'application/json'}},\n      data: opts\n    }, function(response) {\n      if (response.status == 200) {\n        var i = JSON.parse(response.responseText);\n        i.terms = [];\n        self.instances[i.name] = i;\n        callback(undefined, i);\n      } else if (response.status == 409) {\n        var err = new Error();\n        err.max = true;\n        callback(err);\n      } else {\n        callback(new Error());\n      }\n    });\n  }\n\n  pwd.prototype.upload = function(name, data, callback) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/instances/' + name + '/uploads',\n      opts: {},\n      data: data\n    }, function(response) {\n      if (response.status == 200) {\n        if (callback) {\n            callback(undefined);\n        }\n      } else {\n        if (callback) {\n            callback(new Error());\n        }\n      }\n    });\n  }\n\n\n  pwd.prototype.setup = function(data, callback) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/setup',\n      opts: {headers:{'Content-type':'application/json'}},\n      data: data\n    }, function(response) {\n      if (response.status == 200) {\n        if (callback) {\n            callback(undefined);\n        }\n      } else {\n        if (callback) {\n            callback(new Error());\n        }\n      }\n    });\n  }\n\n  pwd.prototype.exec = function(name, data, callback) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/instances/' + name + '/exec',\n      opts: {headers:{'Content-type':'application/json'}},\n      data: {command: data}\n    }, function(response) {\n      if (response.status == 200) {\n        if (callback) {\n            callback(undefined);\n        }\n      } else {\n        if (callback) {\n            callback(new Error());\n        }\n      }\n    });\n  }\n\n  pwd.prototype.createTerminal = function(term, name) {\n    var self = this;\n    var i = this.instances[name];\n    term.name = term.name || term.selector;\n\n    var elements = document.querySelectorAll(term.selector);\n    for (var n=0; n < elements.length; ++n) {\n      var t = new __WEBPACK_IMPORTED_MODULE_0_xterm__[\"Terminal\"]({cursorBlink: false});\n      t.open(elements[n], {focus: true});\n      t.on('data', function(d) {\n        self.socket.emit('instance terminal in', i.name, d);\n      });\n\n      if (!i.terms) {\n        i.terms = [];\n      }\n      i.terms.push(t);\n      self.resize();\n    }\n\n\n    registerPortHandlers.call(self, term.selector, i)\n\n    registerInputHandlers.call(self, term.selector, i);\n\n    if (self.instanceBuffer[name]) {\n      //Flush buffer and clear it\n      i.terms.forEach(function(term){\n        term.write(self.instanceBuffer[name]);\n      });\n      self.instanceBuffer[name] = '';\n    }\n\n    return i.terms;\n  }\n\n  pwd.prototype.terminal = function(term, callback) {\n    var self = this;\n    var hostname = \"node\" + (this.terms.indexOf(term) + 1);\n    this.createInstance({type: term.type, Hostname: hostname}, function(err, instance) {\n      if (err && err.max) {\n        !callback || callback(new Error(\"Max instances reached\"))\n        return\n      } else if (err) {\n        !callback || callback(new Error(\"Error creating instance\"))\n        return\n      }\n\n      self.createTerminal(term, instance.name);\n\n\n      !callback || callback(undefined, instance);\n\n    });\n  }\n\n\n\n  // define your namespace myApp\n  window.pwd = new pwd();\n\n})(window, undefined);\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(31)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"/**\\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\\n * https://github.com/chjj/term.js\\n * @license MIT\\n *\\n * Permission is hereby granted, free of charge, to any person obtaining a copy\\n * of this software and associated documentation files (the \\\"Software\\\"), to deal\\n * in the Software without restriction, including without limitation the rights\\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\n * copies of the Software, and to permit persons to whom the Software is\\n * furnished to do so, subject to the following conditions:\\n *\\n * The above copyright notice and this permission notice shall be included in\\n * all copies or substantial portions of the Software.\\n *\\n * THE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\\n * THE SOFTWARE.\\n *\\n * Originally forked from (with the author's permission):\\n *   Fabrice Bellard's javascript vt100 for jslinux:\\n *   http://bellard.org/jslinux/\\n *   Copyright (c) 2011 Fabrice Bellard\\n *   The original design remains. The terminal itself\\n *   has been extended to include xterm CSI codes, among\\n *   other features.\\n */\\n\\n/**\\n *  Default styles for xterm.js\\n */\\n\\n.xterm {\\n    font-feature-settings: \\\"liga\\\" 0;\\n    position: relative;\\n    user-select: none;\\n    -ms-user-select: none;\\n    -webkit-user-select: none;\\n}\\n\\n.xterm.focus,\\n.xterm:focus {\\n    outline: none;\\n}\\n\\n.xterm .xterm-helpers {\\n    position: absolute;\\n    top: 0;\\n    /**\\n     * The z-index of the helpers must be higher than the canvases in order for\\n     * IMEs to appear on top.\\n     */\\n    z-index: 10;\\n}\\n\\n.xterm .xterm-helper-textarea {\\n    /*\\n     * HACK: to fix IE's blinking cursor\\n     * Move textarea out of the screen to the far left, so that the cursor is not visible.\\n     */\\n    position: absolute;\\n    opacity: 0;\\n    left: -9999em;\\n    top: 0;\\n    width: 0;\\n    height: 0;\\n    z-index: -10;\\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\\n    white-space: nowrap;\\n    overflow: hidden;\\n    resize: none;\\n}\\n\\n.xterm .composition-view {\\n    /* TODO: Composition position got messed up somewhere */\\n    background: #000;\\n    color: #FFF;\\n    display: none;\\n    position: absolute;\\n    white-space: nowrap;\\n    z-index: 1;\\n}\\n\\n.xterm .composition-view.active {\\n    display: block;\\n}\\n\\n.xterm .xterm-viewport {\\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\\n    background-color: #000;\\n    overflow-y: scroll;\\n    cursor: default;\\n    position: absolute;\\n    right: 0;\\n    left: 0;\\n    top: 0;\\n    bottom: 0;\\n}\\n\\n.xterm .xterm-screen {\\n    position: relative;\\n}\\n\\n.xterm .xterm-screen canvas {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n}\\n\\n.xterm .xterm-scroll-area {\\n    visibility: hidden;\\n}\\n\\n.xterm-char-measure-element {\\n    display: inline-block;\\n    visibility: hidden;\\n    position: absolute;\\n    top: 0;\\n    left: -9999em;\\n    line-height: normal;\\n}\\n\\n.xterm {\\n    cursor: text;\\n}\\n\\n.xterm.enable-mouse-events {\\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\\n    cursor: default;\\n}\\n\\n.xterm.xterm-cursor-pointer {\\n    cursor: pointer;\\n}\\n\\n.xterm.column-select.focus {\\n    /* Column selection mode */\\n    cursor: crosshair;\\n}\\n\\n.xterm .xterm-accessibility,\\n.xterm .xterm-message {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    bottom: 0;\\n    right: 0;\\n    z-index: 100;\\n    color: transparent;\\n}\\n\\n.xterm .live-region {\\n    position: absolute;\\n    left: -9999px;\\n    width: 1px;\\n    height: 1px;\\n    overflow: hidden;\\n}\\n\\n.xterm-dim {\\n    opacity: 0.5;\\n}\\n\\n.xterm-underline {\\n    text-decoration: underline;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(33);\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Strings = __webpack_require__(9);\nvar Platform_1 = __webpack_require__(4);\nvar RenderDebouncer_1 = __webpack_require__(22);\nvar Lifecycle_1 = __webpack_require__(5);\nvar Lifecycle_2 = __webpack_require__(0);\nvar ScreenDprMonitor_1 = __webpack_require__(23);\nvar MAX_ROWS_TO_READ = 20;\nvar AccessibilityManager = (function (_super) {\n    __extends(AccessibilityManager, _super);\n    function AccessibilityManager(_terminal, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._dimensions = _dimensions;\n        _this._liveRegionLineCount = 0;\n        _this._charsToConsume = [];\n        _this._charsToAnnounce = '';\n        _this._accessibilityTreeRoot = document.createElement('div');\n        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add('xterm-accessibility-tree');\n        _this._rowElements = [];\n        for (var i = 0; i < _this._terminal.rows; i++) {\n            _this._rowElements[i] = _this._createAccessibilityTreeNode();\n            _this._rowContainer.appendChild(_this._rowElements[i]);\n        }\n        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };\n        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };\n        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);\n        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);\n        _this._refreshRowsDimensions();\n        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);\n        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._refreshRows();\n        _this._liveRegion = document.createElement('div');\n        _this._liveRegion.classList.add('live-region');\n        _this._liveRegion.setAttribute('aria-live', 'assertive');\n        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);\n        _this.register(_this._renderRowsDebouncer);\n        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));\n        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));\n        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));\n        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\\n'); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));\n        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));\n        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this.register(_this._screenDprMonitor);\n        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });\n        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));\n        return _this;\n    }\n    AccessibilityManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal.element.removeChild(this._accessibilityTreeRoot);\n        this._rowElements.length = 0;\n    };\n    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {\n        var boundaryElement = e.target;\n        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];\n        var posInSet = boundaryElement.getAttribute('aria-posinset');\n        var lastRowPos = position === 0 ? '1' : \"\" + this._terminal.buffer.lines.length;\n        if (posInSet === lastRowPos) {\n            return;\n        }\n        if (e.relatedTarget !== beforeBoundaryElement) {\n            return;\n        }\n        var topBoundaryElement;\n        var bottomBoundaryElement;\n        if (position === 0) {\n            topBoundaryElement = boundaryElement;\n            bottomBoundaryElement = this._rowElements.pop();\n            this._rowContainer.removeChild(bottomBoundaryElement);\n        }\n        else {\n            topBoundaryElement = this._rowElements.shift();\n            bottomBoundaryElement = boundaryElement;\n            this._rowContainer.removeChild(topBoundaryElement);\n        }\n        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n        if (position === 0) {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.unshift(newElement);\n            this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n        }\n        else {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.push(newElement);\n            this._rowContainer.appendChild(newElement);\n        }\n        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._terminal.scrollLines(position === 0 ? -1 : 1);\n        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    AccessibilityManager.prototype._onResize = function (rows) {\n        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n            this._rowElements[i] = this._createAccessibilityTreeNode();\n            this._rowContainer.appendChild(this._rowElements[i]);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {\n        var element = document.createElement('div');\n        element.setAttribute('role', 'listitem');\n        element.tabIndex = -1;\n        this._refreshRowDimensions(element);\n        return element;\n    };\n    AccessibilityManager.prototype._onTab = function (spaceCount) {\n        for (var i = 0; i < spaceCount; i++) {\n            this._onChar(' ');\n        }\n    };\n    AccessibilityManager.prototype._onChar = function (char) {\n        var _this = this;\n        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n            if (this._charsToConsume.length > 0) {\n                var shiftedChar = this._charsToConsume.shift();\n                if (shiftedChar !== char) {\n                    this._charsToAnnounce += char;\n                }\n            }\n            else {\n                this._charsToAnnounce += char;\n            }\n            if (char === '\\n') {\n                this._liveRegionLineCount++;\n                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n                    this._liveRegion.textContent += Strings.tooMuchOutput;\n                }\n            }\n            if (Platform_1.isMac) {\n                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n                    setTimeout(function () {\n                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n                    }, 0);\n                }\n            }\n        }\n    };\n    AccessibilityManager.prototype._clearLiveRegion = function () {\n        this._liveRegion.textContent = '';\n        this._liveRegionLineCount = 0;\n        if (Platform_1.isMac) {\n            if (this._liveRegion.parentNode) {\n                this._accessibilityTreeRoot.removeChild(this._liveRegion);\n            }\n        }\n    };\n    AccessibilityManager.prototype._onKey = function (keyChar) {\n        this._clearLiveRegion();\n        this._charsToConsume.push(keyChar);\n    };\n    AccessibilityManager.prototype._refreshRows = function (start, end) {\n        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    AccessibilityManager.prototype._renderRows = function (start, end) {\n        var buffer = this._terminal.buffer;\n        var setSize = buffer.lines.length.toString();\n        for (var i = start; i <= end; i++) {\n            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n            var posInSet = (buffer.ydisp + i + 1).toString();\n            var element = this._rowElements[i];\n            if (element) {\n                element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;\n                element.setAttribute('aria-posinset', posInSet);\n                element.setAttribute('aria-setsize', setSize);\n            }\n        }\n        this._announceCharacters();\n    };\n    AccessibilityManager.prototype._refreshRowsDimensions = function () {\n        if (!this._dimensions.actualCellHeight) {\n            return;\n        }\n        if (this._rowElements.length !== this._terminal.rows) {\n            this._onResize(this._terminal.rows);\n        }\n        for (var i = 0; i < this._terminal.rows; i++) {\n            this._refreshRowDimensions(this._rowElements[i]);\n        }\n    };\n    AccessibilityManager.prototype.setDimensions = function (dimensions) {\n        this._dimensions = dimensions;\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._refreshRowDimensions = function (element) {\n        element.style.height = this._dimensions.actualCellHeight + \"px\";\n    };\n    AccessibilityManager.prototype._announceCharacters = function () {\n        if (this._charsToAnnounce.length === 0) {\n            return;\n        }\n        this._liveRegion.textContent += this._charsToAnnounce;\n        this._charsToAnnounce = '';\n    };\n    return AccessibilityManager;\n}(Lifecycle_2.Disposable));\nexports.AccessibilityManager = AccessibilityManager;\n//# sourceMappingURL=AccessibilityManager.js.map\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = __webpack_require__(13);\nvar EventEmitter2_1 = __webpack_require__(2);\nvar BufferSet = (function () {\n    function BufferSet(_terminal) {\n        this._terminal = _terminal;\n        this._onBufferActivate = new EventEmitter2_1.EventEmitter2();\n        this._normal = new Buffer_1.Buffer(this._terminal, true);\n        this._normal.fillViewportRows();\n        this._alt = new Buffer_1.Buffer(this._terminal, false);\n        this._activeBuffer = this._normal;\n        this.setupTabStops();\n    }\n    Object.defineProperty(BufferSet.prototype, \"onBufferActivate\", {\n        get: function () { return this._onBufferActivate.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"alt\", {\n        get: function () {\n            return this._alt;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"active\", {\n        get: function () {\n            return this._activeBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"normal\", {\n        get: function () {\n            return this._normal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferSet.prototype.activateNormalBuffer = function () {\n        if (this._activeBuffer === this._normal) {\n            return;\n        }\n        this._normal.x = this._alt.x;\n        this._normal.y = this._alt.y;\n        this._alt.clear();\n        this._activeBuffer = this._normal;\n        this._onBufferActivate.fire({\n            activeBuffer: this._normal,\n            inactiveBuffer: this._alt\n        });\n    };\n    BufferSet.prototype.activateAltBuffer = function (fillAttr) {\n        if (this._activeBuffer === this._alt) {\n            return;\n        }\n        this._alt.fillViewportRows(fillAttr);\n        this._alt.x = this._normal.x;\n        this._alt.y = this._normal.y;\n        this._activeBuffer = this._alt;\n        this._onBufferActivate.fire({\n            activeBuffer: this._alt,\n            inactiveBuffer: this._normal\n        });\n    };\n    BufferSet.prototype.resize = function (newCols, newRows) {\n        this._normal.resize(newCols, newRows);\n        this._alt.resize(newCols, newRows);\n    };\n    BufferSet.prototype.setupTabStops = function (i) {\n        this._normal.setupTabStops(i);\n        this._alt.setupTabStops(i);\n    };\n    return BufferSet;\n}());\nexports.BufferSet = BufferSet;\n//# sourceMappingURL=BufferSet.js.map\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = __webpack_require__(2);\nvar CharMeasure = (function () {\n    function CharMeasure(document, parentElement) {\n        this._onCharSizeChanged = new EventEmitter2_1.EventEmitter2();\n        this._document = document;\n        this._parentElement = parentElement;\n        this._measureElement = this._document.createElement('span');\n        this._measureElement.classList.add('xterm-char-measure-element');\n        this._measureElement.textContent = 'W';\n        this._measureElement.setAttribute('aria-hidden', 'true');\n        this._parentElement.appendChild(this._measureElement);\n    }\n    Object.defineProperty(CharMeasure.prototype, \"onCharSizeChanged\", {\n        get: function () { return this._onCharSizeChanged.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function (options) {\n        this._measureElement.style.fontFamily = options.fontFamily;\n        this._measureElement.style.fontSize = options.fontSize + \"px\";\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        var adjustedHeight = Math.ceil(geometry.height);\n        if (this._width !== geometry.width || this._height !== adjustedHeight) {\n            this._width = geometry.width;\n            this._height = adjustedHeight;\n            this._onCharSizeChanged.fire();\n        }\n    };\n    return CharMeasure;\n}());\nexports.CharMeasure = CharMeasure;\n//# sourceMappingURL=CharMeasure.js.map\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction prepareTextForTerminal(text) {\n    return text.replace(/\\r?\\n/g, '\\r');\n}\nexports.prepareTextForTerminal = prepareTextForTerminal;\nfunction bracketTextForPaste(text, bracketedPasteMode) {\n    if (bracketedPasteMode) {\n        return '\\x1b[200~' + text + '\\x1b[201~';\n    }\n    return text;\n}\nexports.bracketTextForPaste = bracketTextForPaste;\nfunction copyHandler(ev, term, selectionManager) {\n    if (term.browser.isMSIE) {\n        window.clipboardData.setData('Text', selectionManager.selectionText);\n    }\n    else {\n        ev.clipboardData.setData('text/plain', selectionManager.selectionText);\n    }\n    ev.preventDefault();\n}\nexports.copyHandler = copyHandler;\nfunction pasteHandler(ev, term) {\n    ev.stopPropagation();\n    var text;\n    var dispatchPaste = function (text) {\n        text = prepareTextForTerminal(text);\n        text = bracketTextForPaste(text, term.bracketedPasteMode);\n        term.handler(text);\n        term.textarea.value = '';\n        term.emit('paste', text);\n        term.cancel(ev);\n    };\n    if (term.browser.isMSIE) {\n        if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n            dispatchPaste(text);\n        }\n    }\n    else {\n        if (ev.clipboardData) {\n            text = ev.clipboardData.getData('text/plain');\n            dispatchPaste(text);\n        }\n    }\n}\nexports.pasteHandler = pasteHandler;\nfunction moveTextAreaUnderMouseCursor(ev, term) {\n    var pos = term.screenElement.getBoundingClientRect();\n    var left = ev.clientX - pos.left - 10;\n    var top = ev.clientY - pos.top - 10;\n    term.textarea.style.position = 'absolute';\n    term.textarea.style.width = '20px';\n    term.textarea.style.height = '20px';\n    term.textarea.style.left = left + \"px\";\n    term.textarea.style.top = top + \"px\";\n    term.textarea.style.zIndex = '1000';\n    term.textarea.focus();\n    setTimeout(function () {\n        term.textarea.style.position = null;\n        term.textarea.style.width = null;\n        term.textarea.style.height = null;\n        term.textarea.style.left = null;\n        term.textarea.style.top = null;\n        term.textarea.style.zIndex = null;\n    }, 200);\n}\nexports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;\nfunction rightClickHandler(ev, term, selectionManager, shouldSelectWord) {\n    moveTextAreaUnderMouseCursor(ev, term);\n    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {\n        selectionManager.selectWordAtCursor(ev);\n    }\n    term.textarea.value = selectionManager.selectionText;\n    term.textarea.select();\n}\nexports.rightClickHandler = rightClickHandler;\n//# sourceMappingURL=Clipboard.js.map\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CompositionHelper = (function () {\n    function CompositionHelper(_textarea, _compositionView, _terminal) {\n        this._textarea = _textarea;\n        this._compositionView = _compositionView;\n        this._terminal = _terminal;\n        this._isComposing = false;\n        this._isSendingComposition = false;\n        this._compositionPosition = { start: null, end: null };\n    }\n    CompositionHelper.prototype.compositionstart = function () {\n        this._isComposing = true;\n        this._compositionPosition.start = this._textarea.value.length;\n        this._compositionView.textContent = '';\n        this._compositionView.classList.add('active');\n    };\n    CompositionHelper.prototype.compositionupdate = function (ev) {\n        var _this = this;\n        this._compositionView.textContent = ev.data;\n        this.updateCompositionElements();\n        setTimeout(function () {\n            _this._compositionPosition.end = _this._textarea.value.length;\n        }, 0);\n    };\n    CompositionHelper.prototype.compositionend = function () {\n        this._finalizeComposition(true);\n    };\n    CompositionHelper.prototype.keydown = function (ev) {\n        if (this._isComposing || this._isSendingComposition) {\n            if (ev.keyCode === 229) {\n                return false;\n            }\n            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n                return false;\n            }\n            this._finalizeComposition(false);\n        }\n        if (ev.keyCode === 229) {\n            this._handleAnyTextareaChanges();\n            return false;\n        }\n        return true;\n    };\n    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {\n        var _this = this;\n        this._compositionView.classList.remove('active');\n        this._isComposing = false;\n        this._clearTextareaPosition();\n        if (!waitForPropagation) {\n            this._isSendingComposition = false;\n            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n            this._terminal.handler(input);\n        }\n        else {\n            var currentCompositionPosition_1 = {\n                start: this._compositionPosition.start,\n                end: this._compositionPosition.end\n            };\n            this._isSendingComposition = true;\n            setTimeout(function () {\n                if (_this._isSendingComposition) {\n                    _this._isSendingComposition = false;\n                    var input = void 0;\n                    if (_this._isComposing) {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);\n                    }\n                    else {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);\n                    }\n                    _this._terminal.handler(input);\n                }\n            }, 0);\n        }\n    };\n    CompositionHelper.prototype._handleAnyTextareaChanges = function () {\n        var _this = this;\n        var oldValue = this._textarea.value;\n        setTimeout(function () {\n            if (!_this._isComposing) {\n                var newValue = _this._textarea.value;\n                var diff = newValue.replace(oldValue, '');\n                if (diff.length > 0) {\n                    _this._terminal.handler(diff);\n                }\n            }\n        }, 0);\n    };\n    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {\n        var _this = this;\n        if (!this._isComposing) {\n            return;\n        }\n        if (this._terminal.buffer.isCursorInViewport) {\n            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);\n            var cursorTop = this._terminal.buffer.y * cellHeight;\n            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;\n            this._compositionView.style.left = cursorLeft + 'px';\n            this._compositionView.style.top = cursorTop + 'px';\n            this._compositionView.style.height = cellHeight + 'px';\n            this._compositionView.style.lineHeight = cellHeight + 'px';\n            this._compositionView.style.fontFamily = this._terminal.options.fontFamily;\n            this._compositionView.style.fontSize = this._terminal.options.fontSize + 'px';\n            var compositionViewBounds = this._compositionView.getBoundingClientRect();\n            this._textarea.style.left = cursorLeft + 'px';\n            this._textarea.style.top = cursorTop + 'px';\n            this._textarea.style.width = compositionViewBounds.width + 'px';\n            this._textarea.style.height = compositionViewBounds.height + 'px';\n            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n        }\n        if (!dontRecurse) {\n            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);\n        }\n    };\n    CompositionHelper.prototype._clearTextareaPosition = function () {\n        this._textarea.style.left = '';\n        this._textarea.style.top = '';\n    };\n    return CompositionHelper;\n}());\nexports.CompositionHelper = CompositionHelper;\n//# sourceMappingURL=CompositionHelper.js.map\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = __webpack_require__(0);\nvar TextDecoder_1 = __webpack_require__(10);\nfunction r(low, high) {\n    var c = high - low;\n    var arr = new Array(c);\n    while (c--) {\n        arr[c] = --high;\n    }\n    return arr;\n}\nvar TransitionTable = (function () {\n    function TransitionTable(length) {\n        this.table = (typeof Uint8Array === 'undefined')\n            ? new Array(length)\n            : new Uint8Array(length);\n    }\n    TransitionTable.prototype.add = function (code, state, action, next) {\n        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);\n    };\n    TransitionTable.prototype.addMany = function (codes, state, action, next) {\n        for (var i = 0; i < codes.length; i++) {\n            this.add(codes[i], state, action, next);\n        }\n    };\n    return TransitionTable;\n}());\nexports.TransitionTable = TransitionTable;\nvar PRINTABLES = r(0x20, 0x7f);\nvar EXECUTABLES = r(0x00, 0x18);\nEXECUTABLES.push(0x19);\nEXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\nvar NON_ASCII_PRINTABLE = 0xA0;\nexports.VT500_TRANSITION_TABLE = (function () {\n    var table = new TransitionTable(4095);\n    var states = r(0, 13 + 1);\n    var state;\n    for (state in states) {\n        for (var code = 0; code <= NON_ASCII_PRINTABLE; ++code) {\n            table.add(code, state, 1, 0);\n        }\n    }\n    table.addMany(PRINTABLES, 0, 2, 0);\n    for (state in states) {\n        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);\n        table.addMany(r(0x80, 0x90), state, 3, 0);\n        table.addMany(r(0x90, 0x98), state, 3, 0);\n        table.add(0x9c, state, 0, 0);\n        table.add(0x1b, state, 11, 1);\n        table.add(0x9d, state, 4, 8);\n        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);\n        table.add(0x9b, state, 11, 3);\n        table.add(0x90, state, 11, 9);\n    }\n    table.addMany(EXECUTABLES, 0, 3, 0);\n    table.addMany(EXECUTABLES, 1, 3, 1);\n    table.add(0x7f, 1, 0, 1);\n    table.addMany(EXECUTABLES, 8, 0, 8);\n    table.addMany(EXECUTABLES, 3, 3, 3);\n    table.add(0x7f, 3, 0, 3);\n    table.addMany(EXECUTABLES, 4, 3, 4);\n    table.add(0x7f, 4, 0, 4);\n    table.addMany(EXECUTABLES, 6, 3, 6);\n    table.addMany(EXECUTABLES, 5, 3, 5);\n    table.add(0x7f, 5, 0, 5);\n    table.addMany(EXECUTABLES, 2, 3, 2);\n    table.add(0x7f, 2, 0, 2);\n    table.add(0x5d, 1, 4, 8);\n    table.addMany(PRINTABLES, 8, 5, 8);\n    table.add(0x7f, 8, 5, 8);\n    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);\n    table.addMany(r(0x1c, 0x20), 8, 0, 8);\n    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);\n    table.addMany(PRINTABLES, 7, 0, 7);\n    table.addMany(EXECUTABLES, 7, 0, 7);\n    table.add(0x9c, 7, 0, 0);\n    table.add(0x7f, 7, 0, 7);\n    table.add(0x5b, 1, 11, 3);\n    table.addMany(r(0x40, 0x7f), 3, 7, 0);\n    table.addMany(r(0x30, 0x3a), 3, 8, 4);\n    table.add(0x3b, 3, 8, 4);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);\n    table.addMany(r(0x30, 0x3a), 4, 8, 4);\n    table.add(0x3b, 4, 8, 4);\n    table.addMany(r(0x40, 0x7f), 4, 7, 0);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);\n    table.addMany(r(0x20, 0x40), 6, 0, 6);\n    table.add(0x7f, 6, 0, 6);\n    table.addMany(r(0x40, 0x7f), 6, 0, 0);\n    table.add(0x3a, 3, 0, 6);\n    table.addMany(r(0x20, 0x30), 3, 9, 5);\n    table.addMany(r(0x20, 0x30), 5, 9, 5);\n    table.addMany(r(0x30, 0x40), 5, 0, 6);\n    table.addMany(r(0x40, 0x7f), 5, 7, 0);\n    table.addMany(r(0x20, 0x30), 4, 9, 5);\n    table.addMany(r(0x20, 0x30), 1, 9, 2);\n    table.addMany(r(0x20, 0x30), 2, 9, 2);\n    table.addMany(r(0x30, 0x7f), 2, 10, 0);\n    table.addMany(r(0x30, 0x50), 1, 10, 0);\n    table.addMany(r(0x51, 0x58), 1, 10, 0);\n    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);\n    table.addMany(r(0x60, 0x7f), 1, 10, 0);\n    table.add(0x50, 1, 11, 9);\n    table.addMany(EXECUTABLES, 9, 0, 9);\n    table.add(0x7f, 9, 0, 9);\n    table.addMany(r(0x1c, 0x20), 9, 0, 9);\n    table.addMany(r(0x20, 0x30), 9, 9, 12);\n    table.add(0x3a, 9, 0, 11);\n    table.addMany(r(0x30, 0x3a), 9, 8, 10);\n    table.add(0x3b, 9, 8, 10);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);\n    table.addMany(EXECUTABLES, 11, 0, 11);\n    table.addMany(r(0x20, 0x80), 11, 0, 11);\n    table.addMany(r(0x1c, 0x20), 11, 0, 11);\n    table.addMany(EXECUTABLES, 10, 0, 10);\n    table.add(0x7f, 10, 0, 10);\n    table.addMany(r(0x1c, 0x20), 10, 0, 10);\n    table.addMany(r(0x30, 0x3a), 10, 8, 10);\n    table.add(0x3b, 10, 8, 10);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);\n    table.addMany(r(0x20, 0x30), 10, 9, 12);\n    table.addMany(EXECUTABLES, 12, 0, 12);\n    table.add(0x7f, 12, 0, 12);\n    table.addMany(r(0x1c, 0x20), 12, 0, 12);\n    table.addMany(r(0x20, 0x30), 12, 9, 12);\n    table.addMany(r(0x30, 0x40), 12, 0, 11);\n    table.addMany(r(0x40, 0x7f), 12, 12, 13);\n    table.addMany(r(0x40, 0x7f), 10, 12, 13);\n    table.addMany(r(0x40, 0x7f), 9, 12, 13);\n    table.addMany(EXECUTABLES, 13, 13, 13);\n    table.addMany(PRINTABLES, 13, 13, 13);\n    table.add(0x7f, 13, 0, 13);\n    table.addMany([0x1b, 0x9c], 13, 14, 0);\n    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);\n    return table;\n})();\nvar DcsDummy = (function () {\n    function DcsDummy() {\n    }\n    DcsDummy.prototype.hook = function (collect, params, flag) { };\n    DcsDummy.prototype.put = function (data, start, end) { };\n    DcsDummy.prototype.unhook = function () { };\n    return DcsDummy;\n}());\nvar EscapeSequenceParser = (function (_super) {\n    __extends(EscapeSequenceParser, _super);\n    function EscapeSequenceParser(TRANSITIONS) {\n        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }\n        var _this = _super.call(this) || this;\n        _this.TRANSITIONS = TRANSITIONS;\n        _this.initialState = 0;\n        _this.currentState = _this.initialState;\n        _this._osc = '';\n        _this._params = [0];\n        _this._collect = '';\n        _this._printHandlerFb = function (data, start, end) { };\n        _this._executeHandlerFb = function (code) { };\n        _this._csiHandlerFb = function (collect, params, flag) { };\n        _this._escHandlerFb = function (collect, flag) { };\n        _this._oscHandlerFb = function (identifier, data) { };\n        _this._dcsHandlerFb = new DcsDummy();\n        _this._errorHandlerFb = function (state) { return state; };\n        _this._printHandler = _this._printHandlerFb;\n        _this._executeHandlers = Object.create(null);\n        _this._csiHandlers = Object.create(null);\n        _this._escHandlers = Object.create(null);\n        _this._oscHandlers = Object.create(null);\n        _this._dcsHandlers = Object.create(null);\n        _this._activeDcsHandler = null;\n        _this._errorHandler = _this._errorHandlerFb;\n        _this.setEscHandler('\\\\', function () { });\n        return _this;\n    }\n    EscapeSequenceParser.prototype.dispose = function () {\n        this._printHandlerFb = null;\n        this._executeHandlerFb = null;\n        this._csiHandlerFb = null;\n        this._escHandlerFb = null;\n        this._oscHandlerFb = null;\n        this._dcsHandlerFb = null;\n        this._errorHandlerFb = null;\n        this._printHandler = null;\n        this._executeHandlers = null;\n        this._escHandlers = null;\n        this._csiHandlers = null;\n        this._oscHandlers = null;\n        this._dcsHandlers = null;\n        this._activeDcsHandler = null;\n        this._errorHandler = null;\n    };\n    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {\n        this._printHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearPrintHandler = function () {\n        this._printHandler = this._printHandlerFb;\n    };\n    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {\n        this._executeHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {\n        if (this._executeHandlers[flag.charCodeAt(0)])\n            delete this._executeHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {\n        this._executeHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addCsiHandler = function (flag, callback) {\n        var index = flag.charCodeAt(0);\n        if (this._csiHandlers[index] === undefined) {\n            this._csiHandlers[index] = [];\n        }\n        var handlerList = this._csiHandlers[index];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {\n        this._csiHandlers[flag.charCodeAt(0)] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {\n        if (this._csiHandlers[flag.charCodeAt(0)])\n            delete this._csiHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {\n        this._csiHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {\n        this._escHandlers[collectAndFlag] = callback;\n    };\n    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {\n        if (this._escHandlers[collectAndFlag])\n            delete this._escHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {\n        this._escHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addOscHandler = function (ident, callback) {\n        if (this._oscHandlers[ident] === undefined) {\n            this._oscHandlers[ident] = [];\n        }\n        var handlerList = this._oscHandlers[ident];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {\n        this._oscHandlers[ident] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {\n        if (this._oscHandlers[ident])\n            delete this._oscHandlers[ident];\n    };\n    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {\n        this._oscHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {\n        this._dcsHandlers[collectAndFlag] = handler;\n    };\n    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {\n        if (this._dcsHandlers[collectAndFlag])\n            delete this._dcsHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {\n        this._dcsHandlerFb = handler;\n    };\n    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {\n        this._errorHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearErrorHandler = function () {\n        this._errorHandler = this._errorHandlerFb;\n    };\n    EscapeSequenceParser.prototype.reset = function () {\n        this.currentState = this.initialState;\n        this._osc = '';\n        this._params = [0];\n        this._collect = '';\n        this._activeDcsHandler = null;\n    };\n    EscapeSequenceParser.prototype.parse = function (data, length) {\n        var code = 0;\n        var transition = 0;\n        var error = false;\n        var currentState = this.currentState;\n        var print = -1;\n        var dcs = -1;\n        var osc = this._osc;\n        var collect = this._collect;\n        var params = this._params;\n        var table = this.TRANSITIONS.table;\n        var dcsHandler = this._activeDcsHandler;\n        var callback = null;\n        for (var i = 0; i < length; ++i) {\n            code = data[i];\n            if (currentState === 0 && code > 0x1f && code < 0x80) {\n                print = (~print) ? print : i;\n                do\n                    i++;\n                while (i < length && data[i] > 0x1f && data[i] < 0x80);\n                i--;\n                continue;\n            }\n            if (currentState === 4 && (code > 0x2f && code < 0x39)) {\n                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                continue;\n            }\n            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n            switch (transition >> 4) {\n                case 2:\n                    print = (~print) ? print : i;\n                    break;\n                case 3:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    callback = this._executeHandlers[code];\n                    if (callback)\n                        callback();\n                    else\n                        this._executeHandlerFb(code);\n                    break;\n                case 0:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    else if (~dcs) {\n                        dcsHandler.put(data, dcs, i);\n                        dcs = -1;\n                    }\n                    break;\n                case 1:\n                    if (code > 0x9f) {\n                        switch (currentState) {\n                            case 0:\n                                print = (~print) ? print : i;\n                                break;\n                            case 6:\n                                transition |= 6;\n                                break;\n                            case 11:\n                                transition |= 11;\n                                break;\n                            case 13:\n                                dcs = (~dcs) ? dcs : i;\n                                transition |= 13;\n                                break;\n                            default:\n                                error = true;\n                        }\n                    }\n                    else {\n                        error = true;\n                    }\n                    if (error) {\n                        var inject = this._errorHandler({\n                            position: i,\n                            code: code,\n                            currentState: currentState,\n                            print: print,\n                            dcs: dcs,\n                            osc: osc,\n                            collect: collect,\n                            params: params,\n                            abort: false\n                        });\n                        if (inject.abort)\n                            return;\n                        error = false;\n                    }\n                    break;\n                case 7:\n                    var handlers = this._csiHandlers[code];\n                    var j = handlers ? handlers.length - 1 : -1;\n                    for (; j >= 0; j--) {\n                        if (handlers[j](params, collect) !== false) {\n                            break;\n                        }\n                    }\n                    if (j < 0) {\n                        this._csiHandlerFb(collect, params, code);\n                    }\n                    break;\n                case 8:\n                    if (code === 0x3b)\n                        params.push(0);\n                    else\n                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                    break;\n                case 9:\n                    collect += String.fromCharCode(code);\n                    break;\n                case 10:\n                    callback = this._escHandlers[collect + String.fromCharCode(code)];\n                    if (callback)\n                        callback(collect, code);\n                    else\n                        this._escHandlerFb(collect, code);\n                    break;\n                case 11:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 12:\n                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];\n                    if (!dcsHandler)\n                        dcsHandler = this._dcsHandlerFb;\n                    dcsHandler.hook(collect, params, code);\n                    break;\n                case 13:\n                    dcs = (~dcs) ? dcs : i;\n                    break;\n                case 14:\n                    if (dcsHandler) {\n                        if (~dcs)\n                            dcsHandler.put(data, dcs, i);\n                        dcsHandler.unhook();\n                        dcsHandler = null;\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 4:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    break;\n                case 5:\n                    for (var j_1 = i + 1;; j_1++) {\n                        if (j_1 >= length\n                            || (code = data[j_1]) < 0x20\n                            || (code > 0x7f && code <= 0x9f)) {\n                            osc += TextDecoder_1.utf32ToString(data, i, j_1);\n                            i = j_1 - 1;\n                            break;\n                        }\n                    }\n                    break;\n                case 6:\n                    if (osc && code !== 0x18 && code !== 0x1a) {\n                        var idx = osc.indexOf(';');\n                        if (idx === -1) {\n                            this._oscHandlerFb(-1, osc);\n                        }\n                        else {\n                            var identifier = parseInt(osc.substring(0, idx));\n                            var content = osc.substring(idx + 1);\n                            var handlers_1 = this._oscHandlers[identifier];\n                            var j_2 = handlers_1 ? handlers_1.length - 1 : -1;\n                            for (; j_2 >= 0; j_2--) {\n                                if (handlers_1[j_2](content) !== false) {\n                                    break;\n                                }\n                            }\n                            if (j_2 < 0) {\n                                this._oscHandlerFb(identifier, content);\n                            }\n                        }\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n            }\n            currentState = transition & 15;\n        }\n        if (currentState === 0 && ~print) {\n            this._printHandler(data, print, length);\n        }\n        else if (currentState === 13 && ~dcs && dcsHandler) {\n            dcsHandler.put(data, dcs, length);\n        }\n        this._osc = osc;\n        this._collect = collect;\n        this._params = params;\n        this._activeDcsHandler = dcsHandler;\n        this.currentState = currentState;\n    };\n    return EscapeSequenceParser;\n}(Lifecycle_1.Disposable));\nexports.EscapeSequenceParser = EscapeSequenceParser;\n//# sourceMappingURL=EscapeSequenceParser.js.map\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = __webpack_require__(7);\nvar Charsets_1 = __webpack_require__(53);\nvar CharWidth_1 = __webpack_require__(14);\nvar EscapeSequenceParser_1 = __webpack_require__(39);\nvar Lifecycle_1 = __webpack_require__(0);\nvar TypedArrayUtils_1 = __webpack_require__(17);\nvar TextDecoder_1 = __webpack_require__(10);\nvar BufferLine_1 = __webpack_require__(1);\nvar EventEmitter2_1 = __webpack_require__(2);\nvar GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\nvar DECRQSS = (function () {\n    function DECRQSS(_terminal) {\n        this._terminal = _terminal;\n        this._data = new Uint32Array(0);\n    }\n    DECRQSS.prototype.hook = function (collect, params, flag) {\n        this._data = new Uint32Array(0);\n    };\n    DECRQSS.prototype.put = function (data, start, end) {\n        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));\n    };\n    DECRQSS.prototype.unhook = function () {\n        var data = TextDecoder_1.utf32ToString(this._data);\n        this._data = new Uint32Array(0);\n        switch (data) {\n            case '\"q':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0\\\"q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case '\"p':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r61\\\"p\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'r':\n                var pt = '' + (this._terminal.buffer.scrollTop + 1) +\n                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + pt + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'm':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0m\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case ' q':\n                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };\n                var style = STYLES[this._terminal.getOption('cursorStyle')];\n                style -= this._terminal.getOption('cursorBlink');\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + style + \" q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            default:\n                this._terminal.error('Unknown DCS $q %s', data);\n                this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0$r\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n        }\n    };\n    return DECRQSS;\n}());\nvar InputHandler = (function (_super) {\n    __extends(InputHandler, _super);\n    function InputHandler(_terminal, _parser) {\n        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._parser = _parser;\n        _this._parseBuffer = new Uint32Array(4096);\n        _this._stringDecoder = new TextDecoder_1.StringToUtf32();\n        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();\n        _this._workCell = new BufferLine_1.CellData();\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this.register(_this._parser);\n        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {\n            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setEscHandlerFallback(function (collect, flag) {\n            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setExecuteHandlerFallback(function (code) {\n            _this._terminal.error('Unknown EXECUTE code: ', { code: code });\n        });\n        _this._parser.setOscHandlerFallback(function (identifier, data) {\n            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });\n        });\n        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });\n        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });\n        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });\n        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });\n        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });\n        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });\n        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });\n        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });\n        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });\n        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });\n        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });\n        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });\n        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });\n        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });\n        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });\n        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });\n        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });\n        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });\n        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });\n        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });\n        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });\n        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });\n        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });\n        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });\n        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });\n        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });\n        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });\n        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });\n        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });\n        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });\n        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });\n        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });\n        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });\n        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });\n        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });\n        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });\n        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });\n        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });\n        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });\n        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });\n        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });\n        _this._parser.setEscHandler('D', function () { return _this.index(); });\n        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });\n        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });\n        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });\n        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });\n        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });\n        _this._parser.setEscHandler('c', function () { return _this.reset(); });\n        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });\n        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });\n        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });\n        var _loop_1 = function (flag) {\n            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });\n            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });\n            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });\n            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });\n            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });\n            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });\n            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });\n        };\n        var this_1 = this;\n        for (var flag in Charsets_1.CHARSETS) {\n            _loop_1(flag);\n        }\n        _this._parser.setErrorHandler(function (state) {\n            _this._terminal.error('Parsing error: ', state);\n            return state;\n        });\n        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));\n        return _this;\n    }\n    Object.defineProperty(InputHandler.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    InputHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal = null;\n    };\n    InputHandler.prototype.parse = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._onCursorMove.fire();\n        }\n    };\n    InputHandler.prototype.parseUtf8 = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._utf8Decoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._terminal.emit('cursormove');\n        }\n    };\n    InputHandler.prototype.print = function (data, start, end) {\n        var code;\n        var chWidth;\n        var buffer = this._terminal.buffer;\n        var charset = this._terminal.charset;\n        var screenReaderMode = this._terminal.options.screenReaderMode;\n        var cols = this._terminal.cols;\n        var wraparoundMode = this._terminal.wraparoundMode;\n        var insertMode = this._terminal.insertMode;\n        var curAttr = this._terminal.curAttrData;\n        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n        this._terminal.updateRange(buffer.y);\n        for (var pos = start; pos < end; ++pos) {\n            code = data[pos];\n            chWidth = CharWidth_1.wcwidth(code);\n            if (code < 127 && charset) {\n                var ch = charset[String.fromCharCode(code)];\n                if (ch) {\n                    code = ch.charCodeAt(0);\n                }\n            }\n            if (screenReaderMode) {\n                this._terminal.emit('a11y.char', TextDecoder_1.stringFromCodePoint(code));\n            }\n            if (!chWidth && buffer.x) {\n                if (!bufferRow.getWidth(buffer.x - 1)) {\n                    bufferRow.addCodepointToCell(buffer.x - 2, code);\n                }\n                else {\n                    bufferRow.addCodepointToCell(buffer.x - 1, code);\n                }\n                continue;\n            }\n            if (buffer.x + chWidth - 1 >= cols) {\n                if (wraparoundMode) {\n                    buffer.x = 0;\n                    buffer.y++;\n                    if (buffer.y > buffer.scrollBottom) {\n                        buffer.y--;\n                        this._terminal.scroll(true);\n                    }\n                    else {\n                        buffer.lines.get(buffer.y).isWrapped = true;\n                    }\n                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n                }\n                else {\n                    if (chWidth === 2) {\n                        continue;\n                    }\n                }\n            }\n            if (insertMode) {\n                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));\n                if (bufferRow.getWidth(cols - 1) === 2) {\n                    bufferRow.setCellFromCodePoint(cols - 1, BufferLine_1.NULL_CELL_CODE, BufferLine_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);\n                }\n            }\n            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);\n            if (chWidth > 0) {\n                while (--chWidth) {\n                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);\n                }\n            }\n        }\n        this._terminal.updateRange(buffer.y);\n    };\n    InputHandler.prototype.addCsiHandler = function (flag, callback) {\n        return this._parser.addCsiHandler(flag, callback);\n    };\n    InputHandler.prototype.addOscHandler = function (ident, callback) {\n        return this._parser.addOscHandler(ident, callback);\n    };\n    InputHandler.prototype.bell = function () {\n        this._terminal.bell();\n    };\n    InputHandler.prototype.lineFeed = function () {\n        var buffer = this._terminal.buffer;\n        if (this._terminal.options.convertEol) {\n            buffer.x = 0;\n        }\n        buffer.y++;\n        if (buffer.y > buffer.scrollBottom) {\n            buffer.y--;\n            this._terminal.scroll();\n        }\n        if (buffer.x >= this._terminal.cols) {\n            buffer.x--;\n        }\n        this._onLineFeed.fire();\n    };\n    InputHandler.prototype.carriageReturn = function () {\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.backspace = function () {\n        if (this._terminal.buffer.x > 0) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.tab = function () {\n        var originalX = this._terminal.buffer.x;\n        this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        if (this._terminal.options.screenReaderMode) {\n            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);\n        }\n    };\n    InputHandler.prototype.shiftOut = function () {\n        this._terminal.setgLevel(1);\n    };\n    InputHandler.prototype.shiftIn = function () {\n        this._terminal.setgLevel(0);\n    };\n    InputHandler.prototype.insertChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.cursorUp = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n    };\n    InputHandler.prototype.cursorDown = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.cursorForward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.cursorBackward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n        this._terminal.buffer.x -= param;\n        if (this._terminal.buffer.x < 0) {\n            this._terminal.buffer.x = 0;\n        }\n    };\n    InputHandler.prototype.cursorNextLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorPrecedingLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorCharAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n    };\n    InputHandler.prototype.cursorPosition = function (params) {\n        var col;\n        var row = params[0] - 1;\n        if (params.length >= 2) {\n            col = params[1] - 1;\n        }\n        else {\n            col = 0;\n        }\n        if (row < 0) {\n            row = 0;\n        }\n        else if (row >= this._terminal.rows) {\n            row = this._terminal.rows - 1;\n        }\n        if (col < 0) {\n            col = 0;\n        }\n        else if (col >= this._terminal.cols) {\n            col = this._terminal.cols - 1;\n        }\n        this._terminal.buffer.x = col;\n        this._terminal.buffer.y = row;\n    };\n    InputHandler.prototype.cursorForwardTab = function (params) {\n        var param = params[0] || 1;\n        while (param--) {\n            this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        }\n    };\n    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {\n        if (clearWrap === void 0) { clearWrap = false; }\n        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);\n        line.replaceCells(start, end, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        if (clearWrap) {\n            line.isWrapped = false;\n        }\n    };\n    InputHandler.prototype._resetBufferLine = function (y) {\n        this._eraseInBufferLine(y, 0, this._terminal.cols, true);\n    };\n    InputHandler.prototype.eraseInDisplay = function (params) {\n        var j;\n        switch (params[0]) {\n            case 0:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);\n                for (; j < this._terminal.rows; j++) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(j);\n                break;\n            case 1:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);\n                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {\n                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;\n                }\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 2:\n                j = this._terminal.rows;\n                this._terminal.updateRange(j - 1);\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 3:\n                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;\n                if (scrollBackSize > 0) {\n                    this._terminal.buffer.lines.trimStart(scrollBackSize);\n                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);\n                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);\n                    this._onScroll.fire(0);\n                }\n                break;\n        }\n    };\n    InputHandler.prototype.eraseInLine = function (params) {\n        switch (params[0]) {\n            case 0:\n                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);\n                break;\n            case 1:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);\n                break;\n            case 2:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);\n                break;\n        }\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.insertLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;\n        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n        while (param--) {\n            buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var j;\n        j = this._terminal.rows - 1 - buffer.scrollBottom;\n        j = this._terminal.rows - 1 + buffer.ybase - j;\n        while (param--) {\n            buffer.lines.splice(row, 1);\n            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.scrollUp = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this._terminal.updateRange(buffer.scrollTop);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.scrollDown = function (params, collect) {\n        if (params.length < 2 && !collect) {\n            var param = params[0] || 1;\n            var buffer = this._terminal.buffer;\n            while (param--) {\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n            }\n            this._terminal.updateRange(buffer.scrollTop);\n            this._terminal.updateRange(buffer.scrollBottom);\n        }\n    };\n    InputHandler.prototype.eraseChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n    };\n    InputHandler.prototype.cursorBackwardTab = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.x = buffer.prevStop();\n        }\n    };\n    InputHandler.prototype.charPosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.hPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.repeatPrecedingCharacter = function (params) {\n        var buffer = this._terminal.buffer;\n        var line = buffer.lines.get(buffer.ybase + buffer.y);\n        line.loadCell(buffer.x - 1, this._workCell);\n        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), (this._workCell.content !== undefined) ? this._workCell : buffer.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n    };\n    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {\n        if (params[0] > 0) {\n            return;\n        }\n        if (!collect) {\n            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');\n            }\n        }\n        else if (collect === '>') {\n            if (this._terminal.is('xterm')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');\n            }\n            else if (this._terminal.is('rxvt-unicode')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(params[0] + 'c');\n            }\n            else if (this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');\n            }\n        }\n    };\n    InputHandler.prototype.linePosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y = param - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n    };\n    InputHandler.prototype.vPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.hVPosition = function (params) {\n        if (params[0] < 1)\n            params[0] = 1;\n        if (params[1] < 1)\n            params[1] = 1;\n        this._terminal.buffer.y = params[0] - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = params[1] - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.tabClear = function (params) {\n        var param = params[0];\n        if (param <= 0) {\n            delete this._terminal.buffer.tabs[this._terminal.buffer.x];\n        }\n        else if (param === 3) {\n            this._terminal.buffer.tabs = {};\n        }\n    };\n    InputHandler.prototype.setMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.setMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = true;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = true;\n                    break;\n                case 2:\n                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);\n                    break;\n                case 3:\n                    this._terminal.savedCols = this._terminal.cols;\n                    this._terminal.resize(132, this._terminal.rows);\n                    break;\n                case 6:\n                    this._terminal.originMode = true;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = true;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Serial port requested application keypad.');\n                    this._terminal.applicationKeypad = true;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = params[0] === 9;\n                    this._terminal.vt200Mouse = params[0] === 1000;\n                    this._terminal.normalMouse = params[0] > 1000;\n                    this._terminal.mouseEvents = true;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.add('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.disable();\n                    }\n                    this._terminal.log('Binding to mouse events.');\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = true;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = true;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = true;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = true;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = false;\n                    break;\n                case 1048:\n                    this.saveCursor(params);\n                    break;\n                case 1049:\n                    this.saveCursor(params);\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = true;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.resetMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.resetMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = false;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = false;\n                    break;\n                case 3:\n                    if (this._terminal.cols === 132 && this._terminal.savedCols) {\n                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);\n                    }\n                    delete this._terminal.savedCols;\n                    break;\n                case 6:\n                    this._terminal.originMode = false;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = false;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Switching back to normal keypad.');\n                    this._terminal.applicationKeypad = false;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = false;\n                    this._terminal.vt200Mouse = false;\n                    this._terminal.normalMouse = false;\n                    this._terminal.mouseEvents = false;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.remove('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.enable();\n                    }\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = false;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = false;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = false;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = false;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = true;\n                    break;\n                case 1048:\n                    this.restoreCursor(params);\n                    break;\n                case 1049:\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateNormalBuffer();\n                    if (params[0] === 1049) {\n                        this.restoreCursor(params);\n                    }\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = false;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.charAttributes = function (params) {\n        if (params.length === 1 && params[0] === 0) {\n            this._terminal.curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n            this._terminal.curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            return;\n        }\n        var l = params.length;\n        var p;\n        var attr = this._terminal.curAttrData;\n        for (var i = 0; i < l; i++) {\n            p = params[i];\n            if (p >= 30 && p <= 37) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 30);\n            }\n            else if (p >= 40 && p <= 47) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 40);\n            }\n            else if (p >= 90 && p <= 97) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 90) | 8;\n            }\n            else if (p >= 100 && p <= 107) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 100) | 8;\n            }\n            else if (p === 0) {\n                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            }\n            else if (p === 1) {\n                attr.fg |= 134217728;\n            }\n            else if (p === 3) {\n                attr.bg |= 67108864;\n            }\n            else if (p === 4) {\n                attr.fg |= 268435456;\n            }\n            else if (p === 5) {\n                attr.fg |= 536870912;\n            }\n            else if (p === 7) {\n                attr.fg |= 67108864;\n            }\n            else if (p === 8) {\n                attr.fg |= 1073741824;\n            }\n            else if (p === 2) {\n                attr.bg |= 134217728;\n            }\n            else if (p === 22) {\n                attr.fg &= ~134217728;\n                attr.bg &= ~134217728;\n            }\n            else if (p === 23) {\n                attr.bg &= ~67108864;\n            }\n            else if (p === 24) {\n                attr.fg &= ~268435456;\n            }\n            else if (p === 25) {\n                attr.fg &= ~536870912;\n            }\n            else if (p === 27) {\n                attr.fg &= ~67108864;\n            }\n            else if (p === 28) {\n                attr.fg &= ~1073741824;\n            }\n            else if (p === 39) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n            }\n            else if (p === 49) {\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else if (p === 38) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.fg |= 50331648;\n                    attr.fg &= ~16777215;\n                    attr.fg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.fg &= ~(50331648 | 255);\n                    attr.fg |= 33554432 | p;\n                }\n            }\n            else if (p === 48) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.bg |= 50331648;\n                    attr.bg &= ~16777215;\n                    attr.bg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.bg &= ~(50331648 | 255);\n                    attr.bg |= 33554432 | p;\n                }\n            }\n            else if (p === 100) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else {\n                this._terminal.error('Unknown SGR attribute: %d.', p);\n            }\n        }\n    };\n    InputHandler.prototype.deviceStatus = function (params, collect) {\n        if (!collect) {\n            switch (params[0]) {\n                case 5:\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[0n\");\n                    break;\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[\" + y + \";\" + x + \"R\");\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[?\" + y + \";\" + x + \"R\");\n                    break;\n                case 15:\n                    break;\n                case 25:\n                    break;\n                case 26:\n                    break;\n                case 53:\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.softReset = function (params, collect) {\n        if (collect === '!') {\n            this._terminal.cursorHidden = false;\n            this._terminal.insertMode = false;\n            this._terminal.originMode = false;\n            this._terminal.wraparoundMode = true;\n            this._terminal.applicationKeypad = false;\n            if (this._terminal.viewport) {\n                this._terminal.viewport.syncScrollArea();\n            }\n            this._terminal.applicationCursor = false;\n            this._terminal.buffer.scrollTop = 0;\n            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;\n            this._terminal.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n            this._terminal.buffer.x = this._terminal.buffer.y = 0;\n            this._terminal.charset = null;\n            this._terminal.glevel = 0;\n            this._terminal.charsets = [null];\n        }\n    };\n    InputHandler.prototype.setCursorStyle = function (params, collect) {\n        if (collect === ' ') {\n            var param = params[0] < 1 ? 1 : params[0];\n            switch (param) {\n                case 1:\n                case 2:\n                    this._terminal.setOption('cursorStyle', 'block');\n                    break;\n                case 3:\n                case 4:\n                    this._terminal.setOption('cursorStyle', 'underline');\n                    break;\n                case 5:\n                case 6:\n                    this._terminal.setOption('cursorStyle', 'bar');\n                    break;\n            }\n            var isBlinking = param % 2 === 1;\n            this._terminal.setOption('cursorBlink', isBlinking);\n        }\n    };\n    InputHandler.prototype.setScrollRegion = function (params, collect) {\n        if (collect) {\n            return;\n        }\n        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;\n        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;\n        this._terminal.buffer.x = 0;\n        this._terminal.buffer.y = 0;\n    };\n    InputHandler.prototype.saveCursor = function (params) {\n        this._terminal.buffer.savedX = this._terminal.buffer.x;\n        this._terminal.buffer.savedY = this._terminal.buffer.y;\n        this._terminal.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;\n        this._terminal.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;\n    };\n    InputHandler.prototype.restoreCursor = function (params) {\n        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;\n        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;\n        this._terminal.curAttrData.fg = this._terminal.buffer.savedCurAttrData.fg;\n        this._terminal.curAttrData.bg = this._terminal.buffer.savedCurAttrData.bg;\n    };\n    InputHandler.prototype.setTitle = function (data) {\n        this._terminal.handleTitle(data);\n    };\n    InputHandler.prototype.nextLine = function () {\n        this._terminal.buffer.x = 0;\n        this.index();\n    };\n    InputHandler.prototype.keypadApplicationMode = function () {\n        this._terminal.log('Serial port requested application keypad.');\n        this._terminal.applicationKeypad = true;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.keypadNumericMode = function () {\n        this._terminal.log('Switching back to normal keypad.');\n        this._terminal.applicationKeypad = false;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.selectDefaultCharset = function () {\n        this._terminal.setgLevel(0);\n        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.selectCharset = function (collectAndFlag) {\n        if (collectAndFlag.length !== 2) {\n            this.selectDefaultCharset();\n            return;\n        }\n        if (collectAndFlag[0] === '/') {\n            return;\n        }\n        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);\n        return;\n    };\n    InputHandler.prototype.index = function () {\n        this._terminal.index();\n    };\n    InputHandler.prototype.tabSet = function () {\n        this._terminal.tabSet();\n    };\n    InputHandler.prototype.reverseIndex = function () {\n        this._terminal.reverseIndex();\n    };\n    InputHandler.prototype.reset = function () {\n        this._parser.reset();\n        this._terminal.reset();\n    };\n    InputHandler.prototype.setgLevel = function (level) {\n        this._terminal.setgLevel(level);\n    };\n    return InputHandler;\n}(Lifecycle_1.Disposable));\nexports.InputHandler = InputHandler;\n//# sourceMappingURL=InputHandler.js.map\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseZoneManager_1 = __webpack_require__(16);\nvar CharWidth_1 = __webpack_require__(14);\nvar EventEmitter2_1 = __webpack_require__(2);\nvar Linkifier = (function () {\n    function Linkifier(_terminal) {\n        this._terminal = _terminal;\n        this._linkMatchers = [];\n        this._nextLinkMatcherId = 0;\n        this._onLinkHover = new EventEmitter2_1.EventEmitter2();\n        this._onLinkLeave = new EventEmitter2_1.EventEmitter2();\n        this._onLinkTooltip = new EventEmitter2_1.EventEmitter2();\n        this._rowsToLinkify = {\n            start: null,\n            end: null\n        };\n    }\n    Object.defineProperty(Linkifier.prototype, \"onLinkHover\", {\n        get: function () { return this._onLinkHover.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkLeave\", {\n        get: function () { return this._onLinkLeave.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkTooltip\", {\n        get: function () { return this._onLinkTooltip.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Linkifier.prototype.attachToDom = function (mouseZoneManager) {\n        this._mouseZoneManager = mouseZoneManager;\n    };\n    Linkifier.prototype.linkifyRows = function (start, end) {\n        var _this = this;\n        if (!this._mouseZoneManager) {\n            return;\n        }\n        if (this._rowsToLinkify.start === null) {\n            this._rowsToLinkify.start = start;\n            this._rowsToLinkify.end = end;\n        }\n        else {\n            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n        }\n        this._mouseZoneManager.clearAll(start, end);\n        if (this._rowsTimeoutId) {\n            clearTimeout(this._rowsTimeoutId);\n        }\n        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);\n    };\n    Linkifier.prototype._linkifyRows = function () {\n        this._rowsTimeoutId = null;\n        var buffer = this._terminal.buffer;\n        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n        if (absoluteRowIndexStart >= buffer.lines.length) {\n            return;\n        }\n        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;\n        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);\n        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n        while (iterator.hasNext()) {\n            var lineData = iterator.next();\n            for (var i = 0; i < this._linkMatchers.length; i++) {\n                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n            }\n        }\n        this._rowsToLinkify.start = null;\n        this._rowsToLinkify.end = null;\n    };\n    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {\n        if (options === void 0) { options = {}; }\n        if (!handler) {\n            throw new Error('handler must be defined');\n        }\n        var matcher = {\n            id: this._nextLinkMatcherId++,\n            regex: regex,\n            handler: handler,\n            matchIndex: options.matchIndex,\n            validationCallback: options.validationCallback,\n            hoverTooltipCallback: options.tooltipCallback,\n            hoverLeaveCallback: options.leaveCallback,\n            willLinkActivate: options.willLinkActivate,\n            priority: options.priority || 0\n        };\n        this._addLinkMatcherToList(matcher);\n        return matcher.id;\n    };\n    Linkifier.prototype._addLinkMatcherToList = function (matcher) {\n        if (this._linkMatchers.length === 0) {\n            this._linkMatchers.push(matcher);\n            return;\n        }\n        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {\n            if (matcher.priority <= this._linkMatchers[i].priority) {\n                this._linkMatchers.splice(i + 1, 0, matcher);\n                return;\n            }\n        }\n        this._linkMatchers.splice(0, 0, matcher);\n    };\n    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {\n        for (var i = 0; i < this._linkMatchers.length; i++) {\n            if (this._linkMatchers[i].id === matcherId) {\n                this._linkMatchers.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {\n        var _this = this;\n        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');\n        var match;\n        var stringIndex = -1;\n        var _loop_1 = function () {\n            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n            if (!uri) {\n                if (this_1._terminal.debug) {\n                    console.log({ match: match, matcher: matcher });\n                    throw new Error('match found without corresponding matchIndex');\n                }\n                return \"break\";\n            }\n            stringIndex = text.indexOf(uri, stringIndex + 1);\n            rex.lastIndex = stringIndex + uri.length;\n            if (stringIndex < 0) {\n                return \"break\";\n            }\n            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n            if (bufferIndex[0] < 0) {\n                return \"break\";\n            }\n            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);\n            var attr = line.getFg(bufferIndex[1]);\n            var fg;\n            if (attr) {\n                fg = (attr >> 9) & 0x1ff;\n            }\n            if (matcher.validationCallback) {\n                matcher.validationCallback(uri, function (isValid) {\n                    if (_this._rowsTimeoutId) {\n                        return;\n                    }\n                    if (isValid) {\n                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);\n                    }\n                });\n            }\n            else {\n                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);\n            }\n        };\n        var this_1 = this;\n        while ((match = rex.exec(text)) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {\n        var _this = this;\n        var width = CharWidth_1.getStringCellWidth(uri);\n        var x1 = x % this._terminal.cols;\n        var y1 = y + Math.floor(x / this._terminal.cols);\n        var x2 = (x1 + width) % this._terminal.cols;\n        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);\n        if (x2 === 0) {\n            x2 = this._terminal.cols;\n            y2--;\n        }\n        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {\n            if (matcher.handler) {\n                return matcher.handler(e, uri);\n            }\n            window.open(uri, '_blank');\n        }, function () {\n            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.add('xterm-cursor-pointer');\n        }, function (e) {\n            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            if (matcher.hoverTooltipCallback) {\n                matcher.hoverTooltipCallback(e, uri);\n            }\n        }, function () {\n            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.remove('xterm-cursor-pointer');\n            if (matcher.hoverLeaveCallback) {\n                matcher.hoverLeaveCallback();\n            }\n        }, function (e) {\n            if (matcher.willLinkActivate) {\n                return matcher.willLinkActivate(e, uri);\n            }\n            return true;\n        }));\n    };\n    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {\n        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };\n    };\n    Linkifier.TIME_BEFORE_LINKIFY = 200;\n    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;\n    return Linkifier;\n}());\nexports.Linkifier = Linkifier;\n//# sourceMappingURL=Linkifier.js.map\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper_1 = __webpack_require__(15);\nvar Browser = __webpack_require__(4);\nvar SelectionModel_1 = __webpack_require__(43);\nvar AltClickHandler_1 = __webpack_require__(55);\nvar BufferLine_1 = __webpack_require__(1);\nvar EventEmitter2_1 = __webpack_require__(2);\nvar DRAG_SCROLL_MAX_THRESHOLD = 50;\nvar DRAG_SCROLL_MAX_SPEED = 15;\nvar DRAG_SCROLL_INTERVAL = 50;\nvar ALT_CLICK_MOVE_CURSOR_TIME = 500;\nvar WORD_SEPARATORS = ' ()[]{}\\'\"';\nvar NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nvar ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\nvar SelectionManager = (function () {\n    function SelectionManager(_terminal, _charMeasure) {\n        this._terminal = _terminal;\n        this._charMeasure = _charMeasure;\n        this._enabled = true;\n        this._workCell = new BufferLine_1.CellData();\n        this._onLinuxMouseSelection = new EventEmitter2_1.EventEmitter2();\n        this._onRedrawRequest = new EventEmitter2_1.EventEmitter2();\n        this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        this._initListeners();\n        this.enable();\n        this._model = new SelectionModel_1.SelectionModel(_terminal);\n        this._activeSelectionMode = 0;\n    }\n    Object.defineProperty(SelectionManager.prototype, \"onLinuxMouseSelection\", {\n        get: function () { return this._onLinuxMouseSelection.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onRedrawRequest\", {\n        get: function () { return this._onRedrawRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.dispose = function () {\n        this._removeMouseDownListeners();\n    };\n    Object.defineProperty(SelectionManager.prototype, \"_buffer\", {\n        get: function () {\n            return this._terminal.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype._initListeners = function () {\n        var _this = this;\n        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };\n        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };\n        this.initBuffersListeners();\n    };\n    SelectionManager.prototype.initBuffersListeners = function () {\n        var _this = this;\n        this._trimListener = this._terminal.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n        this._terminal.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });\n    };\n    SelectionManager.prototype.disable = function () {\n        this.clearSelection();\n        this._enabled = false;\n    };\n    SelectionManager.prototype.enable = function () {\n        this._enabled = true;\n    };\n    Object.defineProperty(SelectionManager.prototype, \"selectionStart\", {\n        get: function () { return this._model.finalSelectionStart; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionEnd\", {\n        get: function () { return this._model.finalSelectionEnd; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"hasSelection\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return false;\n            }\n            return start[0] !== end[0] || start[1] !== end[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionText\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return '';\n            }\n            var result = [];\n            if (this._activeSelectionMode === 3) {\n                if (start[0] === end[0]) {\n                    return '';\n                }\n                for (var i = start[1]; i <= end[1]; i++) {\n                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);\n                    result.push(lineText);\n                }\n            }\n            else {\n                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n                for (var i = start[1] + 1; i <= end[1] - 1; i++) {\n                    var bufferLine = this._buffer.lines.get(i);\n                    var lineText = this._buffer.translateBufferLineToString(i, true);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n                if (start[1] !== end[1]) {\n                    var bufferLine = this._buffer.lines.get(end[1]);\n                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n            }\n            var formattedResult = result.map(function (line) {\n                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n            }).join(Browser.isMSWindows ? '\\r\\n' : '\\n');\n            return formattedResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.clearSelection = function () {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.refresh = function (isLinuxMouseSelection) {\n        var _this = this;\n        if (!this._refreshAnimationFrame) {\n            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });\n        }\n        if (Browser.isLinux && isLinuxMouseSelection) {\n            var selectionText = this.selectionText;\n            if (selectionText.length) {\n                this._onLinuxMouseSelection.fire(this.selectionText);\n            }\n        }\n    };\n    SelectionManager.prototype._refresh = function () {\n        this._refreshAnimationFrame = null;\n        this._onRedrawRequest.fire({\n            start: this._model.finalSelectionStart,\n            end: this._model.finalSelectionEnd,\n            columnSelectMode: this._activeSelectionMode === 3\n        });\n    };\n    SelectionManager.prototype.isClickInSelection = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        var start = this._model.finalSelectionStart;\n        var end = this._model.finalSelectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return this._areCoordsInSelection(coords, start, end);\n    };\n    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {\n        return (coords[1] > start[1] && coords[1] < end[1]) ||\n            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n    };\n    SelectionManager.prototype.selectWordAtCursor = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._selectWordAt(coords, false);\n            this._model.selectionEnd = null;\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype.selectAll = function () {\n        this._model.isSelectAllActive = true;\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.selectLines = function (start, end) {\n        this._model.clearSelection();\n        start = Math.max(start, 0);\n        end = Math.min(end, this._terminal.buffer.lines.length - 1);\n        this._model.selectionStart = [0, start];\n        this._model.selectionEnd = [this._terminal.cols, end];\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype._onTrim = function (amount) {\n        var needsRefresh = this._model.onTrim(amount);\n        if (needsRefresh) {\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._getMouseBufferCoords = function (event) {\n        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);\n        if (!coords) {\n            return null;\n        }\n        coords[0]--;\n        coords[1]--;\n        coords[1] += this._terminal.buffer.ydisp;\n        return coords;\n    };\n    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {\n        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];\n        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);\n        if (offset >= 0 && offset <= terminalHeight) {\n            return 0;\n        }\n        if (offset > terminalHeight) {\n            offset -= terminalHeight;\n        }\n        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n        offset /= DRAG_SCROLL_MAX_THRESHOLD;\n        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n    };\n    SelectionManager.prototype.shouldForceSelection = function (event) {\n        if (Browser.isMac) {\n            return event.altKey && this._terminal.options.macOptionClickForcesSelection;\n        }\n        return event.shiftKey;\n    };\n    SelectionManager.prototype.onMouseDown = function (event) {\n        this._mouseDownTimeStamp = event.timeStamp;\n        if (event.button === 2 && this.hasSelection) {\n            return;\n        }\n        if (event.button !== 0) {\n            return;\n        }\n        if (!this._enabled) {\n            if (!this.shouldForceSelection(event)) {\n                return;\n            }\n            event.stopPropagation();\n        }\n        event.preventDefault();\n        this._dragScrollAmount = 0;\n        if (this._enabled && event.shiftKey) {\n            this._onIncrementalClick(event);\n        }\n        else {\n            if (event.detail === 1) {\n                this._onSingleClick(event);\n            }\n            else if (event.detail === 2) {\n                this._onDoubleClick(event);\n            }\n            else if (event.detail === 3) {\n                this._onTripleClick(event);\n            }\n        }\n        this._addMouseDownListeners();\n        this.refresh(true);\n    };\n    SelectionManager.prototype._addMouseDownListeners = function () {\n        var _this = this;\n        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);\n    };\n    SelectionManager.prototype._removeMouseDownListeners = function () {\n        if (this._terminal.element.ownerDocument) {\n            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n        }\n        clearInterval(this._dragScrollIntervalTimer);\n        this._dragScrollIntervalTimer = null;\n    };\n    SelectionManager.prototype._onIncrementalClick = function (event) {\n        if (this._model.selectionStart) {\n            this._model.selectionEnd = this._getMouseBufferCoords(event);\n        }\n    };\n    SelectionManager.prototype._onSingleClick = function (event) {\n        this._model.selectionStartLength = 0;\n        this._model.isSelectAllActive = false;\n        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;\n        this._model.selectionStart = this._getMouseBufferCoords(event);\n        if (!this._model.selectionStart) {\n            return;\n        }\n        this._model.selectionEnd = null;\n        var line = this._buffer.lines.get(this._model.selectionStart[1]);\n        if (!line) {\n            return;\n        }\n        if (line.length >= this._model.selectionStart[0]) {\n            return;\n        }\n        if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n            this._model.selectionStart[0]++;\n        }\n    };\n    SelectionManager.prototype._onDoubleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 1;\n            this._selectWordAt(coords, true);\n        }\n    };\n    SelectionManager.prototype._onTripleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 2;\n            this._selectLineAt(coords[1]);\n        }\n    };\n    SelectionManager.prototype.shouldColumnSelect = function (event) {\n        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);\n    };\n    SelectionManager.prototype._onMouseMove = function (event) {\n        event.stopImmediatePropagation();\n        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n        this._model.selectionEnd = this._getMouseBufferCoords(event);\n        if (!this._model.selectionEnd) {\n            this.refresh(true);\n            return;\n        }\n        if (this._activeSelectionMode === 2) {\n            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n                this._model.selectionEnd[0] = 0;\n            }\n            else {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n        }\n        else if (this._activeSelectionMode === 1) {\n            this._selectToWordAt(this._model.selectionEnd);\n        }\n        this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n        if (this._activeSelectionMode !== 3) {\n            if (this._dragScrollAmount > 0) {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n            else if (this._dragScrollAmount < 0) {\n                this._model.selectionEnd[0] = 0;\n            }\n        }\n        if (this._model.selectionEnd[1] < this._buffer.lines.length) {\n            if (this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0]) === 0) {\n                this._model.selectionEnd[0]++;\n            }\n        }\n        if (!previousSelectionEnd ||\n            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype._dragScroll = function () {\n        if (this._dragScrollAmount) {\n            this._terminal.scrollLines(this._dragScrollAmount, false);\n            if (this._dragScrollAmount > 0) {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = this._terminal.cols;\n                }\n                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);\n            }\n            else {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = 0;\n                }\n                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;\n            }\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._onMouseUp = function (event) {\n        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n        this._removeMouseDownListeners();\n        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {\n            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();\n        }\n        else if (this.hasSelection) {\n            this._onSelectionChange.fire();\n        }\n    };\n    SelectionManager.prototype._onBufferActivate = function (e) {\n        var _this = this;\n        this.clearSelection();\n        if (this._trimListener) {\n            this._trimListener.dispose();\n        }\n        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n    };\n    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {\n        var charIndex = coords[0];\n        for (var i = 0; coords[0] >= i; i++) {\n            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;\n            if (this._workCell.getWidth() === 0) {\n                charIndex--;\n            }\n            else if (length_1 > 1 && coords[0] !== i) {\n                charIndex += length_1 - 1;\n            }\n        }\n        return charIndex;\n    };\n    SelectionManager.prototype.setSelection = function (col, row, length) {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this._model.selectionStart = [col, row];\n        this._model.selectionStartLength = length;\n        this.refresh();\n    };\n    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {\n        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }\n        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }\n        if (coords[0] >= this._terminal.cols) {\n            return null;\n        }\n        var bufferLine = this._buffer.lines.get(coords[1]);\n        if (!bufferLine) {\n            return null;\n        }\n        var line = this._buffer.translateBufferLineToString(coords[1], false);\n        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n        var endIndex = startIndex;\n        var charOffset = coords[0] - startIndex;\n        var leftWideCharCount = 0;\n        var rightWideCharCount = 0;\n        var leftLongCharOffset = 0;\n        var rightLongCharOffset = 0;\n        if (line.charAt(startIndex) === ' ') {\n            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n                startIndex--;\n            }\n            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n                endIndex++;\n            }\n        }\n        else {\n            var startCol = coords[0];\n            var endCol = coords[0];\n            if (bufferLine.getWidth(startCol) === 0) {\n                leftWideCharCount++;\n                startCol--;\n            }\n            if (bufferLine.getWidth(endCol) === 2) {\n                rightWideCharCount++;\n                endCol++;\n            }\n            var length_2 = bufferLine.getString(endCol).length;\n            if (length_2 > 1) {\n                rightLongCharOffset += length_2 - 1;\n                endIndex += length_2 - 1;\n            }\n            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n                bufferLine.loadCell(startCol - 1, this._workCell);\n                var length_3 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 0) {\n                    leftWideCharCount++;\n                    startCol--;\n                }\n                else if (length_3 > 1) {\n                    leftLongCharOffset += length_3 - 1;\n                    startIndex -= length_3 - 1;\n                }\n                startIndex--;\n                startCol--;\n            }\n            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n                bufferLine.loadCell(endCol + 1, this._workCell);\n                var length_4 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 2) {\n                    rightWideCharCount++;\n                    endCol++;\n                }\n                else if (length_4 > 1) {\n                    rightLongCharOffset += length_4 - 1;\n                    endIndex += length_4 - 1;\n                }\n                endIndex++;\n                endCol++;\n            }\n        }\n        endIndex++;\n        var start = startIndex\n            + charOffset\n            - leftWideCharCount\n            + leftLongCharOffset;\n        var length = Math.min(this._terminal.cols, endIndex\n            - startIndex\n            + leftWideCharCount\n            + rightWideCharCount\n            - leftLongCharOffset\n            - rightLongCharOffset);\n        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n            return null;\n        }\n        if (followWrappedLinesAbove) {\n            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {\n                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);\n                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);\n                    if (previousLineWordPosition) {\n                        var offset = this._terminal.cols - previousLineWordPosition.start;\n                        start -= offset;\n                        length += offset;\n                    }\n                }\n            }\n        }\n        if (followWrappedLinesBelow) {\n            if (start + length === this._terminal.cols && bufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);\n                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {\n                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n                    if (nextLineWordPosition) {\n                        length += nextLineWordPosition.length;\n                    }\n                }\n            }\n        }\n        return { start: start, length: length };\n    };\n    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {\n        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n        if (wordPosition) {\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                coords[1]--;\n            }\n            this._model.selectionStart = [wordPosition.start, coords[1]];\n            this._model.selectionStartLength = wordPosition.length;\n        }\n    };\n    SelectionManager.prototype._selectToWordAt = function (coords) {\n        var wordPosition = this._getWordAt(coords, true);\n        if (wordPosition) {\n            var endRow = coords[1];\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                endRow--;\n            }\n            if (!this._model.areSelectionValuesReversed()) {\n                while (wordPosition.start + wordPosition.length > this._terminal.cols) {\n                    wordPosition.length -= this._terminal.cols;\n                    endRow++;\n                }\n            }\n            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n        }\n    };\n    SelectionManager.prototype._isCharWordSeparator = function (cell) {\n        if (cell.getWidth() === 0) {\n            return false;\n        }\n        return WORD_SEPARATORS.indexOf(cell.getChars()) >= 0;\n    };\n    SelectionManager.prototype._selectLineAt = function (line) {\n        var wrappedRange = this._buffer.getWrappedRangeForLine(line);\n        this._model.selectionStart = [0, wrappedRange.first];\n        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];\n        this._model.selectionStartLength = 0;\n    };\n    return SelectionManager;\n}());\nexports.SelectionManager = SelectionManager;\n//# sourceMappingURL=SelectionManager.js.map\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectionModel = (function () {\n    function SelectionModel(_terminal) {\n        this._terminal = _terminal;\n        this.clearSelection();\n    }\n    SelectionModel.prototype.clearSelection = function () {\n        this.selectionStart = null;\n        this.selectionEnd = null;\n        this.isSelectAllActive = false;\n        this.selectionStartLength = 0;\n    };\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionStart\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [0, 0];\n            }\n            if (!this.selectionEnd || !this.selectionStart) {\n                return this.selectionStart;\n            }\n            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionEnd\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];\n            }\n            if (!this.selectionStart) {\n                return null;\n            }\n            if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n                if (startPlusLength > this._terminal.cols) {\n                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];\n                }\n                return [startPlusLength, this.selectionStart[1]];\n            }\n            if (this.selectionStartLength) {\n                if (this.selectionEnd[1] === this.selectionStart[1]) {\n                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n                }\n            }\n            return this.selectionEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionModel.prototype.areSelectionValuesReversed = function () {\n        var start = this.selectionStart;\n        var end = this.selectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n    };\n    SelectionModel.prototype.onTrim = function (amount) {\n        if (this.selectionStart) {\n            this.selectionStart[1] -= amount;\n        }\n        if (this.selectionEnd) {\n            this.selectionEnd[1] -= amount;\n        }\n        if (this.selectionEnd && this.selectionEnd[1] < 0) {\n            this.clearSelection();\n            return true;\n        }\n        if (this.selectionStart && this.selectionStart[1] < 0) {\n            this.selectionStart[1] = 0;\n        }\n        return false;\n    };\n    return SelectionModel;\n}());\nexports.SelectionModel = SelectionModel;\n//# sourceMappingURL=SelectionModel.js.map\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';\nvar SoundManager = (function () {\n    function SoundManager(_terminal) {\n        this._terminal = _terminal;\n    }\n    Object.defineProperty(SoundManager, \"audioContext\", {\n        get: function () {\n            if (!SoundManager._audioContext) {\n                var audioContextCtor = window.AudioContext || window.webkitAudioContext;\n                if (!audioContextCtor) {\n                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n                    return null;\n                }\n                SoundManager._audioContext = new audioContextCtor();\n            }\n            return SoundManager._audioContext;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SoundManager.prototype.playBellSound = function () {\n        var ctx = SoundManager.audioContext;\n        if (!ctx) {\n            return;\n        }\n        var bellAudioSource = ctx.createBufferSource();\n        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {\n            bellAudioSource.buffer = buffer;\n            bellAudioSource.connect(ctx.destination);\n            bellAudioSource.start(0);\n        });\n    };\n    SoundManager.prototype._base64ToArrayBuffer = function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    };\n    SoundManager.prototype._removeMimeType = function (dataURI) {\n        var splitUri = dataURI.split(',');\n        return splitUri[1];\n    };\n    return SoundManager;\n}());\nexports.SoundManager = SoundManager;\n//# sourceMappingURL=SoundManager.js.map\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferSet_1 = __webpack_require__(35);\nvar Buffer_1 = __webpack_require__(13);\nvar CompositionHelper_1 = __webpack_require__(38);\nvar EventEmitter_1 = __webpack_require__(50);\nvar Viewport_1 = __webpack_require__(46);\nvar Clipboard_1 = __webpack_require__(37);\nvar EscapeSequences_1 = __webpack_require__(7);\nvar InputHandler_1 = __webpack_require__(40);\nvar Renderer_1 = __webpack_require__(61);\nvar Linkifier_1 = __webpack_require__(41);\nvar SelectionManager_1 = __webpack_require__(42);\nvar CharMeasure_1 = __webpack_require__(36);\nvar Browser = __webpack_require__(4);\nvar Lifecycle_1 = __webpack_require__(5);\nvar Strings = __webpack_require__(9);\nvar MouseHelper_1 = __webpack_require__(15);\nvar SoundManager_1 = __webpack_require__(44);\nvar MouseZoneManager_1 = __webpack_require__(16);\nvar AccessibilityManager_1 = __webpack_require__(34);\nvar CharAtlasCache_1 = __webpack_require__(19);\nvar DomRenderer_1 = __webpack_require__(68);\nvar Keyboard_1 = __webpack_require__(54);\nvar Clone_1 = __webpack_require__(49);\nvar EventEmitter2_1 = __webpack_require__(2);\nvar BufferLine_1 = __webpack_require__(1);\nvar WindowsMode_1 = __webpack_require__(47);\nvar ColorManager_1 = __webpack_require__(21);\nvar RenderCoordinator_1 = __webpack_require__(60);\nvar document = (typeof window !== 'undefined') ? window.document : null;\nvar WRITE_BUFFER_PAUSE_THRESHOLD = 5;\nvar WRITE_TIMEOUT_MS = 12;\nvar WRITE_BUFFER_LENGTH_THRESHOLD = 50;\nvar MINIMUM_COLS = 2;\nvar MINIMUM_ROWS = 1;\nvar CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\nvar DEFAULT_OPTIONS = {\n    cols: 80,\n    rows: 24,\n    convertEol: false,\n    termName: 'xterm',\n    cursorBlink: false,\n    cursorStyle: 'block',\n    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,\n    bellStyle: 'none',\n    drawBoldTextInBrightColors: true,\n    enableBold: true,\n    experimentalCharAtlas: 'static',\n    fontFamily: 'courier-new, courier, monospace',\n    fontSize: 15,\n    fontWeight: 'normal',\n    fontWeightBold: 'bold',\n    lineHeight: 1.0,\n    letterSpacing: 0,\n    scrollback: 1000,\n    screenKeys: false,\n    screenReaderMode: false,\n    debug: false,\n    macOptionIsMeta: false,\n    macOptionClickForcesSelection: false,\n    cancelEvents: false,\n    disableStdin: false,\n    useFlowControl: false,\n    allowTransparency: false,\n    tabStopWidth: 8,\n    theme: undefined,\n    rightClickSelectsWord: Browser.isMac,\n    rendererType: 'canvas',\n    windowsMode: false\n};\nvar Terminal = (function (_super) {\n    __extends(Terminal, _super);\n    function Terminal(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.browser = Browser;\n        _this._blankLine = null;\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onKey = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onResize = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        _this._onTitleChange = new EventEmitter2_1.EventEmitter2();\n        _this.options = Clone_1.clone(options);\n        _this._setup();\n        _this.onCursorMove(function () { return _this.emit('cursormove'); });\n        _this.onData(function (e) { return _this.emit('data', e); });\n        _this.onKey(function (e) { return _this.emit('key', e.key, e.domEvent); });\n        _this.onLineFeed(function () { return _this.emit('linefeed'); });\n        _this.onRender(function (e) { return _this.emit('refresh', e); });\n        _this.onResize(function (e) { return _this.emit('resize', e); });\n        _this.onSelectionChange(function () { return _this.emit('selection'); });\n        _this.onScroll(function (e) { return _this.emit('scroll', e); });\n        _this.onTitleChange(function (e) { return _this.emit('title', e); });\n        return _this;\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._onKey.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._onResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._onTitleChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this._windowsMode) {\n            this._windowsMode.dispose();\n            this._windowsMode = undefined;\n        }\n        this._customKeyEventHandler = null;\n        CharAtlasCache_1.removeTerminalFromCache(this);\n        this.handler = function () { };\n        this.write = function () { };\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n    Terminal.prototype.destroy = function () {\n        this.dispose();\n    };\n    Terminal.prototype._setup = function () {\n        var _this = this;\n        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {\n            if (_this.options[key] === null || _this.options[key] === undefined) {\n                _this.options[key] = DEFAULT_OPTIONS[key];\n            }\n        });\n        this._parent = document ? document.body : null;\n        this.cols = Math.max(this.options.cols, MINIMUM_COLS);\n        this.rows = Math.max(this.options.rows, MINIMUM_ROWS);\n        if (this.options.handler) {\n            this.onData(this.options.handler);\n        }\n        this.cursorState = 0;\n        this.cursorHidden = false;\n        this._customKeyEventHandler = null;\n        this.applicationKeypad = false;\n        this.applicationCursor = false;\n        this.originMode = false;\n        this.insertMode = false;\n        this.wraparoundMode = true;\n        this.bracketedPasteMode = false;\n        this.charset = null;\n        this.gcharset = null;\n        this.glevel = 0;\n        this.charsets = [null];\n        this.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this._eraseAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.params = [];\n        this.currentParam = 0;\n        this.writeBuffer = [];\n        this.writeBufferUtf8 = [];\n        this._writeInProgress = false;\n        this._xoffSentToCatchUp = false;\n        this._userScrolling = false;\n        this._inputHandler = new InputHandler_1.InputHandler(this);\n        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });\n        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });\n        this._inputHandler.onData(function (e) { return _this._onData.fire(e); });\n        this.register(this._inputHandler);\n        this.selectionManager = this.selectionManager || null;\n        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);\n        this._mouseZoneManager = this._mouseZoneManager || null;\n        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);\n        this.buffers = new BufferSet_1.BufferSet(this);\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n            this.selectionManager.initBuffersListeners();\n        }\n        if (this.options.windowsMode) {\n            this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () {\n            return this.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.eraseAttrData = function () {\n        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);\n        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;\n        return this._eraseAttrData;\n    };\n    Terminal.prototype.focus = function () {\n        if (this.textarea) {\n            this.textarea.focus({ preventScroll: true });\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"isFocused\", {\n        get: function () {\n            return document.activeElement === this.textarea && document.hasFocus();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.getOption = function (key) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        return this.options[key];\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {\n            console.error(\"Option \\\"\" + key + \"\\\" can only be set in the constructor\");\n        }\n        if (this.options[key] === value) {\n            return;\n        }\n        switch (key) {\n            case 'bellStyle':\n                if (!value) {\n                    value = 'none';\n                }\n                break;\n            case 'cursorStyle':\n                if (!value) {\n                    value = 'block';\n                }\n                break;\n            case 'fontWeight':\n                if (!value) {\n                    value = 'normal';\n                }\n                break;\n            case 'fontWeightBold':\n                if (!value) {\n                    value = 'bold';\n                }\n                break;\n            case 'lineHeight':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n            case 'rendererType':\n                if (!value) {\n                    value = 'canvas';\n                }\n                break;\n            case 'tabStopWidth':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n                break;\n            case 'theme':\n                this._setTheme(value);\n                break;\n            case 'scrollback':\n                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);\n                if (value < 0) {\n                    console.warn(key + \" cannot be less than 0, value: \" + value);\n                    return;\n                }\n                if (this.options[key] !== value) {\n                    var newBufferLength = this.rows + value;\n                    if (this.buffer.lines.length > newBufferLength) {\n                        var amountToTrim = this.buffer.lines.length - newBufferLength;\n                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);\n                        this.buffer.lines.trimStart(amountToTrim);\n                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);\n                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);\n                        if (needsRefresh) {\n                            this.refresh(0, this.rows - 1);\n                        }\n                    }\n                }\n                break;\n        }\n        this.options[key] = value;\n        switch (key) {\n            case 'fontFamily':\n            case 'fontSize':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this.charMeasure.measure(this.options);\n                }\n                break;\n            case 'drawBoldTextInBrightColors':\n            case 'experimentalCharAtlas':\n            case 'enableBold':\n            case 'letterSpacing':\n            case 'lineHeight':\n            case 'fontWeight':\n            case 'fontWeightBold':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this._renderCoordinator.onResize(this.cols, this.rows);\n                    this.refresh(0, this.rows - 1);\n                }\n                break;\n            case 'rendererType':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.setRenderer(this._createRenderer());\n                }\n                break;\n            case 'scrollback':\n                this.buffers.resize(this.cols, this.rows);\n                if (this.viewport) {\n                    this.viewport.syncScrollArea();\n                }\n                break;\n            case 'screenReaderMode':\n                if (value) {\n                    if (!this._accessibilityManager && this._renderCoordinator) {\n                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n                    }\n                }\n                else {\n                    if (this._accessibilityManager) {\n                        this._accessibilityManager.dispose();\n                        this._accessibilityManager = null;\n                    }\n                }\n                break;\n            case 'tabStopWidth':\n                this.buffers.setupTabStops();\n                break;\n            case 'windowsMode':\n                if (value) {\n                    if (!this._windowsMode) {\n                        this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n                    }\n                }\n                else {\n                    if (this._windowsMode) {\n                        this._windowsMode.dispose();\n                        this._windowsMode = undefined;\n                    }\n                }\n                break;\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.onOptionsChanged();\n        }\n    };\n    Terminal.prototype._onTextAreaFocus = function (ev) {\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[I');\n        }\n        this.updateCursorStyle(ev);\n        this.element.classList.add('focus');\n        this.showCursor();\n        this.emit('focus');\n    };\n    Terminal.prototype.blur = function () {\n        return this.textarea.blur();\n    };\n    Terminal.prototype._onTextAreaBlur = function () {\n        this.textarea.value = '';\n        this.refresh(this.buffer.y, this.buffer.y);\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[O');\n        }\n        this.element.classList.remove('focus');\n        this.emit('blur');\n    };\n    Terminal.prototype._initGlobal = function () {\n        var _this = this;\n        this._bindKeys();\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {\n            if (!_this.hasSelection()) {\n                return;\n            }\n            Clipboard_1.copyHandler(event, _this, _this.selectionManager);\n        }));\n        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));\n        if (Browser.isFirefox) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {\n                if (event.button === 2) {\n                    Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n                }\n            }));\n        }\n        else {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {\n                Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n            }));\n        }\n        if (Browser.isLinux) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {\n                if (event.button === 1) {\n                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this);\n                }\n            }));\n        }\n    };\n    Terminal.prototype._bindKeys = function () {\n        var _this = this;\n        var self = this;\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyDown(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyPress(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {\n            if (!wasModifierKeyOnlyEvent(ev)) {\n                _this.focus();\n            }\n            self._keyUp(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));\n        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));\n        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));\n    };\n    Terminal.prototype.open = function (parent) {\n        var _this = this;\n        this._parent = parent || this._parent;\n        if (!this._parent) {\n            throw new Error('Terminal requires a parent element.');\n        }\n        this._context = this._parent.ownerDocument.defaultView;\n        this._document = this._parent.ownerDocument;\n        this.element = this._document.createElement('div');\n        this.element.dir = 'ltr';\n        this.element.classList.add('terminal');\n        this.element.classList.add('xterm');\n        this.element.setAttribute('tabindex', '0');\n        this._parent.appendChild(this.element);\n        var fragment = document.createDocumentFragment();\n        this._viewportElement = document.createElement('div');\n        this._viewportElement.classList.add('xterm-viewport');\n        fragment.appendChild(this._viewportElement);\n        this._viewportScrollArea = document.createElement('div');\n        this._viewportScrollArea.classList.add('xterm-scroll-area');\n        this._viewportElement.appendChild(this._viewportScrollArea);\n        this.screenElement = document.createElement('div');\n        this.screenElement.classList.add('xterm-screen');\n        this._helperContainer = document.createElement('div');\n        this._helperContainer.classList.add('xterm-helpers');\n        this.screenElement.appendChild(this._helperContainer);\n        fragment.appendChild(this.screenElement);\n        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);\n        this.register(this._mouseZoneManager);\n        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));\n        this.linkifier.attachToDom(this._mouseZoneManager);\n        this.textarea = document.createElement('textarea');\n        this.textarea.classList.add('xterm-helper-textarea');\n        this.textarea.setAttribute('aria-label', Strings.promptLabel);\n        this.textarea.setAttribute('aria-multiline', 'false');\n        this.textarea.setAttribute('autocorrect', 'off');\n        this.textarea.setAttribute('autocapitalize', 'off');\n        this.textarea.setAttribute('spellcheck', 'false');\n        this.textarea.tabIndex = 0;\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));\n        this._helperContainer.appendChild(this.textarea);\n        this._compositionView = document.createElement('div');\n        this._compositionView.classList.add('composition-view');\n        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);\n        this._helperContainer.appendChild(this._compositionView);\n        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);\n        this.element.appendChild(fragment);\n        this._theme = this.options.theme;\n        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);\n        this._colorManager.setTheme(this._theme);\n        var renderer = this._createRenderer();\n        this._renderCoordinator = new RenderCoordinator_1.RenderCoordinator(renderer, this.rows, this.screenElement);\n        this._renderCoordinator.onRender(function (e) { return _this._onRender.fire(e); });\n        this.onResize(function (e) { return _this._renderCoordinator.resize(e.cols, e.rows); });\n        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure, this._renderCoordinator.dimensions);\n        this.viewport.onThemeChange(this._colorManager.colors);\n        this.register(this.viewport);\n        this.register(this.onCursorMove(function () { return _this._renderCoordinator.onCursorMove(); }));\n        this.register(this.onResize(function () { return _this._renderCoordinator.onResize(_this.cols, _this.rows); }));\n        this.register(this.addDisposableListener('blur', function () { return _this._renderCoordinator.onBlur(); }));\n        this.register(this.addDisposableListener('focus', function () { return _this._renderCoordinator.onFocus(); }));\n        this.register(this.charMeasure.onCharSizeChanged(function () { return _this._renderCoordinator.onCharSizeChanged(); }));\n        this.register(this._renderCoordinator.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));\n        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);\n        this.register(this.selectionManager.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));\n        this.register(this.selectionManager.onRedrawRequest(function (e) { return _this._renderCoordinator.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));\n        this.register(this.selectionManager.onLinuxMouseSelection(function (text) {\n            _this.textarea.value = text;\n            _this.textarea.focus();\n            _this.textarea.select();\n        }));\n        this.register(this.onScroll(function () {\n            _this.viewport.syncScrollArea();\n            _this.selectionManager.refresh();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));\n        this.mouseHelper = new MouseHelper_1.MouseHelper(this._renderCoordinator);\n        this.element.classList.toggle('enable-mouse-events', this.mouseEvents);\n        if (this.mouseEvents) {\n            this.selectionManager.disable();\n        }\n        else {\n            this.selectionManager.enable();\n        }\n        if (this.options.screenReaderMode) {\n            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n            this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function (e) { return _this._accessibilityManager.setDimensions(e); }));\n        }\n        this.charMeasure.measure(this.options);\n        this.refresh(0, this.rows - 1);\n        this._initGlobal();\n        this.bindMouse();\n    };\n    Terminal.prototype._createRenderer = function () {\n        switch (this.options.rendererType) {\n            case 'canvas':\n                return new Renderer_1.Renderer(this, this._colorManager.colors);\n                break;\n            case 'dom':\n                return new DomRenderer_1.DomRenderer(this, this._colorManager.colors);\n                break;\n            default: throw new Error(\"Unrecognized rendererType \\\"\" + this.options.rendererType + \"\\\"\");\n        }\n    };\n    Terminal.prototype._setTheme = function (theme) {\n        this._theme = theme;\n        if (this._colorManager) {\n            this._colorManager.setTheme(theme);\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.setColors(this._colorManager.colors);\n        }\n        if (this.viewport) {\n            this.viewport.onThemeChange(this._colorManager.colors);\n        }\n    };\n    Terminal.prototype.bindMouse = function () {\n        var _this = this;\n        var el = this.element;\n        var self = this;\n        var pressed = 32;\n        function sendButton(ev) {\n            var button;\n            var pos;\n            button = getButton(ev);\n            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            sendEvent(button, pos);\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    pressed = button;\n                    break;\n                case 'mouseup':\n                    pressed = 32;\n                    break;\n                case 'wheel':\n                    break;\n            }\n        }\n        function sendMove(ev) {\n            var button = pressed;\n            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            button += 32;\n            sendEvent(button, pos);\n        }\n        function encode(data, ch) {\n            if (!self.utfMouse) {\n                if (ch === 255) {\n                    data.push(0);\n                    return;\n                }\n                if (ch > 127)\n                    ch = 127;\n                data.push(ch);\n            }\n            else {\n                if (ch > 2047) {\n                    data.push(2047);\n                    return;\n                }\n                data.push(ch);\n            }\n        }\n        function sendEvent(button, pos) {\n            if (self._vt300Mouse) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                var data_1 = EscapeSequences_1.C0.ESC + '[24';\n                if (button === 0)\n                    data_1 += '1';\n                else if (button === 1)\n                    data_1 += '3';\n                else if (button === 2)\n                    data_1 += '5';\n                else if (button === 3)\n                    return;\n                else\n                    data_1 += '0';\n                data_1 += '~[' + pos.x + ',' + pos.y + ']\\r';\n                self.handler(data_1);\n                return;\n            }\n            if (self._decLocator) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                if (button === 0)\n                    button = 2;\n                else if (button === 1)\n                    button = 4;\n                else if (button === 2)\n                    button = 6;\n                else if (button === 3)\n                    button = 3;\n                self.handler(EscapeSequences_1.C0.ESC + '['\n                    + button\n                    + ';'\n                    + (button === 3 ? 4 : 0)\n                    + ';'\n                    + pos.y\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.page || 0\n                    + '&w');\n                return;\n            }\n            if (self.urxvtMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                pos.x++;\n                pos.y++;\n                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');\n                return;\n            }\n            if (self.sgrMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                self.handler(EscapeSequences_1.C0.ESC + '[<'\n                    + (((button & 3) === 3 ? button & ~3 : button) - 32)\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.y\n                    + ((button & 3) === 3 ? 'm' : 'M'));\n                return;\n            }\n            var data = [];\n            encode(data, button);\n            encode(data, pos.x);\n            encode(data, pos.y);\n            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));\n        }\n        function getButton(ev) {\n            var button;\n            var shift;\n            var meta;\n            var ctrl;\n            var mod;\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    button = ev.button !== null && ev.button !== undefined\n                        ? +ev.button\n                        : ev.which !== null && ev.which !== undefined\n                            ? ev.which - 1\n                            : null;\n                    if (Browser.isMSIE) {\n                        button = button === 1 ? 0 : button === 4 ? 1 : button;\n                    }\n                    break;\n                case 'mouseup':\n                    button = 3;\n                    break;\n                case 'DOMMouseScroll':\n                    button = ev.detail < 0\n                        ? 64\n                        : 65;\n                    break;\n                case 'wheel':\n                    button = ev.deltaY < 0\n                        ? 64\n                        : 65;\n                    break;\n            }\n            shift = ev.shiftKey ? 4 : 0;\n            meta = ev.metaKey ? 8 : 0;\n            ctrl = ev.ctrlKey ? 16 : 0;\n            mod = shift | meta | ctrl;\n            if (self.vt200Mouse) {\n                mod &= ctrl;\n            }\n            else if (!self.normalMouse) {\n                mod = 0;\n            }\n            button = (32 + (mod << 2)) + button;\n            return button;\n        }\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {\n            ev.preventDefault();\n            _this.focus();\n            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {\n                return;\n            }\n            sendButton(ev);\n            if (_this.vt200Mouse) {\n                ev.overrideType = 'mouseup';\n                sendButton(ev);\n                return _this.cancel(ev);\n            }\n            var moveHandler;\n            if (_this.normalMouse) {\n                moveHandler = function (event) {\n                    if (!_this.normalMouse) {\n                        return;\n                    }\n                    sendMove(event);\n                };\n                _this._document.addEventListener('mousemove', moveHandler);\n            }\n            var handler = function (ev) {\n                if (_this.normalMouse && !_this.x10Mouse) {\n                    sendButton(ev);\n                }\n                if (moveHandler) {\n                    _this._document.removeEventListener('mousemove', moveHandler);\n                    moveHandler = null;\n                }\n                _this._document.removeEventListener('mouseup', handler);\n                return _this.cancel(ev);\n            };\n            _this._document.addEventListener('mouseup', handler);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (!_this.mouseEvents) {\n                if (!_this.buffer.hasScrollback) {\n                    var amount = _this.viewport.getLinesScrolled(ev);\n                    if (amount === 0) {\n                        return;\n                    }\n                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n                    var data = '';\n                    for (var i = 0; i < Math.abs(amount); i++) {\n                        data += sequence;\n                    }\n                    _this.handler(data);\n                }\n                return;\n            }\n            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)\n                return;\n            sendButton(ev);\n            ev.preventDefault();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onWheel(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchStart(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchMove(ev);\n            return _this.cancel(ev);\n        }));\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        if (this._renderCoordinator) {\n            this._renderCoordinator.refreshRows(start, end);\n        }\n    };\n    Terminal.prototype._queueLinkification = function (start, end) {\n        if (this.linkifier) {\n            this.linkifier.linkifyRows(start, end);\n        }\n    };\n    Terminal.prototype.updateCursorStyle = function (ev) {\n        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {\n            this.element.classList.add('column-select');\n        }\n        else {\n            this.element.classList.remove('column-select');\n        }\n    };\n    Terminal.prototype.showCursor = function () {\n        if (!this.cursorState) {\n            this.cursorState = 1;\n            this.refresh(this.buffer.y, this.buffer.y);\n        }\n    };\n    Terminal.prototype.scroll = function (isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        var newLine;\n        newLine = this._blankLine;\n        var eraseAttr = this.eraseAttrData();\n        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);\n            this._blankLine = newLine;\n        }\n        newLine.isWrapped = isWrapped;\n        var topRow = this.buffer.ybase + this.buffer.scrollTop;\n        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;\n        if (this.buffer.scrollTop === 0) {\n            var willBufferBeTrimmed = this.buffer.lines.isFull;\n            if (bottomRow === this.buffer.lines.length - 1) {\n                if (willBufferBeTrimmed) {\n                    this.buffer.lines.recycle().copyFrom(newLine);\n                }\n                else {\n                    this.buffer.lines.push(newLine.clone());\n                }\n            }\n            else {\n                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n            }\n            if (!willBufferBeTrimmed) {\n                this.buffer.ybase++;\n                if (!this._userScrolling) {\n                    this.buffer.ydisp++;\n                }\n            }\n            else {\n                if (this._userScrolling) {\n                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);\n                }\n            }\n        }\n        else {\n            var scrollRegionHeight = bottomRow - topRow + 1;\n            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n            this.buffer.lines.set(bottomRow, newLine.clone());\n        }\n        if (!this._userScrolling) {\n            this.buffer.ydisp = this.buffer.ybase;\n        }\n        this.updateRange(this.buffer.scrollTop);\n        this.updateRange(this.buffer.scrollBottom);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {\n        if (disp < 0) {\n            if (this.buffer.ydisp === 0) {\n                return;\n            }\n            this._userScrolling = true;\n        }\n        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {\n            this._userScrolling = false;\n        }\n        var oldYdisp = this.buffer.ydisp;\n        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);\n        if (oldYdisp === this.buffer.ydisp) {\n            return;\n        }\n        if (!suppressScrollEvent) {\n            this._onScroll.fire(this.buffer.ydisp);\n        }\n        this.refresh(0, this.rows - 1);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this.scrollLines(pageCount * (this.rows - 1));\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this.scrollLines(-this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        var scrollAmount = line - this.buffer.ydisp;\n        if (scrollAmount !== 0) {\n            this.scrollLines(scrollAmount);\n        }\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBufferUtf8.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBufferUtf8.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBufferUtf8.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWriteUtf8();\n            });\n        }\n    };\n    Terminal.prototype._innerWriteUtf8 = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBufferUtf8 = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBufferUtf8.length > bufferOffset) {\n            var data = this.writeBufferUtf8[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBufferUtf8.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parseUtf8(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBufferUtf8.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBufferUtf8 = this.writeBufferUtf8.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWriteUtf8(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBufferUtf8 = [];\n        }\n    };\n    Terminal.prototype.write = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBuffer.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBuffer.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWrite();\n            });\n        }\n    };\n    Terminal.prototype._innerWrite = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBuffer = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBuffer.length > bufferOffset) {\n            var data = this.writeBuffer[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parse(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBuffer.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBuffer = this.writeBuffer.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBuffer = [];\n        }\n    };\n    Terminal.prototype.writeln = function (data) {\n        this.write(data + '\\r\\n');\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._customKeyEventHandler = customKeyEventHandler;\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._inputHandler.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._inputHandler.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n        this.refresh(0, this.rows - 1);\n        return matcherId;\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        var joinerId = this._renderCoordinator.registerCharacterJoiner(handler);\n        this.refresh(0, this.rows - 1);\n        return joinerId;\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        if (this._renderCoordinator.deregisterCharacterJoiner(joinerId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () {\n            return this.buffer.markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        if (this.buffer !== this.buffers.normal) {\n            return;\n        }\n        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this.selectionManager ? this.selectionManager.hasSelection : false;\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this.selectionManager.setSelection(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this.selectionManager ? this.selectionManager.selectionText : '';\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        if (!this.selectionManager.hasSelection) {\n            return undefined;\n        }\n        return {\n            startColumn: this.selectionManager.selectionStart[0],\n            startRow: this.selectionManager.selectionStart[1],\n            endColumn: this.selectionManager.selectionEnd[0],\n            endRow: this.selectionManager.selectionEnd[1]\n        };\n    };\n    Terminal.prototype.clearSelection = function () {\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n        }\n    };\n    Terminal.prototype.selectAll = function () {\n        if (this.selectionManager) {\n            this.selectionManager.selectAll();\n        }\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        if (this.selectionManager) {\n            this.selectionManager.selectLines(start, end);\n        }\n    };\n    Terminal.prototype._keyDown = function (event) {\n        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n            return false;\n        }\n        if (!this._compositionHelper.keydown(event)) {\n            if (this.buffer.ybase !== this.buffer.ydisp) {\n                this.scrollToBottom();\n            }\n            return false;\n        }\n        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);\n        this.updateCursorStyle(event);\n        if (result.type === 3 || result.type === 2) {\n            var scrollCount = this.rows - 1;\n            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);\n            return this.cancel(event, true);\n        }\n        if (result.type === 1) {\n            this.selectAll();\n        }\n        if (this._isThirdLevelShift(this.browser, event)) {\n            return true;\n        }\n        if (result.cancel) {\n            this.cancel(event, true);\n        }\n        if (!result.key) {\n            return true;\n        }\n        this.emit('keydown', event);\n        this._onKey.fire({ key: result.key, domEvent: event });\n        this.showCursor();\n        this.handler(result.key);\n        return this.cancel(event, true);\n    };\n    Terminal.prototype._isThirdLevelShift = function (browser, ev) {\n        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n        if (ev.type === 'keypress') {\n            return thirdLevelKey;\n        }\n        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n    };\n    Terminal.prototype.setgLevel = function (g) {\n        this.glevel = g;\n        this.charset = this.charsets[g];\n    };\n    Terminal.prototype.setgCharset = function (g, charset) {\n        this.charsets[g] = charset;\n        if (this.glevel === g) {\n            this.charset = charset;\n        }\n    };\n    Terminal.prototype._keyUp = function (ev) {\n        this.updateCursorStyle(ev);\n    };\n    Terminal.prototype._keyPress = function (ev) {\n        var key;\n        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n            return false;\n        }\n        this.cancel(ev);\n        if (ev.charCode) {\n            key = ev.charCode;\n        }\n        else if (ev.which === null || ev.which === undefined) {\n            key = ev.keyCode;\n        }\n        else if (ev.which !== 0 && ev.charCode !== 0) {\n            key = ev.which;\n        }\n        else {\n            return false;\n        }\n        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {\n            return false;\n        }\n        key = String.fromCharCode(key);\n        this.emit('keypress', key, ev);\n        this._onKey.fire({ key: key, domEvent: ev });\n        this.showCursor();\n        this.handler(key);\n        return true;\n    };\n    Terminal.prototype.bell = function () {\n        var _this = this;\n        this.emit('bell');\n        if (this._soundBell()) {\n            this.soundManager.playBellSound();\n        }\n        if (this._visualBell()) {\n            this.element.classList.add('visual-bell-active');\n            clearTimeout(this._visualBellTimer);\n            this._visualBellTimer = window.setTimeout(function () {\n                _this.element.classList.remove('visual-bell-active');\n            }, 200);\n        }\n    };\n    Terminal.prototype.log = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.log)\n            return;\n        this._context.console.log(text, data);\n    };\n    Terminal.prototype.error = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.error)\n            return;\n        this._context.console.error(text, data);\n    };\n    Terminal.prototype.resize = function (x, y) {\n        if (isNaN(x) || isNaN(y)) {\n            return;\n        }\n        if (x === this.cols && y === this.rows) {\n            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {\n                this.charMeasure.measure(this.options);\n            }\n            return;\n        }\n        if (x < MINIMUM_COLS)\n            x = MINIMUM_COLS;\n        if (y < MINIMUM_ROWS)\n            y = MINIMUM_ROWS;\n        this.buffers.resize(x, y);\n        this.cols = x;\n        this.rows = y;\n        this.buffers.setupTabStops(this.cols);\n        if (this.charMeasure) {\n            this.charMeasure.measure(this.options);\n        }\n        this.refresh(0, this.rows - 1);\n        this._onResize.fire({ cols: x, rows: y });\n    };\n    Terminal.prototype.updateRange = function (y) {\n        if (y < this._refreshStart)\n            this._refreshStart = y;\n        if (y > this._refreshEnd)\n            this._refreshEnd = y;\n    };\n    Terminal.prototype.maxRange = function () {\n        this._refreshStart = 0;\n        this._refreshEnd = this.rows - 1;\n    };\n    Terminal.prototype.clear = function () {\n        if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n            return;\n        }\n        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));\n        this.buffer.lines.length = 1;\n        this.buffer.ydisp = 0;\n        this.buffer.ybase = 0;\n        this.buffer.y = 0;\n        for (var i = 1; i < this.rows; i++) {\n            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this.refresh(0, this.rows - 1);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.is = function (term) {\n        return (this.options.termName + '').indexOf(term) === 0;\n    };\n    Terminal.prototype.handler = function (data) {\n        if (this.options.disableStdin) {\n            return;\n        }\n        if (this.selectionManager && this.selectionManager.hasSelection) {\n            this.selectionManager.clearSelection();\n        }\n        if (this.buffer.ybase !== this.buffer.ydisp) {\n            this.scrollToBottom();\n        }\n        this._onData.fire(data);\n    };\n    Terminal.prototype.handleTitle = function (title) {\n        this._onTitleChange.fire(title);\n    };\n    Terminal.prototype.index = function () {\n        this.buffer.y++;\n        if (this.buffer.y > this.buffer.scrollBottom) {\n            this.buffer.y--;\n            this.scroll();\n        }\n        if (this.buffer.x >= this.cols) {\n            this.buffer.x--;\n        }\n    };\n    Terminal.prototype.reverseIndex = function () {\n        if (this.buffer.y === this.buffer.scrollTop) {\n            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;\n            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);\n            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttrData()));\n            this.updateRange(this.buffer.scrollTop);\n            this.updateRange(this.buffer.scrollBottom);\n        }\n        else {\n            this.buffer.y--;\n        }\n    };\n    Terminal.prototype.reset = function () {\n        this.options.rows = this.rows;\n        this.options.cols = this.cols;\n        var customKeyEventHandler = this._customKeyEventHandler;\n        var inputHandler = this._inputHandler;\n        var cursorState = this.cursorState;\n        var writeBuffer = this.writeBuffer;\n        var writeBufferUtf8 = this.writeBufferUtf8;\n        var writeInProgress = this._writeInProgress;\n        var xoffSentToCatchUp = this._xoffSentToCatchUp;\n        var userScrolling = this._userScrolling;\n        this._setup();\n        this._customKeyEventHandler = customKeyEventHandler;\n        this._inputHandler = inputHandler;\n        this.cursorState = cursorState;\n        this.writeBuffer = writeBuffer;\n        this.writeBufferUtf8 = writeBufferUtf8;\n        this._writeInProgress = writeInProgress;\n        this._xoffSentToCatchUp = xoffSentToCatchUp;\n        this._userScrolling = userScrolling;\n        this.refresh(0, this.rows - 1);\n        if (this.viewport) {\n            this.viewport.syncScrollArea();\n        }\n    };\n    Terminal.prototype.tabSet = function () {\n        this.buffer.tabs[this.buffer.x] = true;\n    };\n    Terminal.prototype.cancel = function (ev, force) {\n        if (!this.options.cancelEvents && !force) {\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    };\n    Terminal.prototype._visualBell = function () {\n        return false;\n    };\n    Terminal.prototype._soundBell = function () {\n        return this.options.bellStyle === 'sound';\n    };\n    return Terminal;\n}(EventEmitter_1.EventEmitter));\nexports.Terminal = Terminal;\nfunction wasModifierKeyOnlyEvent(ev) {\n    return ev.keyCode === 16 ||\n        ev.keyCode === 17 ||\n        ev.keyCode === 18;\n}\n//# sourceMappingURL=Terminal.js.map\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = __webpack_require__(0);\nvar Lifecycle_2 = __webpack_require__(5);\nvar FALLBACK_SCROLL_BAR_WIDTH = 15;\nvar Viewport = (function (_super) {\n    __extends(Viewport, _super);\n    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._viewportElement = _viewportElement;\n        _this._scrollArea = _scrollArea;\n        _this._charMeasure = _charMeasure;\n        _this._dimensions = _dimensions;\n        _this.scrollBarWidth = 0;\n        _this._currentRowHeight = 0;\n        _this._lastRecordedBufferLength = 0;\n        _this._lastRecordedViewportHeight = 0;\n        _this._lastRecordedBufferHeight = 0;\n        _this._lastScrollTop = 0;\n        _this._wheelPartialScroll = 0;\n        _this._refreshAnimationFrame = null;\n        _this._ignoreNextScrollEvent = false;\n        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));\n        setTimeout(function () { return _this.syncScrollArea(); }, 0);\n        return _this;\n    }\n    Viewport.prototype.onDimensionsChance = function (dimensions) {\n        this._dimensions = dimensions;\n    };\n    Viewport.prototype.onThemeChange = function (colors) {\n        this._viewportElement.style.backgroundColor = colors.background.css;\n    };\n    Viewport.prototype._refresh = function () {\n        var _this = this;\n        if (this._refreshAnimationFrame === null) {\n            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });\n        }\n    };\n    Viewport.prototype._innerRefresh = function () {\n        if (this._charMeasure.height > 0) {\n            this._currentRowHeight = this._dimensions.scaledCellHeight / window.devicePixelRatio;\n            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._dimensions.canvasHeight);\n            if (this._lastRecordedBufferHeight !== newBufferHeight) {\n                this._lastRecordedBufferHeight = newBufferHeight;\n                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n            }\n        }\n        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._viewportElement.scrollTop !== scrollTop) {\n            this._ignoreNextScrollEvent = true;\n            this._viewportElement.scrollTop = scrollTop;\n        }\n        this._refreshAnimationFrame = null;\n    };\n    Viewport.prototype.syncScrollArea = function () {\n        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {\n            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;\n            this._refresh();\n            return;\n        }\n        if (this._lastRecordedViewportHeight !== this._dimensions.canvasHeight) {\n            this._refresh();\n            return;\n        }\n        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._lastScrollTop !== newScrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n            this._refresh();\n            return;\n        }\n    };\n    Viewport.prototype._onScroll = function (ev) {\n        this._lastScrollTop = this._viewportElement.scrollTop;\n        if (!this._viewportElement.offsetParent) {\n            return;\n        }\n        if (this._ignoreNextScrollEvent) {\n            this._ignoreNextScrollEvent = false;\n            return;\n        }\n        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n        var diff = newRow - this._terminal.buffer.ydisp;\n        this._terminal.scrollLines(diff, true);\n    };\n    Viewport.prototype.onWheel = function (ev) {\n        var amount = this._getPixelsScrolled(ev);\n        if (amount === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += amount;\n        ev.preventDefault();\n    };\n    Viewport.prototype._getPixelsScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n            amount *= this._currentRowHeight;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._currentRowHeight * this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.getLinesScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n            amount /= this._currentRowHeight + 0.0;\n            this._wheelPartialScroll += amount;\n            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n            this._wheelPartialScroll %= 1;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.onTouchStart = function (ev) {\n        this._lastTouchY = ev.touches[0].pageY;\n    };\n    Viewport.prototype.onTouchMove = function (ev) {\n        var deltaY = this._lastTouchY - ev.touches[0].pageY;\n        this._lastTouchY = ev.touches[0].pageY;\n        if (deltaY === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += deltaY;\n        ev.preventDefault();\n    };\n    return Viewport;\n}(Lifecycle_1.Disposable));\nexports.Viewport = Viewport;\n//# sourceMappingURL=Viewport.js.map\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = __webpack_require__(1);\nfunction applyWindowsMode(terminal) {\n    return terminal.onLineFeed(function () {\n        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);\n        var lastChar = line.get(terminal.cols - 1);\n        var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);\n        nextLine.isWrapped = (lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.NULL_CELL_CODE && lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.WHITESPACE_CELL_CODE);\n    });\n}\nexports.applyWindowsMode = applyWindowsMode;\n//# sourceMappingURL=WindowsMode.js.map\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = __webpack_require__(2);\nvar CircularList = (function () {\n    function CircularList(_maxLength) {\n        this._maxLength = _maxLength;\n        this.onDeleteEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onInsertEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onTrimEmitter = new EventEmitter2_1.EventEmitter2();\n        this._array = new Array(this._maxLength);\n        this._startIndex = 0;\n        this._length = 0;\n    }\n    Object.defineProperty(CircularList.prototype, \"onDelete\", {\n        get: function () { return this.onDeleteEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onInsert\", {\n        get: function () { return this.onInsertEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onTrim\", {\n        get: function () { return this.onTrimEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (newMaxLength) {\n            if (this._maxLength === newMaxLength) {\n                return;\n            }\n            var newArray = new Array(newMaxLength);\n            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {\n                newArray[i] = this._array[this._getCyclicIndex(i)];\n            }\n            this._array = newArray;\n            this._maxLength = newMaxLength;\n            this._startIndex = 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"length\", {\n        get: function () {\n            return this._length;\n        },\n        set: function (newLength) {\n            if (newLength > this._length) {\n                for (var i = this._length; i < newLength; i++) {\n                    this._array[i] = undefined;\n                }\n            }\n            this._length = newLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.get = function (index) {\n        return this._array[this._getCyclicIndex(index)];\n    };\n    CircularList.prototype.set = function (index, value) {\n        this._array[this._getCyclicIndex(index)] = value;\n    };\n    CircularList.prototype.push = function (value) {\n        this._array[this._getCyclicIndex(this._length)] = value;\n        if (this._length === this._maxLength) {\n            this._startIndex = ++this._startIndex % this._maxLength;\n            this.onTrimEmitter.fire(1);\n        }\n        else {\n            this._length++;\n        }\n    };\n    CircularList.prototype.recycle = function () {\n        if (this._length !== this._maxLength) {\n            throw new Error('Can only recycle when the buffer is full');\n        }\n        this._startIndex = ++this._startIndex % this._maxLength;\n        this.onTrimEmitter.fire(1);\n        return this._array[this._getCyclicIndex(this._length - 1)];\n    };\n    Object.defineProperty(CircularList.prototype, \"isFull\", {\n        get: function () {\n            return this._length === this._maxLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.pop = function () {\n        return this._array[this._getCyclicIndex(this._length-- - 1)];\n    };\n    CircularList.prototype.splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        if (deleteCount) {\n            for (var i = start; i < this._length - deleteCount; i++) {\n                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n            }\n            this._length -= deleteCount;\n        }\n        for (var i = this._length - 1; i >= start; i--) {\n            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n        }\n        for (var i = 0; i < items.length; i++) {\n            this._array[this._getCyclicIndex(start + i)] = items[i];\n        }\n        if (this._length + items.length > this._maxLength) {\n            var countToTrim = (this._length + items.length) - this._maxLength;\n            this._startIndex += countToTrim;\n            this._length = this._maxLength;\n            this.onTrimEmitter.fire(countToTrim);\n        }\n        else {\n            this._length += items.length;\n        }\n    };\n    CircularList.prototype.trimStart = function (count) {\n        if (count > this._length) {\n            count = this._length;\n        }\n        this._startIndex += count;\n        this._length -= count;\n        this.onTrimEmitter.fire(count);\n    };\n    CircularList.prototype.shiftElements = function (start, count, offset) {\n        if (count <= 0) {\n            return;\n        }\n        if (start < 0 || start >= this._length) {\n            throw new Error('start argument out of range');\n        }\n        if (start + offset < 0) {\n            throw new Error('Cannot shift elements in list beyond index 0');\n        }\n        if (offset > 0) {\n            for (var i = count - 1; i >= 0; i--) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n            var expandListBy = (start + count + offset) - this._length;\n            if (expandListBy > 0) {\n                this._length += expandListBy;\n                while (this._length > this._maxLength) {\n                    this._length--;\n                    this._startIndex++;\n                    this.onTrimEmitter.fire(1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < count; i++) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n        }\n    };\n    CircularList.prototype._getCyclicIndex = function (index) {\n        return (this._startIndex + index) % this._maxLength;\n    };\n    return CircularList;\n}());\nexports.CircularList = CircularList;\n//# sourceMappingURL=CircularList.js.map\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction clone(val, depth) {\n    if (depth === void 0) { depth = 5; }\n    if (typeof val !== 'object') {\n        return val;\n    }\n    if (val === null) {\n        return null;\n    }\n    var clonedObject = Array.isArray(val) ? [] : {};\n    for (var key in val) {\n        clonedObject[key] = depth <= 1 ? val[key] : clone(val[key], depth - 1);\n    }\n    return clonedObject;\n}\nexports.clone = clone;\n//# sourceMappingURL=Clone.js.map\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = __webpack_require__(0);\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter() {\n        var _this = _super.call(this) || this;\n        _this._events = _this._events || {};\n        return _this;\n    }\n    EventEmitter.prototype.on = function (type, listener) {\n        this._events[type] = this._events[type] || [];\n        this._events[type].push(listener);\n    };\n    EventEmitter.prototype.addDisposableListener = function (type, handler) {\n        var _this = this;\n        this.on(type, handler);\n        var disposed = false;\n        return {\n            dispose: function () {\n                if (disposed) {\n                    return;\n                }\n                _this.off(type, handler);\n                disposed = true;\n            }\n        };\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var i = obj.length;\n        while (i--) {\n            if (obj[i] === listener) {\n                obj.splice(i, 1);\n                return;\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllListeners = function (type) {\n        if (this._events[type]) {\n            delete this._events[type];\n        }\n    };\n    EventEmitter.prototype.emit = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n        }\n    };\n    EventEmitter.prototype.emitMayRemoveListeners = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n            i -= length - obj.length;\n            length = obj.length;\n        }\n    };\n    EventEmitter.prototype.listeners = function (type) {\n        return this._events[type] || [];\n    };\n    EventEmitter.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._events = {};\n    };\n    return EventEmitter;\n}(Lifecycle_1.Disposable));\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {\n    var toRemove = [];\n    for (var y = 0; y < lines.length - 1; y++) {\n        var i = y;\n        var nextLine = lines.get(++i);\n        if (!nextLine.isWrapped) {\n            continue;\n        }\n        var wrappedLines = [lines.get(y)];\n        while (i < lines.length && nextLine.isWrapped) {\n            wrappedLines.push(nextLine);\n            nextLine = lines.get(++i);\n        }\n        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n            y += wrappedLines.length - 1;\n            continue;\n        }\n        var destLineIndex = 0;\n        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n        var srcLineIndex = 1;\n        var srcCol = 0;\n        while (srcLineIndex < wrappedLines.length) {\n            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n            var srcRemainingCells = srcTrimmedTineLength - srcCol;\n            var destRemainingCells = newCols - destCol;\n            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n            destCol += cellsToCopy;\n            if (destCol === newCols) {\n                destLineIndex++;\n                destCol = 0;\n            }\n            srcCol += cellsToCopy;\n            if (srcCol === srcTrimmedTineLength) {\n                srcLineIndex++;\n                srcCol = 0;\n            }\n            if (destCol === 0 && destLineIndex !== 0) {\n                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n                }\n            }\n        }\n        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n        var countToRemove = 0;\n        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {\n            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {\n                countToRemove++;\n            }\n            else {\n                break;\n            }\n        }\n        if (countToRemove > 0) {\n            toRemove.push(y + wrappedLines.length - countToRemove);\n            toRemove.push(countToRemove);\n        }\n        y += wrappedLines.length - 1;\n    }\n    return toRemove;\n}\nexports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;\nfunction reflowLargerCreateNewLayout(lines, toRemove) {\n    var layout = [];\n    var nextToRemoveIndex = 0;\n    var nextToRemoveStart = toRemove[nextToRemoveIndex];\n    var countRemovedSoFar = 0;\n    for (var i = 0; i < lines.length; i++) {\n        if (nextToRemoveStart === i) {\n            var countToRemove = toRemove[++nextToRemoveIndex];\n            lines.onDeleteEmitter.fire({\n                index: i - countRemovedSoFar,\n                amount: countToRemove\n            });\n            i += countToRemove - 1;\n            countRemovedSoFar += countToRemove;\n            nextToRemoveStart = toRemove[++nextToRemoveIndex];\n        }\n        else {\n            layout.push(i);\n        }\n    }\n    return {\n        layout: layout,\n        countRemoved: countRemovedSoFar\n    };\n}\nexports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;\nfunction reflowLargerApplyNewLayout(lines, newLayout) {\n    var newLayoutLines = [];\n    for (var i = 0; i < newLayout.length; i++) {\n        newLayoutLines.push(lines.get(newLayout[i]));\n    }\n    for (var i = 0; i < newLayoutLines.length; i++) {\n        lines.set(i, newLayoutLines[i]);\n    }\n    lines.length = newLayout.length;\n}\nexports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;\nfunction reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {\n    var newLineLengths = [];\n    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });\n    var srcCol = 0;\n    var srcLine = 0;\n    var cellsAvailable = 0;\n    while (cellsAvailable < cellsNeeded) {\n        if (cellsNeeded - cellsAvailable < newCols) {\n            newLineLengths.push(cellsNeeded - cellsAvailable);\n            break;\n        }\n        srcCol += newCols;\n        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n        if (srcCol > oldTrimmedLength) {\n            srcCol -= oldTrimmedLength;\n            srcLine++;\n        }\n        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n        if (endsWithWide) {\n            srcCol--;\n        }\n        var lineLength = endsWithWide ? newCols - 1 : newCols;\n        newLineLengths.push(lineLength);\n        cellsAvailable += lineLength;\n    }\n    return newLineLengths;\n}\nexports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;\nfunction getWrappedLineTrimmedLength(lines, i, cols) {\n    if (i === lines.length - 1) {\n        return lines[i].getTrimmedLength();\n    }\n    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n    if (endsInNull && followingLineStartsWithWide) {\n        return cols - 1;\n    }\n    return cols;\n}\nexports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;\n//# sourceMappingURL=BufferReflow.js.map\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = __webpack_require__(2);\nvar Lifecycle_1 = __webpack_require__(0);\nvar Marker = (function (_super) {\n    __extends(Marker, _super);\n    function Marker(line) {\n        var _this = _super.call(this) || this;\n        _this.line = line;\n        _this._id = Marker._nextId++;\n        _this.isDisposed = false;\n        _this._onDispose = new EventEmitter2_1.EventEmitter2();\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"onDispose\", {\n        get: function () { return this._onDispose.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.dispose = function () {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this._onDispose.fire();\n    };\n    Marker._nextId = 1;\n    return Marker;\n}(Lifecycle_1.Disposable));\nexports.Marker = Marker;\n//# sourceMappingURL=Marker.js.map\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHARSETS = {};\nexports.DEFAULT_CHARSET = exports.CHARSETS['B'];\nexports.CHARSETS['0'] = {\n    '`': '\\u25c6',\n    'a': '\\u2592',\n    'b': '\\u0009',\n    'c': '\\u000c',\n    'd': '\\u000d',\n    'e': '\\u000a',\n    'f': '\\u00b0',\n    'g': '\\u00b1',\n    'h': '\\u2424',\n    'i': '\\u000b',\n    'j': '\\u2518',\n    'k': '\\u2510',\n    'l': '\\u250c',\n    'm': '\\u2514',\n    'n': '\\u253c',\n    'o': '\\u23ba',\n    'p': '\\u23bb',\n    'q': '\\u2500',\n    'r': '\\u23bc',\n    's': '\\u23bd',\n    't': '\\u251c',\n    'u': '\\u2524',\n    'v': '\\u2534',\n    'w': '\\u252c',\n    'x': '\\u2502',\n    'y': '\\u2264',\n    'z': '\\u2265',\n    '{': '\\u03c0',\n    '|': '\\u2260',\n    '}': '\\u00a3',\n    '~': '\\u00b7'\n};\nexports.CHARSETS['A'] = {\n    '#': ''\n};\nexports.CHARSETS['B'] = null;\nexports.CHARSETS['4'] = {\n    '#': '',\n    '@': '',\n    '[': 'ij',\n    '\\\\': '',\n    ']': '|',\n    '{': '',\n    '|': 'f',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['C'] =\n    exports.CHARSETS['5'] = {\n        '[': '',\n        '\\\\': '',\n        ']': '',\n        '^': '',\n        '`': '',\n        '{': '',\n        '|': '',\n        '}': '',\n        '~': ''\n    };\nexports.CHARSETS['R'] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['Q'] = {\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '^': '',\n    '`': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['K'] = {\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['Y'] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '`': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['E'] =\n    exports.CHARSETS['6'] = {\n        '@': '',\n        '[': '',\n        '\\\\': '',\n        ']': '',\n        '^': '',\n        '`': '',\n        '{': '',\n        '|': '',\n        '}': '',\n        '~': ''\n    };\nexports.CHARSETS['Z'] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '{': '',\n    '|': '',\n    '}': ''\n};\nexports.CHARSETS['H'] =\n    exports.CHARSETS['7'] = {\n        '@': '',\n        '[': '',\n        '\\\\': '',\n        ']': '',\n        '^': '',\n        '`': '',\n        '{': '',\n        '|': '',\n        '}': '',\n        '~': ''\n    };\nexports.CHARSETS['='] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '^': '',\n    '_': '',\n    '`': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\n//# sourceMappingURL=Charsets.js.map\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = __webpack_require__(7);\nvar KEYCODE_KEY_MAPPINGS = {\n    48: ['0', ')'],\n    49: ['1', '!'],\n    50: ['2', '@'],\n    51: ['3', '#'],\n    52: ['4', '$'],\n    53: ['5', '%'],\n    54: ['6', '^'],\n    55: ['7', '&'],\n    56: ['8', '*'],\n    57: ['9', '('],\n    186: [';', ':'],\n    187: ['=', '+'],\n    188: [',', '<'],\n    189: ['-', '_'],\n    190: ['.', '>'],\n    191: ['/', '?'],\n    192: ['`', '~'],\n    219: ['[', '{'],\n    220: ['\\\\', '|'],\n    221: [']', '}'],\n    222: ['\\'', '\"']\n};\nfunction evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {\n    var result = {\n        type: 0,\n        cancel: false,\n        key: undefined\n    };\n    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n    switch (ev.keyCode) {\n        case 0:\n            if (ev.key === 'UIKeyInputUpArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OA';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[A';\n                }\n            }\n            else if (ev.key === 'UIKeyInputLeftArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OD';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[D';\n                }\n            }\n            else if (ev.key === 'UIKeyInputRightArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OC';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[C';\n                }\n            }\n            else if (ev.key === 'UIKeyInputDownArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OB';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[B';\n                }\n            }\n            break;\n        case 8:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.BS;\n                break;\n            }\n            else if (ev.altKey) {\n                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;\n                break;\n            }\n            result.key = EscapeSequences_1.C0.DEL;\n            break;\n        case 9:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[Z';\n                break;\n            }\n            result.key = EscapeSequences_1.C0.HT;\n            result.cancel = true;\n            break;\n        case 13:\n            result.key = EscapeSequences_1.C0.CR;\n            result.cancel = true;\n            break;\n        case 27:\n            result.key = EscapeSequences_1.C0.ESC;\n            result.cancel = true;\n            break;\n        case 37:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OD';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[D';\n            }\n            break;\n        case 39:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OC';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[C';\n            }\n            break;\n        case 38:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OA';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[A';\n            }\n            break;\n        case 40:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OB';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[B';\n            }\n            break;\n        case 45:\n            if (!ev.shiftKey && !ev.ctrlKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[2~';\n            }\n            break;\n        case 46:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[3~';\n            }\n            break;\n        case 36:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OH';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[H';\n            }\n            break;\n        case 35:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OF';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[F';\n            }\n            break;\n        case 33:\n            if (ev.shiftKey) {\n                result.type = 2;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[5~';\n            }\n            break;\n        case 34:\n            if (ev.shiftKey) {\n                result.type = 3;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[6~';\n            }\n            break;\n        case 112:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OP';\n            }\n            break;\n        case 113:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OQ';\n            }\n            break;\n        case 114:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OR';\n            }\n            break;\n        case 115:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OS';\n            }\n            break;\n        case 116:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[15~';\n            }\n            break;\n        case 117:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[17~';\n            }\n            break;\n        case 118:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[18~';\n            }\n            break;\n        case 119:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[19~';\n            }\n            break;\n        case 120:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[20~';\n            }\n            break;\n        case 121:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[21~';\n            }\n            break;\n        case 122:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[23~';\n            }\n            break;\n        case 123:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[24~';\n            }\n            break;\n        default:\n            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n                if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    result.key = String.fromCharCode(ev.keyCode - 64);\n                }\n                else if (ev.keyCode === 32) {\n                    result.key = String.fromCharCode(0);\n                }\n                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n                }\n                else if (ev.keyCode === 56) {\n                    result.key = String.fromCharCode(127);\n                }\n                else if (ev.keyCode === 219) {\n                    result.key = String.fromCharCode(27);\n                }\n                else if (ev.keyCode === 220) {\n                    result.key = String.fromCharCode(28);\n                }\n                else if (ev.keyCode === 221) {\n                    result.key = String.fromCharCode(29);\n                }\n            }\n            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n                if (key) {\n                    result.key = EscapeSequences_1.C0.ESC + key;\n                }\n                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);\n                }\n            }\n            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {\n                if (ev.keyCode === 65) {\n                    result.type = 1;\n                }\n            }\n            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n                result.key = ev.key;\n            }\n            else if (ev.key && ev.ctrlKey) {\n                if (ev.key === '_') {\n                    result.key = EscapeSequences_1.C0.US;\n                }\n            }\n            break;\n    }\n    return result;\n}\nexports.evaluateKeyboardEvent = evaluateKeyboardEvent;\n//# sourceMappingURL=Keyboard.js.map\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = __webpack_require__(7);\nvar AltClickHandler = (function () {\n    function AltClickHandler(_mouseEvent, _terminal) {\n        var _a;\n        this._mouseEvent = _mouseEvent;\n        this._terminal = _terminal;\n        this._lines = this._terminal.buffer.lines;\n        this._startCol = this._terminal.buffer.x;\n        this._startRow = this._terminal.buffer.y;\n        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);\n        if (coordinates) {\n            _a = coordinates.map(function (coordinate) {\n                return coordinate - 1;\n            }), this._endCol = _a[0], this._endRow = _a[1];\n        }\n    }\n    AltClickHandler.prototype.move = function () {\n        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {\n            this._terminal.handler(this._arrowSequences());\n        }\n    };\n    AltClickHandler.prototype._arrowSequences = function () {\n        if (!this._terminal.buffer.hasScrollback) {\n            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();\n        }\n        return this._moveHorizontallyOnly();\n    };\n    AltClickHandler.prototype._resetStartingRow = function () {\n        if (this._moveToRequestedRow().length === 0) {\n            return '';\n        }\n        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence(\"D\"));\n    };\n    AltClickHandler.prototype._moveToRequestedRow = function () {\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();\n        return repeat(rowsToMove, this._sequence(this._verticalDirection()));\n    };\n    AltClickHandler.prototype._moveToRequestedCol = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        var endRow = this._endRow;\n        var direction = this._horizontalDirection();\n        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === \"C\").length, this._sequence(direction));\n    };\n    AltClickHandler.prototype._moveHorizontallyOnly = function () {\n        var direction = this._horizontalDirection();\n        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));\n    };\n    AltClickHandler.prototype._wrappedRowsCount = function () {\n        var wrappedRows = 0;\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        for (var i = 0; i < Math.abs(startRow - endRow); i++) {\n            var direction = this._verticalDirection() === \"A\" ? -1 : 1;\n            if (this._lines.get(startRow + (direction * i)).isWrapped) {\n                wrappedRows++;\n            }\n        }\n        return wrappedRows;\n    };\n    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {\n        var rowCount = 0;\n        var lineWraps = this._lines.get(currentRow).isWrapped;\n        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {\n            rowCount++;\n            currentRow--;\n            lineWraps = this._lines.get(currentRow).isWrapped;\n        }\n        return rowCount;\n    };\n    AltClickHandler.prototype._horizontalDirection = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        if ((this._startCol < this._endCol &&\n            startRow <= this._endRow) ||\n            (this._startCol >= this._endCol &&\n                startRow < this._endRow)) {\n            return \"C\";\n        }\n        return \"D\";\n    };\n    AltClickHandler.prototype._verticalDirection = function () {\n        if (this._startRow > this._endRow) {\n            return \"A\";\n        }\n        return \"B\";\n    };\n    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {\n        var currentCol = startCol;\n        var currentRow = startRow;\n        var bufferStr = '';\n        while (currentCol !== endCol || currentRow !== endRow) {\n            currentCol += forward ? 1 : -1;\n            if (forward && currentCol > this._terminal.cols - 1) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n                currentCol = 0;\n                startCol = 0;\n                currentRow++;\n            }\n            else if (!forward && currentCol < 0) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);\n                currentCol = this._terminal.cols - 1;\n                startCol = currentCol;\n                currentRow--;\n            }\n        }\n        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n    };\n    AltClickHandler.prototype._sequence = function (direction) {\n        var mod = this._terminal.applicationCursor ? 'O' : '[';\n        return EscapeSequences_1.C0.ESC + mod + direction;\n    };\n    return AltClickHandler;\n}());\nexports.AltClickHandler = AltClickHandler;\nfunction repeat(count, str) {\n    count = Math.floor(count);\n    var rpt = '';\n    for (var i = 0; i < count; i++) {\n        rpt += str;\n    }\n    return rpt;\n}\n//# sourceMappingURL=AltClickHandler.js.map\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AddonManager = (function () {\n    function AddonManager() {\n        this._addons = [];\n    }\n    AddonManager.prototype.dispose = function () {\n        for (var i = this._addons.length - 1; i >= 0; i--) {\n            this._addons[i].instance.dispose();\n        }\n    };\n    AddonManager.prototype.loadAddon = function (terminal, instance) {\n        var _this = this;\n        var loadedAddon = {\n            instance: instance,\n            dispose: instance.dispose,\n            isDisposed: false\n        };\n        this._addons.push(loadedAddon);\n        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };\n        instance.activate(terminal);\n    };\n    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {\n        if (loadedAddon.isDisposed) {\n            return;\n        }\n        var index = -1;\n        for (var i = 0; i < this._addons.length; i++) {\n            if (this._addons[i] === loadedAddon) {\n                index = i;\n                break;\n            }\n        }\n        if (index === -1) {\n            throw new Error('Could not dispose an addon that has not been loaded');\n        }\n        loadedAddon.isDisposed = true;\n        loadedAddon.dispose.apply(loadedAddon.instance);\n        this._addons.splice(index, 1);\n    };\n    return AddonManager;\n}());\nexports.AddonManager = AddonManager;\n//# sourceMappingURL=AddonManager.js.map\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = __webpack_require__(8);\nvar BufferLine_1 = __webpack_require__(1);\nvar BLINK_INTERVAL = 600;\nvar CursorRenderLayer = (function (_super) {\n    __extends(CursorRenderLayer, _super);\n    function CursorRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;\n        _this._cell = new BufferLine_1.CellData();\n        _this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n        _this._cursorRenderers = {\n            'bar': _this._renderBarCursor.bind(_this),\n            'block': _this._renderBlockCursor.bind(_this),\n            'underline': _this._renderUnderlineCursor.bind(_this)\n        };\n        return _this;\n    }\n    CursorRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n    };\n    CursorRenderLayer.prototype.reset = function (terminal) {\n        this._clearCursor();\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.dispose();\n            this._cursorBlinkStateManager = null;\n            this.onOptionsChanged(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onBlur = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.pause();\n        }\n        terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n    };\n    CursorRenderLayer.prototype.onFocus = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.resume(terminal);\n        }\n        else {\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        var _this = this;\n        if (terminal.options.cursorBlink) {\n            if (!this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {\n                    _this._render(terminal, true);\n                });\n            }\n        }\n        else {\n            if (this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager.dispose();\n                this._cursorBlinkStateManager = null;\n            }\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onCursorMove = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {\n        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n            this._render(terminal, false);\n        }\n        else {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {\n        if (!terminal.cursorState || terminal.cursorHidden) {\n            this._clearCursor();\n            return;\n        }\n        var cursorY = terminal.buffer.ybase + terminal.buffer.y;\n        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {\n            this._clearCursor();\n            return;\n        }\n        terminal.buffer.lines.get(cursorY).loadCell(terminal.buffer.x, this._cell);\n        if (this._cell.content === undefined) {\n            return;\n        }\n        if (!terminal.isFocused) {\n            this._clearCursor();\n            this._ctx.save();\n            this._ctx.fillStyle = this._colors.cursor.css;\n            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n            this._ctx.restore();\n            this._state.x = terminal.buffer.x;\n            this._state.y = viewportRelativeCursorY;\n            this._state.isFocused = false;\n            this._state.style = terminal.options.cursorStyle;\n            this._state.width = this._cell.getWidth();\n            return;\n        }\n        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n            this._clearCursor();\n            return;\n        }\n        if (this._state) {\n            if (this._state.x === terminal.buffer.x &&\n                this._state.y === viewportRelativeCursorY &&\n                this._state.isFocused === terminal.isFocused &&\n                this._state.style === terminal.options.cursorStyle &&\n                this._state.width === this._cell.getWidth()) {\n                return;\n            }\n            this._clearCursor();\n        }\n        this._ctx.save();\n        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n        this._ctx.restore();\n        this._state.x = terminal.buffer.x;\n        this._state.y = viewportRelativeCursorY;\n        this._state.isFocused = false;\n        this._state.style = terminal.options.cursorStyle;\n        this._state.width = this._cell.getWidth();\n    };\n    CursorRenderLayer.prototype._clearCursor = function () {\n        if (this._state) {\n            this.clearCells(this._state.x, this._state.y, this._state.width, 1);\n            this._state = {\n                x: null,\n                y: null,\n                isFocused: null,\n                style: null,\n                width: null\n            };\n        }\n    };\n    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillLeftLineAtCell(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillCells(x, y, cell.getWidth(), 1);\n        this._ctx.fillStyle = this._colors.cursorAccent.css;\n        this.fillCharTrueColor(terminal, cell, x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillBottomLineAtCells(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.strokeStyle = this._colors.cursor.css;\n        this.strokeRectAtCell(x, y, cell.getWidth(), 1);\n        this._ctx.restore();\n    };\n    return CursorRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.CursorRenderLayer = CursorRenderLayer;\nvar CursorBlinkStateManager = (function () {\n    function CursorBlinkStateManager(terminal, _renderCallback) {\n        this._renderCallback = _renderCallback;\n        this.isCursorVisible = true;\n        if (terminal.isFocused) {\n            this._restartInterval();\n        }\n    }\n    Object.defineProperty(CursorBlinkStateManager.prototype, \"isPaused\", {\n        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },\n        enumerable: true,\n        configurable: true\n    });\n    CursorBlinkStateManager.prototype.dispose = function () {\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {\n        var _this = this;\n        if (this.isPaused) {\n            return;\n        }\n        this._animationTimeRestarted = Date.now();\n        this.isCursorVisible = true;\n        if (!this._animationFrame) {\n            this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n        }\n    };\n    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {\n        var _this = this;\n        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n        }\n        this._blinkStartTimeout = setTimeout(function () {\n            if (_this._animationTimeRestarted) {\n                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                _this._animationTimeRestarted = null;\n                if (time > 0) {\n                    _this._restartInterval(time);\n                    return;\n                }\n            }\n            _this.isCursorVisible = false;\n            _this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n            _this._blinkInterval = setInterval(function () {\n                if (_this._animationTimeRestarted) {\n                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                    _this._animationTimeRestarted = null;\n                    _this._restartInterval(time);\n                    return;\n                }\n                _this.isCursorVisible = !_this.isCursorVisible;\n                _this._animationFrame = window.requestAnimationFrame(function () {\n                    _this._renderCallback();\n                    _this._animationFrame = null;\n                });\n            }, BLINK_INTERVAL);\n        }, timeToStart);\n    };\n    CursorBlinkStateManager.prototype.pause = function () {\n        this.isCursorVisible = true;\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.resume = function (terminal) {\n        this._animationTimeRestarted = null;\n        this._restartInterval();\n        this.restartBlinkAnimation(terminal);\n    };\n    return CursorBlinkStateManager;\n}());\n//# sourceMappingURL=CursorRenderLayer.js.map\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache = (function () {\n    function GridCache() {\n        this.cache = [];\n    }\n    GridCache.prototype.resize = function (width, height) {\n        for (var x = 0; x < width; x++) {\n            if (this.cache.length <= x) {\n                this.cache.push([]);\n            }\n            for (var y = this.cache[x].length; y < height; y++) {\n                this.cache[x].push(null);\n            }\n            this.cache[x].length = height;\n        }\n        this.cache.length = width;\n    };\n    GridCache.prototype.clear = function () {\n        for (var x = 0; x < this.cache.length; x++) {\n            for (var y = 0; y < this.cache[x].length; y++) {\n                this.cache[x][y] = null;\n            }\n        }\n    };\n    return GridCache;\n}());\nexports.GridCache = GridCache;\n//# sourceMappingURL=GridCache.js.map\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = __webpack_require__(8);\nvar Types_1 = __webpack_require__(3);\nvar CharAtlasUtils_1 = __webpack_require__(12);\nvar LinkRenderLayer = (function (_super) {\n    __extends(LinkRenderLayer, _super);\n    function LinkRenderLayer(container, zIndex, colors, terminal) {\n        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;\n        _this._state = null;\n        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    LinkRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = null;\n    };\n    LinkRenderLayer.prototype.reset = function (terminal) {\n        this._clearCurrentLink();\n    };\n    LinkRenderLayer.prototype._clearCurrentLink = function () {\n        if (this._state) {\n            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n            var middleRowCount = this._state.y2 - this._state.y1 - 1;\n            if (middleRowCount > 0) {\n                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n            }\n            this.clearCells(0, this._state.y2, this._state.x2, 1);\n            this._state = null;\n        }\n    };\n    LinkRenderLayer.prototype._onLinkHover = function (e) {\n        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(e.fg)) {\n            this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        if (e.y1 === e.y2) {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n        }\n        else {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n            for (var y = e.y1 + 1; y < e.y2; y++) {\n                this.fillBottomLineAtCells(0, y, e.cols);\n            }\n            this.fillBottomLineAtCells(0, e.y2, e.x2);\n        }\n        this._state = e;\n    };\n    LinkRenderLayer.prototype._onLinkLeave = function (e) {\n        this._clearCurrentLink();\n    };\n    return LinkRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.LinkRenderLayer = LinkRenderLayer;\n//# sourceMappingURL=LinkRenderLayer.js.map\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer_1 = __webpack_require__(22);\nvar EventEmitter2_1 = __webpack_require__(2);\nvar Lifecycle_1 = __webpack_require__(0);\nvar ScreenDprMonitor_1 = __webpack_require__(23);\nvar Lifecycle_2 = __webpack_require__(5);\nvar RenderCoordinator = (function (_super) {\n    __extends(RenderCoordinator, _super);\n    function RenderCoordinator(_renderer, _rowCount, screenElement) {\n        var _this = _super.call(this) || this;\n        _this._renderer = _renderer;\n        _this._rowCount = _rowCount;\n        _this._isPaused = false;\n        _this._needsFullRefresh = false;\n        _this._canvasWidth = 0;\n        _this._canvasHeight = 0;\n        _this._onDimensionsChange = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onRefreshRequest = new EventEmitter2_1.EventEmitter2();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });\n        _this.register(_this._renderDebouncer);\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this._screenDprMonitor.setListener(function () { return _this._renderer.onDevicePixelRatioChange(); });\n        _this.register(_this._screenDprMonitor);\n        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this._renderer.onDevicePixelRatioChange(); }));\n        if ('IntersectionObserver' in window) {\n            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });\n            observer_1.observe(screenElement);\n            _this.register({ dispose: function () { return observer_1.disconnect(); } });\n        }\n        return _this;\n    }\n    Object.defineProperty(RenderCoordinator.prototype, \"onDimensionsChange\", {\n        get: function () { return this._onDimensionsChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRefreshRequest\", {\n        get: function () { return this._onRefreshRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"dimensions\", {\n        get: function () { return this._renderer.dimensions; },\n        enumerable: true,\n        configurable: true\n    });\n    RenderCoordinator.prototype._onIntersectionChange = function (entry) {\n        this._isPaused = entry.intersectionRatio === 0;\n        if (!this._isPaused && this._needsFullRefresh) {\n            this.refreshRows(0, this._rowCount - 1);\n            this._needsFullRefresh = false;\n        }\n    };\n    RenderCoordinator.prototype.refreshRows = function (start, end) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n            return;\n        }\n        this._renderDebouncer.refresh(start, end, this._rowCount);\n    };\n    RenderCoordinator.prototype._renderRows = function (start, end) {\n        this._renderer.renderRows(start, end);\n        this._onRender.fire({ start: start, end: end });\n    };\n    RenderCoordinator.prototype.resize = function (cols, rows) {\n        this._rowCount = rows;\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype.changeOptions = function () {\n        this._renderer.onOptionsChanged();\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype._fireOnCanvasResize = function () {\n        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {\n            return;\n        }\n        this._onDimensionsChange.fire(this._renderer.dimensions);\n    };\n    RenderCoordinator.prototype.setRenderer = function (renderer) {\n        this._renderer.dispose();\n        this._renderer = renderer;\n    };\n    RenderCoordinator.prototype._fullRefresh = function () {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this.refreshRows(0, this._rowCount);\n        }\n    };\n    RenderCoordinator.prototype.setColors = function (colors) {\n        this._renderer.setColors(colors);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onDevicePixelRatioChange = function () {\n        this._renderer.onDevicePixelRatioChange();\n    };\n    RenderCoordinator.prototype.onResize = function (cols, rows) {\n        this._renderer.onResize(cols, rows);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onCharSizeChanged = function () {\n        this._renderer.onCharSizeChanged();\n    };\n    RenderCoordinator.prototype.onBlur = function () {\n        this._renderer.onBlur();\n    };\n    RenderCoordinator.prototype.onFocus = function () {\n        this._renderer.onFocus();\n    };\n    RenderCoordinator.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        this._renderer.onSelectionChanged(start, end, columnSelectMode);\n    };\n    RenderCoordinator.prototype.onCursorMove = function () {\n        this._renderer.onCursorMove();\n    };\n    RenderCoordinator.prototype.onOptionsChanged = function () {\n        this._renderer.onOptionsChanged();\n    };\n    RenderCoordinator.prototype.clear = function () {\n        this._renderer.clear();\n    };\n    RenderCoordinator.prototype.registerCharacterJoiner = function (handler) {\n        return this._renderer.registerCharacterJoiner(handler);\n    };\n    RenderCoordinator.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._renderer.deregisterCharacterJoiner(joinerId);\n    };\n    return RenderCoordinator;\n}(Lifecycle_1.Disposable));\nexports.RenderCoordinator = RenderCoordinator;\n//# sourceMappingURL=RenderCoordinator.js.map\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextRenderLayer_1 = __webpack_require__(63);\nvar SelectionRenderLayer_1 = __webpack_require__(62);\nvar CursorRenderLayer_1 = __webpack_require__(57);\nvar LinkRenderLayer_1 = __webpack_require__(59);\nvar CharacterJoinerRegistry_1 = __webpack_require__(18);\nvar Lifecycle_1 = __webpack_require__(0);\nvar Renderer = (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);\n        _this._renderLayers = [\n            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this._colors, _this._characterJoinerRegistry, allowTransparency),\n            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this._colors),\n            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this._colors, _this._terminal),\n            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this._colors)\n        ];\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._devicePixelRatio = window.devicePixelRatio;\n        _this._updateDimensions();\n        _this.onOptionsChanged();\n        return _this;\n    }\n    Renderer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._renderLayers.forEach(function (l) { return l.dispose(); });\n    };\n    Renderer.prototype.onDevicePixelRatioChange = function () {\n        if (this._devicePixelRatio !== window.devicePixelRatio) {\n            this._devicePixelRatio = window.devicePixelRatio;\n            this.onResize(this._terminal.cols, this._terminal.rows);\n        }\n    };\n    Renderer.prototype.setColors = function (colors) {\n        var _this = this;\n        this._colors = colors;\n        this._renderLayers.forEach(function (l) {\n            l.setColors(_this._terminal, _this._colors);\n            l.reset(_this._terminal);\n        });\n    };\n    Renderer.prototype.onResize = function (cols, rows) {\n        var _this = this;\n        this._updateDimensions();\n        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    Renderer.prototype.onCharSizeChanged = function () {\n        this.onResize(this._terminal.cols, this._terminal.rows);\n    };\n    Renderer.prototype.onBlur = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onBlur(_this._terminal); });\n    };\n    Renderer.prototype.onFocus = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onFocus(_this._terminal); });\n    };\n    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        var _this = this;\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });\n    };\n    Renderer.prototype.onCursorMove = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });\n    };\n    Renderer.prototype.onOptionsChanged = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });\n    };\n    Renderer.prototype.clear = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.reset(_this._terminal); });\n    };\n    Renderer.prototype._runOperation = function (operation) {\n        this._renderLayers.forEach(function (l) { return operation(l); });\n    };\n    Renderer.prototype.renderRows = function (start, end) {\n        var _this = this;\n        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });\n    };\n    Renderer.prototype._updateDimensions = function () {\n        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {\n            return;\n        }\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);\n        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;\n        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n    };\n    Renderer.prototype.registerCharacterJoiner = function (handler) {\n        return this._characterJoinerRegistry.registerCharacterJoiner(handler);\n    };\n    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);\n    };\n    return Renderer;\n}(Lifecycle_1.Disposable));\nexports.Renderer = Renderer;\n//# sourceMappingURL=Renderer.js.map\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = __webpack_require__(8);\nvar SelectionRenderLayer = (function (_super) {\n    __extends(SelectionRenderLayer, _super);\n    function SelectionRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;\n        _this._clearState();\n        return _this;\n    }\n    SelectionRenderLayer.prototype._clearState = function () {\n        this._state = {\n            start: null,\n            end: null,\n            columnSelectMode: null,\n            ydisp: null\n        };\n    };\n    SelectionRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._clearState();\n    };\n    SelectionRenderLayer.prototype.reset = function (terminal) {\n        if (this._state.start && this._state.end) {\n            this._clearState();\n            this.clearAll();\n        }\n    };\n    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {\n            return;\n        }\n        this.clearAll();\n        if (!start || !end) {\n            this._clearState();\n            return;\n        }\n        var viewportStartRow = start[1] - terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        this._ctx.fillStyle = this._colors.selection.css;\n        if (columnSelectMode) {\n            var startCol = start[0];\n            var width = end[0] - startCol;\n            var height = viewportCappedEndRow - viewportCappedStartRow + 1;\n            this.fillCells(startCol, viewportCappedStartRow, width, height);\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;\n            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;\n                this.fillCells(0, viewportCappedEndRow, endCol, 1);\n            }\n        }\n        this._state.start = [start[0], start[1]];\n        this._state.end = [end[0], end[1]];\n        this._state.columnSelectMode = columnSelectMode;\n        this._state.ydisp = terminal.buffer.ydisp;\n    };\n    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {\n        return !this._areCoordinatesEqual(start, this._state.start) ||\n            !this._areCoordinatesEqual(end, this._state.end) ||\n            columnSelectMode !== this._state.columnSelectMode ||\n            ydisp !== this._state.ydisp;\n    };\n    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {\n        if (!coord1 || !coord2) {\n            return false;\n        }\n        return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n    };\n    return SelectionRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.SelectionRenderLayer = SelectionRenderLayer;\n//# sourceMappingURL=SelectionRenderLayer.js.map\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache_1 = __webpack_require__(58);\nvar BaseRenderLayer_1 = __webpack_require__(8);\nvar BufferLine_1 = __webpack_require__(1);\nvar CharacterJoinerRegistry_1 = __webpack_require__(18);\nvar TextRenderLayer = (function (_super) {\n    __extends(TextRenderLayer, _super);\n    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {\n        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;\n        _this._characterOverlapCache = {};\n        _this._workCell = new BufferLine_1.CellData();\n        _this._state = new GridCache_1.GridCache();\n        _this._characterJoinerRegistry = characterJoinerRegistry;\n        return _this;\n    }\n    TextRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        var terminalFont = this._getFont(terminal, false, false);\n        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n            this._characterWidth = dim.scaledCharWidth;\n            this._characterFont = terminalFont;\n            this._characterOverlapCache = {};\n        }\n        this._state.clear();\n        this._state.resize(terminal.cols, terminal.rows);\n    };\n    TextRenderLayer.prototype.reset = function (terminal) {\n        this._state.clear();\n        this.clearAll();\n    };\n    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {\n        for (var y = firstRow; y <= lastRow; y++) {\n            var row = y + terminal.buffer.ydisp;\n            var line = terminal.buffer.lines.get(row);\n            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];\n            for (var x = 0; x < terminal.cols; x++) {\n                line.loadCell(x, this._workCell);\n                var cell = this._workCell;\n                var isJoined = false;\n                var lastCharX = x;\n                if (cell.getWidth() === 0) {\n                    continue;\n                }\n                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n                    isJoined = true;\n                    var range = joinedRanges.shift();\n                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);\n                    lastCharX = range[1] - 1;\n                }\n                if (!isJoined && this._isOverlapping(cell)) {\n                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === BufferLine_1.NULL_CELL_CODE) {\n                        cell.content &= ~12582912;\n                        cell.content |= 2 << 22;\n                    }\n                }\n                callback(cell, x, y);\n                x = lastCharX;\n            }\n        }\n    };\n    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        var ctx = this._ctx;\n        var cols = terminal.cols;\n        var startX = 0;\n        var startY = 0;\n        var prevFillStyle = null;\n        ctx.save();\n        this._forEachCell(terminal, firstRow, lastRow, null, function (cell, x, y) {\n            var nextFillStyle = null;\n            if (cell.isInverse()) {\n                if (cell.isFgDefault()) {\n                    nextFillStyle = _this._colors.foreground.css;\n                }\n                else if (cell.isFgRGB()) {\n                    nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                }\n                else {\n                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;\n                }\n            }\n            else if (cell.isBgRGB()) {\n                nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else if (cell.isBgPalette()) {\n                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;\n            }\n            if (prevFillStyle === null) {\n                startX = x;\n                startY = y;\n            }\n            if (y !== startY) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, cols - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            else if (prevFillStyle !== nextFillStyle) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, x - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            prevFillStyle = nextFillStyle;\n        });\n        if (prevFillStyle !== null) {\n            ctx.fillStyle = prevFillStyle;\n            this.fillCells(startX, startY, cols - startX, 1);\n        }\n        ctx.restore();\n    };\n    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {\n            if (cell.isInvisible()) {\n                return;\n            }\n            _this.drawChars(terminal, cell, x, y);\n            if (cell.isUnderline()) {\n                _this._ctx.save();\n                if (cell.isInverse()) {\n                    if (cell.isBgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.background.css;\n                    }\n                    else if (cell.isBgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n                    }\n                    else {\n                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;\n                    }\n                }\n                else {\n                    if (cell.isFgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.foreground.css;\n                    }\n                    else if (cell.isFgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                    }\n                    else {\n                        var fg = cell.getFgColor();\n                        if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                            fg += 8;\n                        }\n                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;\n                    }\n                }\n                _this.fillBottomLineAtCells(x, y, cell.getWidth());\n                _this._ctx.restore();\n            }\n        });\n    };\n    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {\n        if (this._state.cache.length === 0) {\n            return;\n        }\n        if (this._charAtlas) {\n            this._charAtlas.beginFrame();\n        }\n        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);\n        this._drawBackground(terminal, firstRow, lastRow);\n        this._drawForeground(terminal, firstRow, lastRow);\n    };\n    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        this.setTransparency(terminal, terminal.options.allowTransparency);\n    };\n    TextRenderLayer.prototype._isOverlapping = function (cell) {\n        if (cell.getWidth() !== 1) {\n            return false;\n        }\n        if (cell.getCode() < 256) {\n            return false;\n        }\n        var chars = cell.getChars();\n        if (this._characterOverlapCache.hasOwnProperty(chars)) {\n            return this._characterOverlapCache[chars];\n        }\n        this._ctx.save();\n        this._ctx.font = this._characterFont;\n        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n        this._ctx.restore();\n        this._characterOverlapCache[chars] = overlaps;\n        return overlaps;\n    };\n    return TextRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.TextRenderLayer = TextRenderLayer;\n//# sourceMappingURL=TextRenderLayer.js.map\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = __webpack_require__(3);\nvar BaseCharAtlas_1 = __webpack_require__(11);\nvar ColorManager_1 = __webpack_require__(21);\nvar CharAtlasGenerator_1 = __webpack_require__(20);\nvar LRUMap_1 = __webpack_require__(65);\nvar Platform_1 = __webpack_require__(4);\nvar TEXTURE_WIDTH = 1024;\nvar TEXTURE_HEIGHT = 1024;\nvar TRANSPARENT_COLOR = {\n    css: 'rgba(0, 0, 0, 0)',\n    rgba: 0\n};\nvar FRAME_CACHE_DRAW_LIMIT = 100;\nvar GLYPH_BITMAP_COMMIT_DELAY = 100;\nfunction getGlyphCacheKey(glyph) {\n    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\nexports.getGlyphCacheKey = getGlyphCacheKey;\nvar DynamicCharAtlas = (function (_super) {\n    __extends(DynamicCharAtlas, _super);\n    function DynamicCharAtlas(document, _config) {\n        var _this = _super.call(this) || this;\n        _this._config = _config;\n        _this._drawToCacheCount = 0;\n        _this._glyphsWaitingOnBitmap = [];\n        _this._bitmapCommitTimeout = null;\n        _this._bitmap = null;\n        _this._cacheCanvas = document.createElement('canvas');\n        _this._cacheCanvas.width = TEXTURE_WIDTH;\n        _this._cacheCanvas.height = TEXTURE_HEIGHT;\n        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = _this._config.scaledCharWidth;\n        tmpCanvas.height = _this._config.scaledCharHeight;\n        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });\n        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);\n        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);\n        var capacity = _this._width * _this._height;\n        _this._cacheMap = new LRUMap_1.default(capacity);\n        _this._cacheMap.prealloc(capacity);\n        return _this;\n    }\n    DynamicCharAtlas.prototype.dispose = function () {\n        if (this._bitmapCommitTimeout !== null) {\n            window.clearTimeout(this._bitmapCommitTimeout);\n            this._bitmapCommitTimeout = null;\n        }\n    };\n    DynamicCharAtlas.prototype.beginFrame = function () {\n        this._drawToCacheCount = 0;\n    };\n    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (glyph.code === 32) {\n            return true;\n        }\n        if (!this._canCache(glyph)) {\n            return false;\n        }\n        var glyphKey = getGlyphCacheKey(glyph);\n        var cacheValue = this._cacheMap.get(glyphKey);\n        if (cacheValue !== null && cacheValue !== undefined) {\n            this._drawFromCache(ctx, cacheValue, x, y);\n            return true;\n        }\n        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n            var index = void 0;\n            if (this._cacheMap.size < this._cacheMap.capacity) {\n                index = this._cacheMap.size;\n            }\n            else {\n                index = this._cacheMap.peek().index;\n            }\n            var cacheValue_1 = this._drawToCache(glyph, index);\n            this._cacheMap.set(glyphKey, cacheValue_1);\n            this._drawFromCache(ctx, cacheValue_1, x, y);\n            return true;\n        }\n        return false;\n    };\n    DynamicCharAtlas.prototype._canCache = function (glyph) {\n        return glyph.code < 256;\n    };\n    DynamicCharAtlas.prototype._toCoordinateX = function (index) {\n        return (index % this._width) * this._config.scaledCharWidth;\n    };\n    DynamicCharAtlas.prototype._toCoordinateY = function (index) {\n        return Math.floor(index / this._width) * this._config.scaledCharHeight;\n    };\n    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {\n        if (cacheValue.isEmpty) {\n            return;\n        }\n        var cacheX = this._toCoordinateX(cacheValue.index);\n        var cacheY = this._toCoordinateY(cacheValue.index);\n        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    };\n    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {\n        if (idx < this._config.colors.ansi.length) {\n            return this._config.colors.ansi[idx];\n        }\n        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];\n    };\n    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {\n        if (this._config.allowTransparency) {\n            return TRANSPARENT_COLOR;\n        }\n        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.foreground;\n        }\n        else if (glyph.bg < 256) {\n            return this._getColorFromAnsiIndex(glyph.bg);\n        }\n        return this._config.colors.background;\n    };\n    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {\n        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.background;\n        }\n        else if (glyph.fg < 256) {\n            return this._getColorFromAnsiIndex(glyph.fg);\n        }\n        return this._config.colors.foreground;\n    };\n    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {\n        this._drawToCacheCount++;\n        this._tmpCtx.save();\n        var backgroundColor = this._getBackgroundColor(glyph);\n        this._tmpCtx.globalCompositeOperation = 'copy';\n        this._tmpCtx.fillStyle = backgroundColor.css;\n        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        this._tmpCtx.globalCompositeOperation = 'source-over';\n        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n        var fontStyle = glyph.italic ? 'italic' : '';\n        this._tmpCtx.font =\n            fontStyle + \" \" + fontWeight + \" \" + this._config.fontSize * this._config.devicePixelRatio + \"px \" + this._config.fontFamily;\n        this._tmpCtx.textBaseline = 'middle';\n        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n        if (glyph.dim) {\n            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);\n        this._tmpCtx.restore();\n        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        var isEmpty = false;\n        if (!this._config.allowTransparency) {\n            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);\n        }\n        var x = this._toCoordinateX(index);\n        var y = this._toCoordinateY(index);\n        this._cacheCtx.putImageData(imageData, x, y);\n        var cacheValue = {\n            index: index,\n            isEmpty: isEmpty,\n            inBitmap: false\n        };\n        this._addGlyphToBitmap(cacheValue);\n        return cacheValue;\n    };\n    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {\n        var _this = this;\n        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {\n            return;\n        }\n        this._glyphsWaitingOnBitmap.push(cacheValue);\n        if (this._bitmapCommitTimeout !== null) {\n            return;\n        }\n        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);\n    };\n    DynamicCharAtlas.prototype._generateBitmap = function () {\n        var _this = this;\n        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n        this._glyphsWaitingOnBitmap = [];\n        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {\n            _this._bitmap = bitmap;\n            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {\n                var value = glyphsMovingToBitmap[i];\n                value.inBitmap = true;\n            }\n        });\n        this._bitmapCommitTimeout = null;\n    };\n    return DynamicCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = DynamicCharAtlas;\n//# sourceMappingURL=DynamicCharAtlas.js.map\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRUMap = (function () {\n    function LRUMap(capacity) {\n        this.capacity = capacity;\n        this._map = {};\n        this._head = null;\n        this._tail = null;\n        this._nodePool = [];\n        this.size = 0;\n    }\n    LRUMap.prototype._unlinkNode = function (node) {\n        var prev = node.prev;\n        var next = node.next;\n        if (node === this._head) {\n            this._head = next;\n        }\n        if (node === this._tail) {\n            this._tail = prev;\n        }\n        if (prev !== null) {\n            prev.next = next;\n        }\n        if (next !== null) {\n            next.prev = prev;\n        }\n    };\n    LRUMap.prototype._appendNode = function (node) {\n        var tail = this._tail;\n        if (tail !== null) {\n            tail.next = node;\n        }\n        node.prev = tail;\n        node.next = null;\n        this._tail = node;\n        if (this._head === null) {\n            this._head = node;\n        }\n    };\n    LRUMap.prototype.prealloc = function (count) {\n        var nodePool = this._nodePool;\n        for (var i = 0; i < count; i++) {\n            nodePool.push({\n                prev: null,\n                next: null,\n                key: null,\n                value: null\n            });\n        }\n    };\n    LRUMap.prototype.get = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            this._unlinkNode(node);\n            this._appendNode(node);\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peekValue = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peek = function () {\n        var head = this._head;\n        return head === null ? null : head.value;\n    };\n    LRUMap.prototype.set = function (key, value) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            node = this._map[key];\n            this._unlinkNode(node);\n            node.value = value;\n        }\n        else if (this.size >= this.capacity) {\n            node = this._head;\n            this._unlinkNode(node);\n            delete this._map[node.key];\n            node.key = key;\n            node.value = value;\n            this._map[key] = node;\n        }\n        else {\n            var nodePool = this._nodePool;\n            if (nodePool.length > 0) {\n                node = nodePool.pop();\n                node.key = key;\n                node.value = value;\n            }\n            else {\n                node = {\n                    prev: null,\n                    next: null,\n                    key: key,\n                    value: value\n                };\n            }\n            this._map[key] = node;\n            this.size++;\n        }\n        this._appendNode(node);\n    };\n    return LRUMap;\n}());\nexports.default = LRUMap;\n//# sourceMappingURL=LRUMap.js.map\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas_1 = __webpack_require__(11);\nvar NoneCharAtlas = (function (_super) {\n    __extends(NoneCharAtlas, _super);\n    function NoneCharAtlas(document, config) {\n        return _super.call(this) || this;\n    }\n    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        return false;\n    };\n    return NoneCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = NoneCharAtlas;\n//# sourceMappingURL=NoneCharAtlas.js.map\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = __webpack_require__(3);\nvar CharAtlasGenerator_1 = __webpack_require__(20);\nvar BaseCharAtlas_1 = __webpack_require__(11);\nvar CharAtlasUtils_1 = __webpack_require__(12);\nvar Types_2 = __webpack_require__(6);\nvar StaticCharAtlas = (function (_super) {\n    __extends(StaticCharAtlas, _super);\n    function StaticCharAtlas(_document, _config) {\n        var _this = _super.call(this) || this;\n        _this._document = _document;\n        _this._config = _config;\n        _this._canvasFactory = function (width, height) {\n            var canvas = _this._document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            return canvas;\n        };\n        return _this;\n    }\n    StaticCharAtlas.prototype._doWarmUp = function () {\n        var _this = this;\n        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);\n        if (result instanceof HTMLCanvasElement) {\n            this._texture = result;\n        }\n        else {\n            result.then(function (texture) {\n                _this._texture = texture;\n            });\n        }\n    };\n    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {\n        var isAscii = glyph.code < 256;\n        var isBasicColor = glyph.fg < 16;\n        var isDefaultColor = glyph.fg === Types_2.DEFAULT_COLOR;\n        var isDefaultBackground = glyph.bg === Types_2.DEFAULT_COLOR;\n        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;\n    };\n    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (this._texture === null || this._texture === undefined) {\n            return false;\n        }\n        var colorIndex = 0;\n        if (CharAtlasUtils_1.is256Color(glyph.fg)) {\n            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);\n        }\n        else if (glyph.fg === Types_2.DEFAULT_COLOR) {\n            if (glyph.bold) {\n                colorIndex = 1;\n            }\n        }\n        if (!this._isCached(glyph, colorIndex)) {\n            return false;\n        }\n        ctx.save();\n        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n        if (glyph.dim) {\n            ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);\n        ctx.restore();\n        return true;\n    };\n    return StaticCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = StaticCharAtlas;\n//# sourceMappingURL=StaticCharAtlas.js.map\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DomRendererRowFactory_1 = __webpack_require__(69);\nvar Types_1 = __webpack_require__(3);\nvar Lifecycle_1 = __webpack_require__(0);\nvar TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nvar ROW_CONTAINER_CLASS = 'xterm-rows';\nvar FG_CLASS_PREFIX = 'xterm-fg-';\nvar BG_CLASS_PREFIX = 'xterm-bg-';\nvar FOCUS_CLASS = 'xterm-focus';\nvar SELECTION_CLASS = 'xterm-selection';\nvar nextTerminalId = 1;\nvar DomRenderer = (function (_super) {\n    __extends(DomRenderer, _super);\n    function DomRenderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        _this._terminalClass = nextTerminalId++;\n        _this._rowElements = [];\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n        _this._rowContainer.style.lineHeight = 'normal';\n        _this._rowContainer.setAttribute('aria-hidden', 'true');\n        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);\n        _this._selectionContainer = document.createElement('div');\n        _this._selectionContainer.classList.add(SELECTION_CLASS);\n        _this._selectionContainer.setAttribute('aria-hidden', 'true');\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._updateDimensions();\n        _this._injectCss();\n        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(_terminal.options, document);\n        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);\n        _this._terminal.screenElement.appendChild(_this._rowContainer);\n        _this._terminal.screenElement.appendChild(_this._selectionContainer);\n        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    DomRenderer.prototype.dispose = function () {\n        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n        this._terminal.screenElement.removeChild(this._rowContainer);\n        this._terminal.screenElement.removeChild(this._selectionContainer);\n        this._terminal.screenElement.removeChild(this._themeStyleElement);\n        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);\n        _super.prototype.dispose.call(this);\n    };\n    DomRenderer.prototype._updateDimensions = function () {\n        var _this = this;\n        this.dimensions.scaledCharWidth = this._terminal.charMeasure.width * window.devicePixelRatio;\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharLeft = 0;\n        this.dimensions.scaledCharTop = 0;\n        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;\n        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this._rowElements.forEach(function (element) {\n            element.style.width = _this.dimensions.canvasWidth + \"px\";\n            element.style.height = _this.dimensions.actualCellHeight + \"px\";\n            element.style.lineHeight = _this.dimensions.actualCellHeight + \"px\";\n            element.style.overflow = 'hidden';\n        });\n        if (!this._dimensionsStyleElement) {\n            this._dimensionsStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" span {\" +\n            \" display: inline-block;\" +\n            \" height: 100%;\" +\n            \" vertical-align: top;\" +\n            (\" width: \" + this.dimensions.actualCellWidth + \"px\") +\n            \"}\";\n        this._dimensionsStyleElement.innerHTML = styles;\n        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    DomRenderer.prototype.setColors = function (colors) {\n        this._colors = colors;\n        this._injectCss();\n    };\n    DomRenderer.prototype._injectCss = function () {\n        var _this = this;\n        if (!this._themeStyleElement) {\n            this._themeStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._themeStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" {\" +\n            (\" color: \" + this._colors.foreground.css + \";\") +\n            (\" background-color: \" + this._colors.background.css + \";\") +\n            (\" font-family: \" + this._terminal.options.fontFamily + \";\") +\n            (\" font-size: \" + this._terminal.options.fontSize + \"px;\") +\n            \"}\";\n        styles +=\n            this._terminalSelector + \" span:not(.\" + DomRendererRowFactory_1.BOLD_CLASS + \") {\" +\n                (\" font-weight: \" + this._terminal.options.fontWeight + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.BOLD_CLASS + \" {\") +\n                (\" font-weight: \" + this._terminal.options.fontWeightBold + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.ITALIC_CLASS + \" {\") +\n                \" font-style: italic;\" +\n                \"}\";\n        styles +=\n            \"@keyframes blink {\" +\n                \" 0% { opacity: 1.0; }\" +\n                \" 50% { opacity: 0.0; }\" +\n                \" 100% { opacity: 1.0; }\" +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \":not(.\" + FOCUS_CLASS + \") .\" + DomRendererRowFactory_1.CURSOR_CLASS + \" {\" +\n                (\" outline: 1px solid \" + this._colors.cursor.css + \";\") +\n                \" outline-offset: -1px;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + \" {\") +\n                \" animation: blink 1s step-end infinite;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + \" {\") +\n                (\" background-color: \" + this._colors.cursor.css + \";\") +\n                (\" color: \" + this._colors.cursorAccent.css + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + \" {\") +\n                (\" box-shadow: 1px 0 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + \" {\") +\n                (\" box-shadow: 0 -1px 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + SELECTION_CLASS + \" {\" +\n                \" position: absolute;\" +\n                \" top: 0;\" +\n                \" left: 0;\" +\n                \" z-index: 1;\" +\n                \" pointer-events: none;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + SELECTION_CLASS + \" div {\") +\n                \" position: absolute;\" +\n                (\" background-color: \" + this._colors.selection.css + \";\") +\n                \"}\";\n        this._colors.ansi.forEach(function (c, i) {\n            styles +=\n                _this._terminalSelector + \" .\" + FG_CLASS_PREFIX + i + \" { color: \" + c.css + \"; }\" +\n                    (_this._terminalSelector + \" .\" + BG_CLASS_PREFIX + i + \" { background-color: \" + c.css + \"; }\");\n        });\n        styles +=\n            this._terminalSelector + \" .\" + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { color: \" + this._colors.background.css + \"; }\" +\n                (this._terminalSelector + \" .\" + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { background-color: \" + this._colors.foreground.css + \"; }\");\n        this._themeStyleElement.innerHTML = styles;\n    };\n    DomRenderer.prototype.onDevicePixelRatioChange = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype._refreshRowElements = function (cols, rows) {\n        for (var i = this._rowElements.length; i <= rows; i++) {\n            var row = document.createElement('div');\n            this._rowContainer.appendChild(row);\n            this._rowElements.push(row);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n    };\n    DomRenderer.prototype.onResize = function (cols, rows) {\n        this._refreshRowElements(cols, rows);\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onCharSizeChanged = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onBlur = function () {\n        this._rowContainer.classList.remove(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onFocus = function () {\n        this._rowContainer.classList.add(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        while (this._selectionContainer.children.length) {\n            this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n        }\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);\n        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        var documentFragment = document.createDocumentFragment();\n        if (columnSelectMode) {\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));\n            }\n        }\n        this._selectionContainer.appendChild(documentFragment);\n    };\n    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {\n        if (rowCount === void 0) { rowCount = 1; }\n        var element = document.createElement('div');\n        element.style.height = rowCount * this.dimensions.actualCellHeight + \"px\";\n        element.style.top = row * this.dimensions.actualCellHeight + \"px\";\n        element.style.left = colStart * this.dimensions.actualCellWidth + \"px\";\n        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + \"px\";\n        return element;\n    };\n    DomRenderer.prototype.onCursorMove = function () {\n    };\n    DomRenderer.prototype.onOptionsChanged = function () {\n        this._updateDimensions();\n        this._injectCss();\n        this._terminal.refresh(0, this._terminal.rows - 1);\n    };\n    DomRenderer.prototype.clear = function () {\n        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });\n    };\n    DomRenderer.prototype.renderRows = function (start, end) {\n        var terminal = this._terminal;\n        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;\n        var cursorX = this._terminal.buffer.x;\n        var cursorBlink = this._terminal.options.cursorBlink;\n        for (var y = start; y <= end; y++) {\n            var rowElement = this._rowElements[y];\n            rowElement.innerHTML = '';\n            var row = y + terminal.buffer.ydisp;\n            var lineData = terminal.buffer.lines.get(row);\n            var cursorStyle = terminal.options.cursorStyle;\n            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));\n        }\n    };\n    Object.defineProperty(DomRenderer.prototype, \"_terminalSelector\", {\n        get: function () {\n            return \".\" + TERMINAL_CLASS_PREFIX + this._terminalClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };\n    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };\n    DomRenderer.prototype._onLinkHover = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n    };\n    DomRenderer.prototype._onLinkLeave = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n    };\n    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {\n        while (x !== x2 || y !== y2) {\n            var row = this._rowElements[y];\n            if (!row) {\n                return;\n            }\n            var span = row.children[x];\n            if (span) {\n                span.style.textDecoration = enabled ? 'underline' : 'none';\n            }\n            if (++x >= cols) {\n                x = 0;\n                y++;\n            }\n        }\n    };\n    return DomRenderer;\n}(Lifecycle_1.Disposable));\nexports.DomRenderer = DomRenderer;\n//# sourceMappingURL=DomRenderer.js.map\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = __webpack_require__(3);\nvar BufferLine_1 = __webpack_require__(1);\nexports.BOLD_CLASS = 'xterm-bold';\nexports.DIM_CLASS = 'xterm-dim';\nexports.ITALIC_CLASS = 'xterm-italic';\nexports.UNDERLINE_CLASS = 'xterm-underline';\nexports.CURSOR_CLASS = 'xterm-cursor';\nexports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\nvar DomRendererRowFactory = (function () {\n    function DomRendererRowFactory(_terminalOptions, _document) {\n        this._terminalOptions = _terminalOptions;\n        this._document = _document;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {\n        var fragment = this._document.createDocumentFragment();\n        var lineLength = 0;\n        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n            if (lineData.loadCell(x, this._workCell).getCode() !== BufferLine_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n                lineLength = x + 1;\n                break;\n            }\n        }\n        for (var x = 0; x < lineLength; x++) {\n            lineData.loadCell(x, this._workCell);\n            var width = this._workCell.getWidth();\n            if (width === 0) {\n                continue;\n            }\n            var charElement = this._document.createElement('span');\n            if (width > 1) {\n                charElement.style.width = cellWidth * width + \"px\";\n            }\n            if (isCursorRow && x === cursorX) {\n                charElement.classList.add(exports.CURSOR_CLASS);\n                if (cursorBlink) {\n                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);\n                }\n                switch (cursorStyle) {\n                    case 'bar':\n                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);\n                        break;\n                    case 'underline':\n                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);\n                        break;\n                    default:\n                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);\n                        break;\n                }\n            }\n            if (this._workCell.isBold() && this._terminalOptions.enableBold) {\n                charElement.classList.add(exports.BOLD_CLASS);\n            }\n            if (this._workCell.isItalic()) {\n                charElement.classList.add(exports.ITALIC_CLASS);\n            }\n            if (this._workCell.isDim()) {\n                charElement.classList.add(exports.DIM_CLASS);\n            }\n            if (this._workCell.isUnderline()) {\n                charElement.classList.add(exports.UNDERLINE_CLASS);\n            }\n            charElement.textContent = this._workCell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n            var swapColor = this._workCell.isInverse();\n            if (this._workCell.isFgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? 'background-' : '') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isFgPalette()) {\n                var fg = this._workCell.getFgColor();\n                if (this._workCell.isBold() && fg < 8 && !swapColor &&\n                    this._terminalOptions.enableBold && this._terminalOptions.drawBoldTextInBrightColors) {\n                    fg += 8;\n                }\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'b' : 'f') + \"g-\" + fg);\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-bg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            if (this._workCell.isBgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? '' : 'background-') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isBgPalette()) {\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'f' : 'b') + \"g-\" + this._workCell.getBgColor());\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-fg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            fragment.appendChild(charElement);\n        }\n        return fragment;\n    };\n    return DomRendererRowFactory;\n}());\nexports.DomRendererRowFactory = DomRendererRowFactory;\n//# sourceMappingURL=DomRendererRowFactory.js.map\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// pwd.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5e52a563bf48cd22c252","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable = (function () {\n    function Disposable() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    Disposable.prototype.dispose = function () {\n        this._isDisposed = true;\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables.length = 0;\n    };\n    Disposable.prototype.register = function (d) {\n        this._disposables.push(d);\n    };\n    Disposable.prototype.unregister = function (d) {\n        var index = this._disposables.indexOf(d);\n        if (index !== -1) {\n            this._disposables.splice(index, 1);\n        }\n    };\n    return Disposable;\n}());\nexports.Disposable = Disposable;\n//# sourceMappingURL=Lifecycle.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/Lifecycle.js\n// module id = 0\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextDecoder_1 = require(\"../input/TextDecoder\");\nvar Types_1 = require(\"../../common/Types\");\nexports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);\nexports.CHAR_DATA_ATTR_INDEX = 0;\nexports.CHAR_DATA_CHAR_INDEX = 1;\nexports.CHAR_DATA_WIDTH_INDEX = 2;\nexports.CHAR_DATA_CODE_INDEX = 3;\nexports.NULL_CELL_CHAR = '';\nexports.NULL_CELL_WIDTH = 1;\nexports.NULL_CELL_CODE = 0;\nexports.WHITESPACE_CELL_CHAR = ' ';\nexports.WHITESPACE_CELL_WIDTH = 1;\nexports.WHITESPACE_CELL_CODE = 32;\nvar CELL_SIZE = 3;\nvar AttributeData = (function () {\n    function AttributeData() {\n        this.fg = 0;\n        this.bg = 0;\n    }\n    AttributeData.toColorRGB = function (value) {\n        return [\n            value >>> 16 & 255,\n            value >>> 8 & 255,\n            value & 255\n        ];\n    };\n    AttributeData.fromColorRGB = function (value) {\n        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;\n    };\n    AttributeData.prototype.clone = function () {\n        var newObj = new AttributeData();\n        newObj.fg = this.fg;\n        newObj.bg = this.bg;\n        return newObj;\n    };\n    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };\n    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };\n    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };\n    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };\n    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };\n    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };\n    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };\n    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };\n    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };\n    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };\n    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };\n    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };\n    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };\n    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };\n    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };\n    AttributeData.prototype.getFgColor = function () {\n        switch (this.fg & 50331648) {\n            case 16777216:\n            case 33554432: return this.fg & 255;\n            case 50331648: return this.fg & 16777215;\n            default: return -1;\n        }\n    };\n    AttributeData.prototype.getBgColor = function () {\n        switch (this.bg & 50331648) {\n            case 16777216:\n            case 33554432: return this.bg & 255;\n            case 50331648: return this.bg & 16777215;\n            default: return -1;\n        }\n    };\n    return AttributeData;\n}());\nexports.AttributeData = AttributeData;\nexports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData());\nvar CellData = (function (_super) {\n    __extends(CellData, _super);\n    function CellData() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.content = 0;\n        _this.fg = 0;\n        _this.bg = 0;\n        _this.combinedData = '';\n        return _this;\n    }\n    CellData.fromCharData = function (value) {\n        var obj = new CellData();\n        obj.setFromCharData(value);\n        return obj;\n    };\n    CellData.prototype.isCombined = function () {\n        return this.content & 2097152;\n    };\n    CellData.prototype.getWidth = function () {\n        return this.content >> 22;\n    };\n    CellData.prototype.getChars = function () {\n        if (this.content & 2097152) {\n            return this.combinedData;\n        }\n        if (this.content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);\n        }\n        return '';\n    };\n    CellData.prototype.getCode = function () {\n        return (this.isCombined())\n            ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n            : this.content & 2097151;\n    };\n    CellData.prototype.setFromCharData = function (value) {\n        this.fg = value[exports.CHAR_DATA_ATTR_INDEX];\n        this.bg = 0;\n        var combined = false;\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 2) {\n            combined = true;\n        }\n        else if (value[exports.CHAR_DATA_CHAR_INDEX].length === 2) {\n            var code = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                var second = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n                }\n                else {\n                    combined = true;\n                }\n            }\n            else {\n                combined = true;\n            }\n        }\n        else {\n            this.content = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        if (combined) {\n            this.combinedData = value[exports.CHAR_DATA_CHAR_INDEX];\n            this.content = 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    CellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return CellData;\n}(AttributeData));\nexports.CellData = CellData;\nvar BufferLine = (function () {\n    function BufferLine(cols, fillCellData, isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        this.isWrapped = isWrapped;\n        this._combined = {};\n        this._data = new Uint32Array(cols * CELL_SIZE);\n        var cell = fillCellData || CellData.fromCharData([0, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE]);\n        for (var i = 0; i < cols; ++i) {\n            this.setCell(i, cell);\n        }\n        this.length = cols;\n    }\n    BufferLine.prototype.get = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        var cp = content & 2097151;\n        return [\n            this._data[index * CELL_SIZE + 1],\n            (content & 2097152)\n                ? this._combined[index]\n                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',\n            content >> 22,\n            (content & 2097152)\n                ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n                : cp\n        ];\n    };\n    BufferLine.prototype.set = function (index, value) {\n        this._data[index * CELL_SIZE + 1] = value[exports.CHAR_DATA_ATTR_INDEX];\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 1) {\n            this._combined[index] = value[1];\n            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        else {\n            this._data[index * CELL_SIZE + 0] = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    BufferLine.prototype.getWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] >> 22;\n    };\n    BufferLine.prototype.hasWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 12582912;\n    };\n    BufferLine.prototype.getFg = function (index) {\n        return this._data[index * CELL_SIZE + 1];\n    };\n    BufferLine.prototype.getBg = function (index) {\n        return this._data[index * CELL_SIZE + 2];\n    };\n    BufferLine.prototype.hasContent = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 4194303;\n    };\n    BufferLine.prototype.getCodePoint = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index].charCodeAt(this._combined[index].length - 1);\n        }\n        return content & 2097151;\n    };\n    BufferLine.prototype.isCombined = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 2097152;\n    };\n    BufferLine.prototype.getString = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index];\n        }\n        if (content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(content & 2097151);\n        }\n        return '';\n    };\n    BufferLine.prototype.loadCell = function (index, cell) {\n        var startIndex = index * CELL_SIZE;\n        cell.content = this._data[startIndex + 0];\n        cell.fg = this._data[startIndex + 1];\n        cell.bg = this._data[startIndex + 2];\n        if (cell.content & 2097152) {\n            cell.combinedData = this._combined[index];\n        }\n        return cell;\n    };\n    BufferLine.prototype.setCell = function (index, cell) {\n        if (cell.content & 2097152) {\n            this._combined[index] = cell.combinedData;\n        }\n        this._data[index * CELL_SIZE + 0] = cell.content;\n        this._data[index * CELL_SIZE + 1] = cell.fg;\n        this._data[index * CELL_SIZE + 2] = cell.bg;\n    };\n    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {\n        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);\n        this._data[index * CELL_SIZE + 1] = fg;\n        this._data[index * CELL_SIZE + 2] = bg;\n    };\n    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);\n        }\n        else {\n            if (content & 2097151) {\n                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);\n                content &= ~2097151;\n                content |= 2097152;\n            }\n            else {\n                content = codePoint | (1 << 22);\n            }\n            this._data[index * CELL_SIZE + 0] = content;\n        }\n    };\n    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = this.length - pos - n - 1; i >= 0; --i) {\n                this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n            }\n            for (var i = 0; i < n; ++i) {\n                this.setCell(pos + i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = 0; i < this.length - pos - n; ++i) {\n                this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n            }\n            for (var i = this.length - n; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {\n        while (start < end && start < this.length) {\n            this.setCell(start++, fillCellData);\n        }\n    };\n    BufferLine.prototype.resize = function (cols, fillCellData) {\n        if (cols === this.length) {\n            return;\n        }\n        if (cols > this.length) {\n            var data = new Uint32Array(cols * CELL_SIZE);\n            if (this.length) {\n                if (cols * CELL_SIZE < this._data.length) {\n                    data.set(this._data.subarray(0, cols * CELL_SIZE));\n                }\n                else {\n                    data.set(this._data);\n                }\n            }\n            this._data = data;\n            for (var i = this.length; i < cols; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            if (cols) {\n                var data = new Uint32Array(cols * CELL_SIZE);\n                data.set(this._data.subarray(0, cols * CELL_SIZE));\n                this._data = data;\n                var keys = Object.keys(this._combined);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = parseInt(keys[i], 10);\n                    if (key >= cols) {\n                        delete this._combined[key];\n                    }\n                }\n            }\n            else {\n                this._data = new Uint32Array(0);\n                this._combined = {};\n            }\n        }\n        this.length = cols;\n    };\n    BufferLine.prototype.fill = function (fillCellData) {\n        this._combined = {};\n        for (var i = 0; i < this.length; ++i) {\n            this.setCell(i, fillCellData);\n        }\n    };\n    BufferLine.prototype.copyFrom = function (line) {\n        if (this.length !== line.length) {\n            this._data = new Uint32Array(line._data);\n        }\n        else {\n            this._data.set(line._data);\n        }\n        this.length = line.length;\n        this._combined = {};\n        for (var el in line._combined) {\n            this._combined[el] = line._combined[el];\n        }\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLine.prototype.clone = function () {\n        var newLine = new BufferLine(0);\n        newLine._data = new Uint32Array(this._data);\n        newLine.length = this.length;\n        for (var el in this._combined) {\n            newLine._combined[el] = this._combined[el];\n        }\n        newLine.isWrapped = this.isWrapped;\n        return newLine;\n    };\n    BufferLine.prototype.getTrimmedLength = function () {\n        for (var i = this.length - 1; i >= 0; --i) {\n            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {\n                return i + (this._data[i * CELL_SIZE + 0] >> 22);\n            }\n        }\n        return 0;\n    };\n    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {\n        var srcData = src._data;\n        if (applyInReverse) {\n            for (var cell = length - 1; cell >= 0; cell--) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        else {\n            for (var cell = 0; cell < length; cell++) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        var srcCombinedKeys = Object.keys(src._combined);\n        for (var i = 0; i < srcCombinedKeys.length; i++) {\n            var key = parseInt(srcCombinedKeys[i], 10);\n            if (key >= srcCol) {\n                this._combined[key - srcCol + destCol] = src._combined[key];\n            }\n        }\n    };\n    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {\n        if (trimRight === void 0) { trimRight = false; }\n        if (startCol === void 0) { startCol = 0; }\n        if (endCol === void 0) { endCol = this.length; }\n        if (trimRight) {\n            endCol = Math.min(endCol, this.getTrimmedLength());\n        }\n        var result = '';\n        while (startCol < endCol) {\n            var content = this._data[startCol * CELL_SIZE + 0];\n            var cp = content & 2097151;\n            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : exports.WHITESPACE_CELL_CHAR;\n            startCol += (content >> 22) || 1;\n        }\n        return result;\n    };\n    return BufferLine;\n}());\nexports.BufferLine = BufferLine;\n//# sourceMappingURL=BufferLine.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/core/buffer/BufferLine.js\n// module id = 1\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2 = (function () {\n    function EventEmitter2() {\n        this._listeners = [];\n    }\n    Object.defineProperty(EventEmitter2.prototype, \"event\", {\n        get: function () {\n            var _this = this;\n            if (!this._event) {\n                this._event = function (listener) {\n                    _this._listeners.push(listener);\n                    var disposable = {\n                        dispose: function () {\n                            for (var i = 0; i < _this._listeners.length; i++) {\n                                if (_this._listeners[i] === listener) {\n                                    _this._listeners.splice(i, 1);\n                                    return;\n                                }\n                            }\n                        }\n                    };\n                    return disposable;\n                };\n            }\n            return this._event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EventEmitter2.prototype.fire = function (data) {\n        var queue = [];\n        for (var i = 0; i < this._listeners.length; i++) {\n            queue.push(this._listeners[i]);\n        }\n        for (var i = 0; i < queue.length; i++) {\n            queue[i].call(undefined, data);\n        }\n    };\n    return EventEmitter2;\n}());\nexports.EventEmitter2 = EventEmitter2;\n//# sourceMappingURL=EventEmitter2.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/EventEmitter2.js\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.INVERTED_DEFAULT_COLOR = 257;\nexports.DIM_OPACITY = 0.5;\nexports.CHAR_ATLAS_CELL_SPACING = 1;\n//# sourceMappingURL=Types.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/Types.js\n// module id = 3\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode = (typeof navigator === 'undefined') ? true : false;\nvar userAgent = (isNode) ? 'node' : navigator.userAgent;\nvar platform = (isNode) ? 'node' : navigator.platform;\nexports.isFirefox = !!~userAgent.indexOf('Firefox');\nexports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');\nexports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);\nexports.isIpad = platform === 'iPad';\nexports.isIphone = platform === 'iPhone';\nexports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);\nexports.isLinux = platform.indexOf('Linux') >= 0;\nfunction contains(arr, el) {\n    return arr.indexOf(el) >= 0;\n}\n//# sourceMappingURL=Platform.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/Platform.js\n// module id = 4\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction addDisposableDomListener(node, type, handler, useCapture) {\n    node.addEventListener(type, handler, useCapture);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            node.removeEventListener(type, handler, useCapture);\n        }\n    };\n}\nexports.addDisposableDomListener = addDisposableDomListener;\n//# sourceMappingURL=Lifecycle.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/ui/Lifecycle.js\n// module id = 5\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_COLOR = 256;\n//# sourceMappingURL=Types.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/Types.js\n// module id = 6\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar C0;\n(function (C0) {\n    C0.NUL = '\\x00';\n    C0.SOH = '\\x01';\n    C0.STX = '\\x02';\n    C0.ETX = '\\x03';\n    C0.EOT = '\\x04';\n    C0.ENQ = '\\x05';\n    C0.ACK = '\\x06';\n    C0.BEL = '\\x07';\n    C0.BS = '\\x08';\n    C0.HT = '\\x09';\n    C0.LF = '\\x0a';\n    C0.VT = '\\x0b';\n    C0.FF = '\\x0c';\n    C0.CR = '\\x0d';\n    C0.SO = '\\x0e';\n    C0.SI = '\\x0f';\n    C0.DLE = '\\x10';\n    C0.DC1 = '\\x11';\n    C0.DC2 = '\\x12';\n    C0.DC3 = '\\x13';\n    C0.DC4 = '\\x14';\n    C0.NAK = '\\x15';\n    C0.SYN = '\\x16';\n    C0.ETB = '\\x17';\n    C0.CAN = '\\x18';\n    C0.EM = '\\x19';\n    C0.SUB = '\\x1a';\n    C0.ESC = '\\x1b';\n    C0.FS = '\\x1c';\n    C0.GS = '\\x1d';\n    C0.RS = '\\x1e';\n    C0.US = '\\x1f';\n    C0.SP = '\\x20';\n    C0.DEL = '\\x7f';\n})(C0 = exports.C0 || (exports.C0 = {}));\nvar C1;\n(function (C1) {\n    C1.PAD = '\\x80';\n    C1.HOP = '\\x81';\n    C1.BPH = '\\x82';\n    C1.NBH = '\\x83';\n    C1.IND = '\\x84';\n    C1.NEL = '\\x85';\n    C1.SSA = '\\x86';\n    C1.ESA = '\\x87';\n    C1.HTS = '\\x88';\n    C1.HTJ = '\\x89';\n    C1.VTS = '\\x8a';\n    C1.PLD = '\\x8b';\n    C1.PLU = '\\x8c';\n    C1.RI = '\\x8d';\n    C1.SS2 = '\\x8e';\n    C1.SS3 = '\\x8f';\n    C1.DCS = '\\x90';\n    C1.PU1 = '\\x91';\n    C1.PU2 = '\\x92';\n    C1.STS = '\\x93';\n    C1.CCH = '\\x94';\n    C1.MW = '\\x95';\n    C1.SPA = '\\x96';\n    C1.EPA = '\\x97';\n    C1.SOS = '\\x98';\n    C1.SGCI = '\\x99';\n    C1.SCI = '\\x9a';\n    C1.CSI = '\\x9b';\n    C1.ST = '\\x9c';\n    C1.OSC = '\\x9d';\n    C1.PM = '\\x9e';\n    C1.APC = '\\x9f';\n})(C1 = exports.C1 || (exports.C1 = {}));\n//# sourceMappingURL=EscapeSequences.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/data/EscapeSequences.js\n// module id = 7\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../common/Types\");\nvar Types_2 = require(\"./atlas/Types\");\nvar CharAtlasCache_1 = require(\"./atlas/CharAtlasCache\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BaseRenderLayer = (function () {\n    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {\n        this._container = _container;\n        this._alpha = _alpha;\n        this._colors = _colors;\n        this._scaledCharWidth = 0;\n        this._scaledCharHeight = 0;\n        this._scaledCellWidth = 0;\n        this._scaledCellHeight = 0;\n        this._scaledCharLeft = 0;\n        this._scaledCharTop = 0;\n        this._currentGlyphIdentifier = {\n            chars: '',\n            code: 0,\n            bg: 0,\n            fg: 0,\n            bold: false,\n            dim: false,\n            italic: false\n        };\n        this._canvas = document.createElement('canvas');\n        this._canvas.classList.add(\"xterm-\" + id + \"-layer\");\n        this._canvas.style.zIndex = zIndex.toString();\n        this._initCanvas();\n        this._container.appendChild(this._canvas);\n    }\n    BaseRenderLayer.prototype.dispose = function () {\n        this._container.removeChild(this._canvas);\n        if (this._charAtlas) {\n            this._charAtlas.dispose();\n        }\n    };\n    BaseRenderLayer.prototype._initCanvas = function () {\n        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });\n        if (!this._alpha) {\n            this.clearAll();\n        }\n    };\n    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };\n    BaseRenderLayer.prototype.onBlur = function (terminal) { };\n    BaseRenderLayer.prototype.onFocus = function (terminal) { };\n    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };\n    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };\n    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n    };\n    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {\n        this._refreshCharAtlas(terminal, colorSet);\n    };\n    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {\n        if (alpha === this._alpha) {\n            return;\n        }\n        var oldCanvas = this._canvas;\n        this._alpha = alpha;\n        this._canvas = this._canvas.cloneNode();\n        this._initCanvas();\n        this._container.replaceChild(this._canvas, oldCanvas);\n        this._refreshCharAtlas(terminal, this._colors);\n        this.onGridChanged(terminal, 0, terminal.rows - 1);\n    };\n    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {\n        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n            return;\n        }\n        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n        this._charAtlas.warmUp();\n    };\n    BaseRenderLayer.prototype.resize = function (terminal, dim) {\n        this._scaledCellWidth = dim.scaledCellWidth;\n        this._scaledCellHeight = dim.scaledCellHeight;\n        this._scaledCharWidth = dim.scaledCharWidth;\n        this._scaledCharHeight = dim.scaledCharHeight;\n        this._scaledCharLeft = dim.scaledCharLeft;\n        this._scaledCharTop = dim.scaledCharTop;\n        this._canvas.width = dim.scaledCanvasWidth;\n        this._canvas.height = dim.scaledCanvasHeight;\n        this._canvas.style.width = dim.canvasWidth + \"px\";\n        this._canvas.style.height = dim.canvasHeight + \"px\";\n        if (!this._alpha) {\n            this.clearAll();\n        }\n        this._refreshCharAtlas(terminal, this._colors);\n    };\n    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {\n        if (width === void 0) { width = 1; }\n        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {\n        this._ctx.lineWidth = window.devicePixelRatio;\n        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.clearAll = function () {\n        if (this._alpha) {\n            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n    };\n    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {\n        if (this._alpha) {\n            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n    };\n    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, cell, x, y) {\n        this._ctx.font = this._getFont(terminal, false, false);\n        this._ctx.textBaseline = 'middle';\n        this._clipRow(terminal, y);\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n    };\n    BaseRenderLayer.prototype.drawChars = function (terminal, cell, x, y) {\n        if (cell.isFgRGB() || cell.isBgRGB()) {\n            this._drawUncachedChars(terminal, cell, x, y);\n            return;\n        }\n        var fg;\n        var bg;\n        if (cell.isInverse()) {\n            fg = (cell.isBgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();\n            bg = (cell.isFgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();\n        }\n        else {\n            bg = (cell.isBgDefault()) ? Types_1.DEFAULT_COLOR : cell.getBgColor();\n            fg = (cell.isFgDefault()) ? Types_1.DEFAULT_COLOR : cell.getFgColor();\n        }\n        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Types_2.INVERTED_DEFAULT_COLOR;\n        fg += drawInBrightColor ? 8 : 0;\n        this._currentGlyphIdentifier.chars = cell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n        this._currentGlyphIdentifier.code = cell.getCode() || BufferLine_1.WHITESPACE_CELL_CODE;\n        this._currentGlyphIdentifier.bg = bg;\n        this._currentGlyphIdentifier.fg = fg;\n        this._currentGlyphIdentifier.bold = cell.isBold() && terminal.options.enableBold;\n        this._currentGlyphIdentifier.dim = !!cell.isDim();\n        this._currentGlyphIdentifier.italic = !!cell.isItalic();\n        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        if (!atlasDidDraw) {\n            this._drawUncachedChars(terminal, cell, x, y);\n        }\n    };\n    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, cell, x, y) {\n        this._ctx.save();\n        this._ctx.font = this._getFont(terminal, cell.isBold() && terminal.options.enableBold, !!cell.isItalic());\n        this._ctx.textBaseline = 'middle';\n        if (cell.isInverse()) {\n            if (cell.isBgDefault()) {\n                this._ctx.fillStyle = this._colors.background.css;\n            }\n            else if (cell.isBgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else {\n                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;\n            }\n        }\n        else {\n            if (cell.isFgDefault()) {\n                this._ctx.fillStyle = this._colors.foreground.css;\n            }\n            else if (cell.isFgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n            }\n            else {\n                var fg = cell.getFgColor();\n                if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                    fg += 8;\n                }\n                this._ctx.fillStyle = this._colors.ansi[fg].css;\n            }\n        }\n        this._clipRow(terminal, y);\n        if (cell.isDim()) {\n            this._ctx.globalAlpha = Types_2.DIM_OPACITY;\n        }\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n        this._ctx.restore();\n    };\n    BaseRenderLayer.prototype._clipRow = function (terminal, y) {\n        this._ctx.beginPath();\n        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);\n        this._ctx.clip();\n    };\n    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {\n        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n        var fontStyle = isItalic ? 'italic' : '';\n        return fontStyle + \" \" + fontWeight + \" \" + terminal.options.fontSize * window.devicePixelRatio + \"px \" + terminal.options.fontFamily;\n    };\n    return BaseRenderLayer;\n}());\nexports.BaseRenderLayer = BaseRenderLayer;\n//# sourceMappingURL=BaseRenderLayer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/BaseRenderLayer.js\n// module id = 8\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blankLine = 'Blank line';\nexports.promptLabel = 'Terminal input';\nexports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n//# sourceMappingURL=Strings.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/Strings.js\n// module id = 9\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction stringFromCodePoint(codePoint) {\n    if (codePoint > 0xFFFF) {\n        codePoint -= 0x10000;\n        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n    }\n    return String.fromCharCode(codePoint);\n}\nexports.stringFromCodePoint = stringFromCodePoint;\nfunction utf32ToString(data, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = data.length; }\n    var result = '';\n    for (var i = start; i < end; ++i) {\n        var codepoint = data[i];\n        if (codepoint > 0xFFFF) {\n            codepoint -= 0x10000;\n            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n        }\n        else {\n            result += String.fromCharCode(codepoint);\n        }\n    }\n    return result;\n}\nexports.utf32ToString = utf32ToString;\nvar StringToUtf32 = (function () {\n    function StringToUtf32() {\n        this._interim = 0;\n    }\n    StringToUtf32.prototype.clear = function () {\n        this._interim = 0;\n    };\n    StringToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var startPos = 0;\n        if (this._interim) {\n            var second = input.charCodeAt(startPos++);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                target[size++] = this._interim;\n                target[size++] = second;\n            }\n            this._interim = 0;\n        }\n        for (var i = startPos; i < length; ++i) {\n            var code = input.charCodeAt(i);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                if (++i >= length) {\n                    this._interim = code;\n                    return size;\n                }\n                var second = input.charCodeAt(i);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n                }\n                else {\n                    target[size++] = code;\n                    target[size++] = second;\n                }\n                continue;\n            }\n            target[size++] = code;\n        }\n        return size;\n    };\n    return StringToUtf32;\n}());\nexports.StringToUtf32 = StringToUtf32;\nvar Utf8ToUtf32 = (function () {\n    function Utf8ToUtf32() {\n        this.interim = new Uint8Array(3);\n    }\n    Utf8ToUtf32.prototype.clear = function () {\n        this.interim.fill(0);\n    };\n    Utf8ToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var byte1;\n        var byte2;\n        var byte3;\n        var byte4;\n        var codepoint = 0;\n        var startPos = 0;\n        if (this.interim[0]) {\n            var discardInterim = false;\n            var cp = this.interim[0];\n            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n            var pos = 0;\n            var tmp = void 0;\n            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n                cp <<= 6;\n                cp |= tmp;\n            }\n            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n            var missing = type - pos;\n            while (startPos < missing) {\n                if (startPos >= length) {\n                    return 0;\n                }\n                tmp = input[startPos++];\n                if ((tmp & 0xC0) !== 0x80) {\n                    startPos--;\n                    discardInterim = true;\n                    break;\n                }\n                else {\n                    this.interim[pos++] = tmp;\n                    cp <<= 6;\n                    cp |= tmp & 0x3F;\n                }\n            }\n            if (!discardInterim) {\n                if (type === 2) {\n                    if (cp < 0x80) {\n                        startPos--;\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else if (type === 3) {\n                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF)) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else {\n                    if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n            }\n            this.interim.fill(0);\n        }\n        var fourStop = length - 4;\n        var i = startPos;\n        while (i < length) {\n            while (i < fourStop\n                && !((byte1 = input[i]) & 0x80)\n                && !((byte2 = input[i + 1]) & 0x80)\n                && !((byte3 = input[i + 2]) & 0x80)\n                && !((byte4 = input[i + 3]) & 0x80)) {\n                target[size++] = byte1;\n                target[size++] = byte2;\n                target[size++] = byte3;\n                target[size++] = byte4;\n                i += 4;\n            }\n            byte1 = input[i++];\n            if (byte1 < 0x80) {\n                target[size++] = byte1;\n            }\n            else if ((byte1 & 0xE0) === 0xC0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n                if (codepoint < 0x80) {\n                    i--;\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF0) === 0xE0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF)) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF8) === 0xF0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    this.interim[2] = byte3;\n                    return size;\n                }\n                byte4 = input[i++];\n                if ((byte4 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else {\n            }\n        }\n        return size;\n    };\n    return Utf8ToUtf32;\n}());\nexports.Utf8ToUtf32 = Utf8ToUtf32;\n//# sourceMappingURL=TextDecoder.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/core/input/TextDecoder.js\n// module id = 10\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas = (function () {\n    function BaseCharAtlas() {\n        this._didWarmUp = false;\n    }\n    BaseCharAtlas.prototype.dispose = function () { };\n    BaseCharAtlas.prototype.warmUp = function () {\n        if (!this._didWarmUp) {\n            this._doWarmUp();\n            this._didWarmUp = true;\n        }\n    };\n    BaseCharAtlas.prototype._doWarmUp = function () { };\n    BaseCharAtlas.prototype.beginFrame = function () { };\n    return BaseCharAtlas;\n}());\nexports.default = BaseCharAtlas;\n//# sourceMappingURL=BaseCharAtlas.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/BaseCharAtlas.js\n// module id = 11\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../../common/Types\");\nfunction generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {\n    var clonedColors = {\n        foreground: colors.foreground,\n        background: colors.background,\n        cursor: null,\n        cursorAccent: null,\n        selection: null,\n        ansi: colors.ansi.slice(0, 16)\n    };\n    return {\n        type: terminal.options.experimentalCharAtlas,\n        devicePixelRatio: window.devicePixelRatio,\n        scaledCharWidth: scaledCharWidth,\n        scaledCharHeight: scaledCharHeight,\n        fontFamily: terminal.options.fontFamily,\n        fontSize: terminal.options.fontSize,\n        fontWeight: terminal.options.fontWeight,\n        fontWeightBold: terminal.options.fontWeightBold,\n        allowTransparency: terminal.options.allowTransparency,\n        colors: clonedColors\n    };\n}\nexports.generateConfig = generateConfig;\nfunction configEquals(a, b) {\n    for (var i = 0; i < a.colors.ansi.length; i++) {\n        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n            return false;\n        }\n    }\n    return a.type === b.type &&\n        a.devicePixelRatio === b.devicePixelRatio &&\n        a.fontFamily === b.fontFamily &&\n        a.fontSize === b.fontSize &&\n        a.fontWeight === b.fontWeight &&\n        a.fontWeightBold === b.fontWeightBold &&\n        a.allowTransparency === b.allowTransparency &&\n        a.scaledCharWidth === b.scaledCharWidth &&\n        a.scaledCharHeight === b.scaledCharHeight &&\n        a.colors.foreground === b.colors.foreground &&\n        a.colors.background === b.colors.background;\n}\nexports.configEquals = configEquals;\nfunction is256Color(colorCode) {\n    return colorCode < Types_1.DEFAULT_COLOR;\n}\nexports.is256Color = is256Color;\n//# sourceMappingURL=CharAtlasUtils.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/CharAtlasUtils.js\n// module id = 12\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CircularList_1 = require(\"./common/CircularList\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar BufferReflow_1 = require(\"./core/buffer/BufferReflow\");\nvar Marker_1 = require(\"./core/buffer/Marker\");\nexports.MAX_BUFFER_SIZE = 4294967295;\nvar Buffer = (function () {\n    function Buffer(_terminal, _hasScrollback) {\n        this._terminal = _terminal;\n        this._hasScrollback = _hasScrollback;\n        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.markers = [];\n        this._nullCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.NULL_CELL_CHAR, BufferLine_1.NULL_CELL_WIDTH, BufferLine_1.NULL_CELL_CODE]);\n        this._whitespaceCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.WHITESPACE_CELL_CHAR, BufferLine_1.WHITESPACE_CELL_WIDTH, BufferLine_1.WHITESPACE_CELL_CODE]);\n        this._cols = this._terminal.cols;\n        this._rows = this._terminal.rows;\n        this.clear();\n    }\n    Buffer.prototype.getNullCell = function (attr) {\n        if (attr) {\n            this._nullCell.fg = attr.fg;\n            this._nullCell.bg = attr.bg;\n        }\n        else {\n            this._nullCell.fg = 0;\n            this._nullCell.bg = 0;\n        }\n        return this._nullCell;\n    };\n    Buffer.prototype.getWhitespaceCell = function (attr) {\n        if (attr) {\n            this._whitespaceCell.fg = attr.fg;\n            this._whitespaceCell.bg = attr.bg;\n        }\n        else {\n            this._whitespaceCell.fg = 0;\n            this._whitespaceCell.bg = 0;\n        }\n        return this._whitespaceCell;\n    };\n    Buffer.prototype.getBlankLine = function (attr, isWrapped) {\n        return new BufferLine_1.BufferLine(this._terminal.cols, this.getNullCell(attr), isWrapped);\n    };\n    Object.defineProperty(Buffer.prototype, \"hasScrollback\", {\n        get: function () {\n            return this._hasScrollback && this.lines.maxLength > this._rows;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"isCursorInViewport\", {\n        get: function () {\n            var absoluteY = this.ybase + this.y;\n            var relativeY = absoluteY - this.ydisp;\n            return (relativeY >= 0 && relativeY < this._rows);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._getCorrectBufferLength = function (rows) {\n        if (!this._hasScrollback) {\n            return rows;\n        }\n        var correctBufferLength = rows + this._terminal.options.scrollback;\n        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;\n    };\n    Buffer.prototype.fillViewportRows = function (fillAttr) {\n        if (this.lines.length === 0) {\n            if (fillAttr === undefined) {\n                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;\n            }\n            var i = this._rows;\n            while (i--) {\n                this.lines.push(this.getBlankLine(fillAttr));\n            }\n        }\n    };\n    Buffer.prototype.clear = function () {\n        this.ydisp = 0;\n        this.ybase = 0;\n        this.y = 0;\n        this.x = 0;\n        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));\n        this.scrollTop = 0;\n        this.scrollBottom = this._rows - 1;\n        this.setupTabStops();\n    };\n    Buffer.prototype.resize = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var newMaxLength = this._getCorrectBufferLength(newRows);\n        if (newMaxLength > this.lines.maxLength) {\n            this.lines.maxLength = newMaxLength;\n        }\n        if (this.lines.length > 0) {\n            if (this._cols < newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n            var addToY = 0;\n            if (this._rows < newRows) {\n                for (var y = this._rows; y < newRows; y++) {\n                    if (this.lines.length < newRows + this.ybase) {\n                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                            this.ybase--;\n                            addToY++;\n                            if (this.ydisp > 0) {\n                                this.ydisp--;\n                            }\n                        }\n                        else {\n                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                        }\n                    }\n                }\n            }\n            else {\n                for (var y = this._rows; y > newRows; y--) {\n                    if (this.lines.length > newRows + this.ybase) {\n                        if (this.lines.length > this.ybase + this.y + 1) {\n                            this.lines.pop();\n                        }\n                        else {\n                            this.ybase++;\n                            this.ydisp++;\n                        }\n                    }\n                }\n            }\n            if (newMaxLength < this.lines.maxLength) {\n                var amountToTrim = this.lines.length - newMaxLength;\n                if (amountToTrim > 0) {\n                    this.lines.trimStart(amountToTrim);\n                    this.ybase = Math.max(this.ybase - amountToTrim, 0);\n                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n                }\n                this.lines.maxLength = newMaxLength;\n            }\n            this.x = Math.min(this.x, newCols - 1);\n            this.y = Math.min(this.y, newRows - 1);\n            if (addToY) {\n                this.y += addToY;\n            }\n            this.savedY = Math.min(this.savedY, newRows - 1);\n            this.savedX = Math.min(this.savedX, newCols - 1);\n            this.scrollTop = 0;\n        }\n        this.scrollBottom = newRows - 1;\n        if (this._isReflowEnabled) {\n            this._reflow(newCols, newRows);\n            if (this._cols > newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n        }\n        this._cols = newCols;\n        this._rows = newRows;\n    };\n    Object.defineProperty(Buffer.prototype, \"_isReflowEnabled\", {\n        get: function () {\n            return this._hasScrollback && !this._terminal.options.windowsMode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._reflow = function (newCols, newRows) {\n        if (this._cols === newCols) {\n            return;\n        }\n        if (newCols > this._cols) {\n            this._reflowLarger(newCols, newRows);\n        }\n        else {\n            this._reflowSmaller(newCols, newRows);\n        }\n    };\n    Buffer.prototype._reflowLarger = function (newCols, newRows) {\n        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n        if (toRemove.length > 0) {\n            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);\n            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n        }\n    };\n    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var viewportAdjustments = countRemoved;\n        while (viewportAdjustments-- > 0) {\n            if (this.ybase === 0) {\n                if (this.y > 0) {\n                    this.y--;\n                }\n                if (this.lines.length < newRows) {\n                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                }\n            }\n            else {\n                if (this.ydisp === this.ybase) {\n                    this.ydisp--;\n                }\n                this.ybase--;\n            }\n        }\n    };\n    Buffer.prototype._reflowSmaller = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var toInsert = [];\n        var countToInsert = 0;\n        for (var y = this.lines.length - 1; y >= 0; y--) {\n            var nextLine = this.lines.get(y);\n            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n                continue;\n            }\n            var wrappedLines = [nextLine];\n            while (nextLine.isWrapped && y > 0) {\n                nextLine = this.lines.get(--y);\n                wrappedLines.unshift(nextLine);\n            }\n            var absoluteY = this.ybase + this.y;\n            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n                continue;\n            }\n            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n            var linesToAdd = destLineLengths.length - wrappedLines.length;\n            var trimmedLines = void 0;\n            if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n            }\n            else {\n                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n            }\n            var newLines = [];\n            for (var i = 0; i < linesToAdd; i++) {\n                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);\n                newLines.push(newLine);\n            }\n            if (newLines.length > 0) {\n                toInsert.push({\n                    start: y + wrappedLines.length + countToInsert,\n                    newLines: newLines\n                });\n                countToInsert += newLines.length;\n            }\n            wrappedLines.push.apply(wrappedLines, newLines);\n            var destLineIndex = destLineLengths.length - 1;\n            var destCol = destLineLengths[destLineIndex];\n            if (destCol === 0) {\n                destLineIndex--;\n                destCol = destLineLengths[destLineIndex];\n            }\n            var srcLineIndex = wrappedLines.length - linesToAdd - 1;\n            var srcCol = lastLineLength;\n            while (srcLineIndex >= 0) {\n                var cellsToCopy = Math.min(srcCol, destCol);\n                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n                destCol -= cellsToCopy;\n                if (destCol === 0) {\n                    destLineIndex--;\n                    destCol = destLineLengths[destLineIndex];\n                }\n                srcCol -= cellsToCopy;\n                if (srcCol === 0) {\n                    srcLineIndex--;\n                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);\n                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n                }\n            }\n            for (var i = 0; i < wrappedLines.length; i++) {\n                if (destLineLengths[i] < newCols) {\n                    wrappedLines[i].setCell(destLineLengths[i], nullCell);\n                }\n            }\n            var viewportAdjustments = linesToAdd - trimmedLines;\n            while (viewportAdjustments-- > 0) {\n                if (this.ybase === 0) {\n                    if (this.y < newRows - 1) {\n                        this.y++;\n                        this.lines.pop();\n                    }\n                    else {\n                        this.ybase++;\n                        this.ydisp++;\n                    }\n                }\n                else {\n                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n                        if (this.ybase === this.ydisp) {\n                            this.ydisp++;\n                        }\n                        this.ybase++;\n                    }\n                }\n            }\n        }\n        if (toInsert.length > 0) {\n            var insertEvents = [];\n            var originalLines = [];\n            for (var i = 0; i < this.lines.length; i++) {\n                originalLines.push(this.lines.get(i));\n            }\n            var originalLinesLength = this.lines.length;\n            var originalLineIndex = originalLinesLength - 1;\n            var nextToInsertIndex = 0;\n            var nextToInsert = toInsert[nextToInsertIndex];\n            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n            var countInsertedSoFar = 0;\n            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n                        this.lines.set(i--, nextToInsert.newLines[nextI]);\n                    }\n                    i++;\n                    insertEvents.push({\n                        index: originalLineIndex + 1,\n                        amount: nextToInsert.newLines.length\n                    });\n                    countInsertedSoFar += nextToInsert.newLines.length;\n                    nextToInsert = toInsert[++nextToInsertIndex];\n                }\n                else {\n                    this.lines.set(i, originalLines[originalLineIndex--]);\n                }\n            }\n            var insertCountEmitted = 0;\n            for (var i = insertEvents.length - 1; i >= 0; i--) {\n                insertEvents[i].index += insertCountEmitted;\n                this.lines.onInsertEmitter.fire(insertEvents[i]);\n                insertCountEmitted += insertEvents[i].amount;\n            }\n            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n            if (amountToTrim > 0) {\n                this.lines.onTrimEmitter.fire(amountToTrim);\n            }\n        }\n    };\n    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {\n        if (trimRight === void 0) { trimRight = false; }\n        while (stringIndex) {\n            var line = this.lines.get(lineIndex);\n            if (!line) {\n                return [-1, -1];\n            }\n            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;\n            for (var i = 0; i < length_1; ++i) {\n                if (line.get(i)[BufferLine_1.CHAR_DATA_WIDTH_INDEX]) {\n                    stringIndex -= line.get(i)[BufferLine_1.CHAR_DATA_CHAR_INDEX].length || 1;\n                }\n                if (stringIndex < 0) {\n                    return [lineIndex, i];\n                }\n            }\n            lineIndex++;\n        }\n        return [lineIndex, 0];\n    };\n    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {\n        if (startCol === void 0) { startCol = 0; }\n        var line = this.lines.get(lineIndex);\n        if (!line) {\n            return '';\n        }\n        return line.translateToString(trimRight, startCol, endCol);\n    };\n    Buffer.prototype.getWrappedRangeForLine = function (y) {\n        var first = y;\n        var last = y;\n        while (first > 0 && this.lines.get(first).isWrapped) {\n            first--;\n        }\n        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {\n            last++;\n        }\n        return { first: first, last: last };\n    };\n    Buffer.prototype.setupTabStops = function (i) {\n        if (i !== null && i !== undefined) {\n            if (!this.tabs[i]) {\n                i = this.prevStop(i);\n            }\n        }\n        else {\n            this.tabs = {};\n            i = 0;\n        }\n        for (; i < this._cols; i += this._terminal.options.tabStopWidth) {\n            this.tabs[i] = true;\n        }\n    };\n    Buffer.prototype.prevStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[--x] && x > 0)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.nextStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[++x] && x < this._cols)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.addMarker = function (y) {\n        var _this = this;\n        var marker = new Marker_1.Marker(y);\n        this.markers.push(marker);\n        marker.register(this.lines.onTrim(function (amount) {\n            marker.line -= amount;\n            if (marker.line < 0) {\n                marker.dispose();\n            }\n        }));\n        marker.register(this.lines.onInsert(function (event) {\n            if (marker.line >= event.index) {\n                marker.line += event.amount;\n            }\n        }));\n        marker.register(this.lines.onDelete(function (event) {\n            if (marker.line >= event.index && marker.line < event.index + event.amount) {\n                marker.dispose();\n            }\n            if (marker.line > event.index) {\n                marker.line -= event.amount;\n            }\n        }));\n        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));\n        return marker;\n    };\n    Buffer.prototype._removeMarker = function (marker) {\n        this.markers.splice(this.markers.indexOf(marker), 1);\n    };\n    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {\n        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n    };\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nvar BufferStringIterator = (function () {\n    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {\n        if (_startIndex === void 0) { _startIndex = 0; }\n        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }\n        if (_startOverscan === void 0) { _startOverscan = 0; }\n        if (_endOverscan === void 0) { _endOverscan = 0; }\n        this._buffer = _buffer;\n        this._trimRight = _trimRight;\n        this._startIndex = _startIndex;\n        this._endIndex = _endIndex;\n        this._startOverscan = _startOverscan;\n        this._endOverscan = _endOverscan;\n        if (this._startIndex < 0) {\n            this._startIndex = 0;\n        }\n        if (this._endIndex > this._buffer.lines.length) {\n            this._endIndex = this._buffer.lines.length;\n        }\n        this._current = this._startIndex;\n    }\n    BufferStringIterator.prototype.hasNext = function () {\n        return this._current < this._endIndex;\n    };\n    BufferStringIterator.prototype.next = function () {\n        var range = this._buffer.getWrappedRangeForLine(this._current);\n        if (range.first < this._startIndex - this._startOverscan) {\n            range.first = this._startIndex - this._startOverscan;\n        }\n        if (range.last > this._endIndex + this._endOverscan) {\n            range.last = this._endIndex + this._endOverscan;\n        }\n        range.first = Math.max(range.first, 0);\n        range.last = Math.min(range.last, this._buffer.lines.length);\n        var result = '';\n        for (var i = range.first; i <= range.last; ++i) {\n            result += this._buffer.translateBufferLineToString(i, this._trimRight);\n        }\n        this._current = range.last + 1;\n        return { range: range, content: result };\n    };\n    return BufferStringIterator;\n}());\nexports.BufferStringIterator = BufferStringIterator;\n//# sourceMappingURL=Buffer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/Buffer.js\n// module id = 13\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nexports.wcwidth = (function (opts) {\n    var COMBINING_BMP = [\n        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n    ];\n    var COMBINING_HIGH = [\n        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n        [0xE0100, 0xE01EF]\n    ];\n    function bisearch(ucs, data) {\n        var min = 0;\n        var max = data.length - 1;\n        var mid;\n        if (ucs < data[0][0] || ucs > data[max][1]) {\n            return false;\n        }\n        while (max >= min) {\n            mid = (min + max) >> 1;\n            if (ucs > data[mid][1]) {\n                min = mid + 1;\n            }\n            else if (ucs < data[mid][0]) {\n                max = mid - 1;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    function wcwidthHigh(ucs) {\n        if (bisearch(ucs, COMBINING_HIGH)) {\n            return 0;\n        }\n        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {\n            return 2;\n        }\n        return 1;\n    }\n    var control = opts.control | 0;\n    var table = new Uint8Array(65536);\n    TypedArrayUtils_1.fill(table, 1);\n    table[0] = opts.nul;\n    TypedArrayUtils_1.fill(table, opts.control, 1, 32);\n    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);\n    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);\n    table[0x2329] = 2;\n    table[0x232a] = 2;\n    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);\n    table[0x303f] = 1;\n    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);\n    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);\n    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);\n    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);\n    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);\n    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);\n    for (var r = 0; r < COMBINING_BMP.length; ++r) {\n        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);\n    }\n    return function (num) {\n        if (num < 32) {\n            return control | 0;\n        }\n        if (num < 127) {\n            return 1;\n        }\n        if (num < 65536) {\n            return table[num];\n        }\n        return wcwidthHigh(num);\n    };\n})({ nul: 0, control: 0 });\nfunction getStringCellWidth(s) {\n    var result = 0;\n    var length = s.length;\n    for (var i = 0; i < length; ++i) {\n        var code = s.charCodeAt(i);\n        if (0xD800 <= code && code <= 0xDBFF) {\n            if (++i >= length) {\n                return result + exports.wcwidth(code);\n            }\n            var second = s.charCodeAt(i);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                result += exports.wcwidth(second);\n            }\n        }\n        result += exports.wcwidth(code);\n    }\n    return result;\n}\nexports.getStringCellWidth = getStringCellWidth;\n//# sourceMappingURL=CharWidth.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/CharWidth.js\n// module id = 14\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper = (function () {\n    function MouseHelper(_renderCoordinator) {\n        this._renderCoordinator = _renderCoordinator;\n    }\n    MouseHelper.getCoordsRelativeToElement = function (event, element) {\n        var rect = element.getBoundingClientRect();\n        return [event.clientX - rect.left, event.clientY - rect.top];\n    };\n    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {\n        if (!charMeasure.width || !charMeasure.height) {\n            return null;\n        }\n        var coords = MouseHelper.getCoordsRelativeToElement(event, element);\n        if (!coords) {\n            return null;\n        }\n        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderCoordinator.dimensions.actualCellWidth / 2 : 0)) / this._renderCoordinator.dimensions.actualCellWidth);\n        coords[1] = Math.ceil(coords[1] / this._renderCoordinator.dimensions.actualCellHeight);\n        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n        return coords;\n    };\n    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {\n        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);\n        var x = coords[0];\n        var y = coords[1];\n        x += 32;\n        y += 32;\n        return { x: x, y: y };\n    };\n    return MouseHelper;\n}());\nexports.MouseHelper = MouseHelper;\n//# sourceMappingURL=MouseHelper.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/MouseHelper.js\n// module id = 15\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar HOVER_DURATION = 500;\nvar MouseZoneManager = (function (_super) {\n    __extends(MouseZoneManager, _super);\n    function MouseZoneManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._zones = [];\n        _this._areZonesActive = false;\n        _this._tooltipTimeout = null;\n        _this._currentZone = null;\n        _this._lastHoverCoords = [null, null];\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));\n        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };\n        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };\n        _this._clickListener = function (e) { return _this._onClick(e); };\n        return _this;\n    }\n    MouseZoneManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._deactivate();\n    };\n    MouseZoneManager.prototype.add = function (zone) {\n        this._zones.push(zone);\n        if (this._zones.length === 1) {\n            this._activate();\n        }\n    };\n    MouseZoneManager.prototype.clearAll = function (start, end) {\n        if (this._zones.length === 0) {\n            return;\n        }\n        if (!end) {\n            start = 0;\n            end = this._terminal.rows - 1;\n        }\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if ((zone.y1 > start && zone.y1 <= end + 1) ||\n                (zone.y2 > start && zone.y2 <= end + 1) ||\n                (zone.y1 < start && zone.y2 > end + 1)) {\n                if (this._currentZone && this._currentZone === zone) {\n                    this._currentZone.leaveCallback();\n                    this._currentZone = null;\n                }\n                this._zones.splice(i--, 1);\n            }\n        }\n        if (this._zones.length === 0) {\n            this._deactivate();\n        }\n    };\n    MouseZoneManager.prototype._activate = function () {\n        if (!this._areZonesActive) {\n            this._areZonesActive = true;\n            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.addEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.addEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._deactivate = function () {\n        if (this._areZonesActive) {\n            this._areZonesActive = false;\n            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.removeEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.removeEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._onMouseMove = function (e) {\n        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n            this._onHover(e);\n            this._lastHoverCoords = [e.pageX, e.pageY];\n        }\n    };\n    MouseZoneManager.prototype._onHover = function (e) {\n        var _this = this;\n        var zone = this._findZoneEventAt(e);\n        if (zone === this._currentZone) {\n            return;\n        }\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n        if (!zone) {\n            return;\n        }\n        this._currentZone = zone;\n        if (zone.hoverCallback) {\n            zone.hoverCallback(e);\n        }\n        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);\n    };\n    MouseZoneManager.prototype._onTooltip = function (e) {\n        this._tooltipTimeout = null;\n        var zone = this._findZoneEventAt(e);\n        if (zone && zone.tooltipCallback) {\n            zone.tooltipCallback(e);\n        }\n    };\n    MouseZoneManager.prototype._onMouseDown = function (e) {\n        this._initialSelectionLength = this._terminal.getSelection().length;\n        if (!this._areZonesActive) {\n            return;\n        }\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            if (zone.willLinkActivate(e)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        }\n    };\n    MouseZoneManager.prototype._onMouseLeave = function (e) {\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n    };\n    MouseZoneManager.prototype._onClick = function (e) {\n        var zone = this._findZoneEventAt(e);\n        var currentSelectionLength = this._terminal.getSelection().length;\n        if (zone && currentSelectionLength === this._initialSelectionLength) {\n            zone.clickCallback(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    };\n    MouseZoneManager.prototype._findZoneEventAt = function (e) {\n        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);\n        if (!coords) {\n            return null;\n        }\n        var x = coords[0];\n        var y = coords[1];\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if (zone.y1 === zone.y2) {\n                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n                    return zone;\n                }\n            }\n            else {\n                if ((y === zone.y1 && x >= zone.x1) ||\n                    (y === zone.y2 && x < zone.x2) ||\n                    (y > zone.y1 && y < zone.y2)) {\n                    return zone;\n                }\n            }\n        }\n        return null;\n    };\n    return MouseZoneManager;\n}(Lifecycle_1.Disposable));\nexports.MouseZoneManager = MouseZoneManager;\nvar MouseZone = (function () {\n    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.clickCallback = clickCallback;\n        this.hoverCallback = hoverCallback;\n        this.tooltipCallback = tooltipCallback;\n        this.leaveCallback = leaveCallback;\n        this.willLinkActivate = willLinkActivate;\n    }\n    return MouseZone;\n}());\nexports.MouseZone = MouseZone;\n//# sourceMappingURL=MouseZoneManager.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/MouseZoneManager.js\n// module id = 16\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fill(array, value, start, end) {\n    if (array.fill) {\n        return array.fill(value, start, end);\n    }\n    return fillFallback(array, value, start, end);\n}\nexports.fill = fill;\nfunction fillFallback(array, value, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = array.length; }\n    if (start >= array.length) {\n        return array;\n    }\n    start = (array.length + start) % array.length;\n    if (end >= array.length) {\n        end = array.length;\n    }\n    else {\n        end = (array.length + end) % array.length;\n    }\n    for (var i = start; i < end; ++i) {\n        array[i] = value;\n    }\n    return array;\n}\nexports.fillFallback = fillFallback;\nfunction concat(a, b) {\n    var result = new a.constructor(a.length + b.length);\n    result.set(a);\n    result.set(b, a.length);\n    return result;\n}\nexports.concat = concat;\n//# sourceMappingURL=TypedArrayUtils.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/TypedArrayUtils.js\n// module id = 17\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar JoinedCellData = (function (_super) {\n    __extends(JoinedCellData, _super);\n    function JoinedCellData(firstCell, chars, width) {\n        var _this = _super.call(this) || this;\n        _this.content = 0;\n        _this.combinedData = '';\n        _this.fg = firstCell.fg;\n        _this.bg = firstCell.bg;\n        _this.combinedData = chars;\n        _this._width = width;\n        return _this;\n    }\n    JoinedCellData.prototype.isCombined = function () {\n        return 2097152;\n    };\n    JoinedCellData.prototype.getWidth = function () {\n        return this._width;\n    };\n    JoinedCellData.prototype.getChars = function () {\n        return this.combinedData;\n    };\n    JoinedCellData.prototype.getCode = function () {\n        return 0x1FFFFF;\n    };\n    JoinedCellData.prototype.setFromCharData = function (value) {\n        throw new Error('not implemented');\n    };\n    JoinedCellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return JoinedCellData;\n}(BufferLine_1.AttributeData));\nexports.JoinedCellData = JoinedCellData;\nvar CharacterJoinerRegistry = (function () {\n    function CharacterJoinerRegistry(_terminal) {\n        this._terminal = _terminal;\n        this._characterJoiners = [];\n        this._nextCharacterJoinerId = 0;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {\n        var joiner = {\n            id: this._nextCharacterJoinerId++,\n            handler: handler\n        };\n        this._characterJoiners.push(joiner);\n        return joiner.id;\n    };\n    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {\n        for (var i = 0; i < this._characterJoiners.length; i++) {\n            if (this._characterJoiners[i].id === joinerId) {\n                this._characterJoiners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {\n        if (this._characterJoiners.length === 0) {\n            return [];\n        }\n        var line = this._terminal.buffer.lines.get(row);\n        if (line.length === 0) {\n            return [];\n        }\n        var ranges = [];\n        var lineStr = line.translateToString(true);\n        var rangeStartColumn = 0;\n        var currentStringIndex = 0;\n        var rangeStartStringIndex = 0;\n        var rangeAttrFG = line.getFg(0);\n        var rangeAttrBG = line.getBg(0);\n        for (var x = 0; x < line.getTrimmedLength(); x++) {\n            line.loadCell(x, this._workCell);\n            if (this._workCell.getWidth() === 0) {\n                continue;\n            }\n            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n                if (x - rangeStartColumn > 1) {\n                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n                    for (var i = 0; i < joinedRanges.length; i++) {\n                        ranges.push(joinedRanges[i]);\n                    }\n                }\n                rangeStartColumn = x;\n                rangeStartStringIndex = currentStringIndex;\n                rangeAttrFG = this._workCell.fg;\n                rangeAttrBG = this._workCell.bg;\n            }\n            currentStringIndex += this._workCell.getChars().length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n        }\n        if (this._terminal.cols - rangeStartColumn > 1) {\n            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n            for (var i = 0; i < joinedRanges.length; i++) {\n                ranges.push(joinedRanges[i]);\n            }\n        }\n        return ranges;\n    };\n    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {\n        var text = line.substring(startIndex, endIndex);\n        var joinedRanges = this._characterJoiners[0].handler(text);\n        for (var i = 1; i < this._characterJoiners.length; i++) {\n            var joinerRanges = this._characterJoiners[i].handler(text);\n            for (var j = 0; j < joinerRanges.length; j++) {\n                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);\n            }\n        }\n        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n        return joinedRanges;\n    };\n    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {\n        var currentRangeIndex = 0;\n        var currentRangeStarted = false;\n        var currentStringIndex = 0;\n        var currentRange = ranges[currentRangeIndex];\n        if (!currentRange) {\n            return;\n        }\n        for (var x = startCol; x < this._terminal.cols; x++) {\n            var width = line.getWidth(x);\n            var length_1 = line.getString(x).length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n            if (width === 0) {\n                continue;\n            }\n            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n                currentRange[0] = x;\n                currentRangeStarted = true;\n            }\n            if (currentRange[1] <= currentStringIndex) {\n                currentRange[1] = x;\n                currentRange = ranges[++currentRangeIndex];\n                if (!currentRange) {\n                    break;\n                }\n                if (currentRange[0] <= currentStringIndex) {\n                    currentRange[0] = x;\n                    currentRangeStarted = true;\n                }\n                else {\n                    currentRangeStarted = false;\n                }\n            }\n            currentStringIndex += length_1;\n        }\n        if (currentRange) {\n            currentRange[1] = this._terminal.cols;\n        }\n    };\n    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {\n        var inRange = false;\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (!inRange) {\n                if (newRange[1] <= range[0]) {\n                    ranges.splice(i, 0, newRange);\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    return ranges;\n                }\n                if (newRange[0] < range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    inRange = true;\n                }\n                continue;\n            }\n            else {\n                if (newRange[1] <= range[0]) {\n                    ranges[i - 1][1] = newRange[1];\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n                    ranges.splice(i, 1);\n                    inRange = false;\n                    return ranges;\n                }\n                ranges.splice(i, 1);\n                i--;\n            }\n        }\n        if (inRange) {\n            ranges[ranges.length - 1][1] = newRange[1];\n        }\n        else {\n            ranges.push(newRange);\n        }\n        return ranges;\n    };\n    return CharacterJoinerRegistry;\n}());\nexports.CharacterJoinerRegistry = CharacterJoinerRegistry;\n//# sourceMappingURL=CharacterJoinerRegistry.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/CharacterJoinerRegistry.js\n// module id = 18\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar DynamicCharAtlas_1 = require(\"./DynamicCharAtlas\");\nvar NoneCharAtlas_1 = require(\"./NoneCharAtlas\");\nvar StaticCharAtlas_1 = require(\"./StaticCharAtlas\");\nvar charAtlasImplementations = {\n    'none': NoneCharAtlas_1.default,\n    'static': StaticCharAtlas_1.default,\n    'dynamic': DynamicCharAtlas_1.default\n};\nvar charAtlasCache = [];\nfunction acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {\n    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        var ownedByIndex = entry.ownedBy.indexOf(terminal);\n        if (ownedByIndex >= 0) {\n            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n                return entry.atlas;\n            }\n            if (entry.ownedBy.length === 1) {\n                entry.atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                entry.ownedBy.splice(ownedByIndex, 1);\n            }\n            break;\n        }\n    }\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n            entry.ownedBy.push(terminal);\n            return entry.atlas;\n        }\n    }\n    var newEntry = {\n        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),\n        config: newConfig,\n        ownedBy: [terminal]\n    };\n    charAtlasCache.push(newEntry);\n    return newEntry.atlas;\n}\nexports.acquireCharAtlas = acquireCharAtlas;\nfunction removeTerminalFromCache(terminal) {\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var index = charAtlasCache[i].ownedBy.indexOf(terminal);\n        if (index !== -1) {\n            if (charAtlasCache[i].ownedBy.length === 1) {\n                charAtlasCache[i].atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                charAtlasCache[i].ownedBy.splice(index, 1);\n            }\n            break;\n        }\n    }\n}\nexports.removeTerminalFromCache = removeTerminalFromCache;\n//# sourceMappingURL=CharAtlasCache.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/CharAtlasCache.js\n// module id = 19\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Platform_1 = require(\"../../common/Platform\");\nvar Types_1 = require(\"./Types\");\nfunction generateStaticCharAtlasTexture(context, canvasFactory, config) {\n    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);\n    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });\n    ctx.fillStyle = config.colors.background.css;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    ctx.fillStyle = config.colors.foreground.css;\n    ctx.font = getFont(config.fontWeight, config);\n    ctx.textBaseline = 'middle';\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight / 2);\n        ctx.restore();\n    }\n    ctx.save();\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight * 1.5);\n        ctx.restore();\n    }\n    ctx.restore();\n    ctx.font = getFont(config.fontWeight, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2 + 16) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.restore();\n    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {\n        return canvas;\n    }\n    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    clearColor(charAtlasImageData, config.colors.background);\n    return context.createImageBitmap(charAtlasImageData);\n}\nexports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;\nfunction clearColor(imageData, color) {\n    var isEmpty = true;\n    var r = color.rgba >>> 24;\n    var g = color.rgba >>> 16 & 0xFF;\n    var b = color.rgba >>> 8 & 0xFF;\n    for (var offset = 0; offset < imageData.data.length; offset += 4) {\n        if (imageData.data[offset] === r &&\n            imageData.data[offset + 1] === g &&\n            imageData.data[offset + 2] === b) {\n            imageData.data[offset + 3] = 0;\n        }\n        else {\n            isEmpty = false;\n        }\n    }\n    return isEmpty;\n}\nexports.clearColor = clearColor;\nfunction getFont(fontWeight, config) {\n    return fontWeight + \" \" + config.fontSize * config.devicePixelRatio + \"px \" + config.fontFamily;\n}\n//# sourceMappingURL=CharAtlasGenerator.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/CharAtlasGenerator.js\n// module id = 20\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_FOREGROUND = fromHex('#ffffff');\nvar DEFAULT_BACKGROUND = fromHex('#000000');\nvar DEFAULT_CURSOR = fromHex('#ffffff');\nvar DEFAULT_CURSOR_ACCENT = fromHex('#000000');\nvar DEFAULT_SELECTION = {\n    css: 'rgba(255, 255, 255, 0.3)',\n    rgba: 0xFFFFFF77\n};\nexports.DEFAULT_ANSI_COLORS = (function () {\n    var colors = [\n        fromHex('#2e3436'),\n        fromHex('#cc0000'),\n        fromHex('#4e9a06'),\n        fromHex('#c4a000'),\n        fromHex('#3465a4'),\n        fromHex('#75507b'),\n        fromHex('#06989a'),\n        fromHex('#d3d7cf'),\n        fromHex('#555753'),\n        fromHex('#ef2929'),\n        fromHex('#8ae234'),\n        fromHex('#fce94f'),\n        fromHex('#729fcf'),\n        fromHex('#ad7fa8'),\n        fromHex('#34e2e2'),\n        fromHex('#eeeeec')\n    ];\n    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n    for (var i = 0; i < 216; i++) {\n        var r = v[(i / 36) % 6 | 0];\n        var g = v[(i / 6) % 6 | 0];\n        var b = v[i % 6];\n        colors.push({\n            css: \"#\" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),\n            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0\n        });\n    }\n    for (var i = 0; i < 24; i++) {\n        var c = 8 + i * 10;\n        var ch = toPaddedHex(c);\n        colors.push({\n            css: \"#\" + ch + ch + ch,\n            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0\n        });\n    }\n    return colors;\n})();\nfunction fromHex(css) {\n    return {\n        css: css,\n        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF\n    };\n}\nfunction toPaddedHex(c) {\n    var s = c.toString(16);\n    return s.length < 2 ? '0' + s : s;\n}\nvar ColorManager = (function () {\n    function ColorManager(document, allowTransparency) {\n        this.allowTransparency = allowTransparency;\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get rendering context');\n        }\n        this._ctx = ctx;\n        this._ctx.globalCompositeOperation = 'copy';\n        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n        this.colors = {\n            foreground: DEFAULT_FOREGROUND,\n            background: DEFAULT_BACKGROUND,\n            cursor: DEFAULT_CURSOR,\n            cursorAccent: DEFAULT_CURSOR_ACCENT,\n            selection: DEFAULT_SELECTION,\n            ansi: exports.DEFAULT_ANSI_COLORS.slice()\n        };\n    }\n    ColorManager.prototype.setTheme = function (theme) {\n        if (theme === void 0) { theme = {}; }\n        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);\n        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);\n        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);\n        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);\n        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);\n        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);\n        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);\n        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);\n        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);\n        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);\n        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);\n        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);\n        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);\n        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);\n        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);\n        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);\n    };\n    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {\n        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }\n        if (css === undefined) {\n            return fallback;\n        }\n        this._ctx.fillStyle = this._litmusColor;\n        this._ctx.fillStyle = css;\n        if (typeof this._ctx.fillStyle !== 'string') {\n            console.warn(\"Color: \" + css + \" is invalid using fallback \" + fallback.css);\n            return fallback;\n        }\n        this._ctx.fillRect(0, 0, 1, 1);\n        var data = this._ctx.getImageData(0, 0, 1, 1).data;\n        if (!allowTransparency && data[3] !== 0xFF) {\n            console.warn(\"Color: \" + css + \" is using transparency, but allowTransparency is false. \" +\n                (\"Using fallback \" + fallback.css + \".\"));\n            return fallback;\n        }\n        return {\n            css: css,\n            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0\n        };\n    };\n    return ColorManager;\n}());\nexports.ColorManager = ColorManager;\n//# sourceMappingURL=ColorManager.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/ui/ColorManager.js\n// module id = 21\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer = (function () {\n    function RenderDebouncer(_renderCallback) {\n        this._renderCallback = _renderCallback;\n    }\n    RenderDebouncer.prototype.dispose = function () {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = undefined;\n        }\n    };\n    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {\n        var _this = this;\n        this._rowCount = rowCount;\n        rowStart = rowStart !== undefined ? rowStart : 0;\n        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n        if (this._animationFrame) {\n            return;\n        }\n        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });\n    };\n    RenderDebouncer.prototype._innerRefresh = function () {\n        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n            return;\n        }\n        this._rowStart = Math.max(this._rowStart, 0);\n        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);\n        this._renderCallback(this._rowStart, this._rowEnd);\n        this._rowStart = undefined;\n        this._rowEnd = undefined;\n        this._animationFrame = undefined;\n    };\n    return RenderDebouncer;\n}());\nexports.RenderDebouncer = RenderDebouncer;\n//# sourceMappingURL=RenderDebouncer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/ui/RenderDebouncer.js\n// module id = 22\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor = (function (_super) {\n    __extends(ScreenDprMonitor, _super);\n    function ScreenDprMonitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._currentDevicePixelRatio = window.devicePixelRatio;\n        return _this;\n    }\n    ScreenDprMonitor.prototype.setListener = function (listener) {\n        var _this = this;\n        if (this._listener) {\n            this.clearListener();\n        }\n        this._listener = listener;\n        this._outerListener = function () {\n            if (!_this._listener) {\n                return;\n            }\n            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);\n            _this._updateDpr();\n        };\n        this._updateDpr();\n    };\n    ScreenDprMonitor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.clearListener();\n    };\n    ScreenDprMonitor.prototype._updateDpr = function () {\n        if (!this._resolutionMediaMatchList || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._currentDevicePixelRatio = window.devicePixelRatio;\n        this._resolutionMediaMatchList = window.matchMedia(\"screen and (resolution: \" + window.devicePixelRatio + \"dppx)\");\n        this._resolutionMediaMatchList.addListener(this._outerListener);\n    };\n    ScreenDprMonitor.prototype.clearListener = function () {\n        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._resolutionMediaMatchList = undefined;\n        this._listener = undefined;\n        this._outerListener = undefined;\n    };\n    return ScreenDprMonitor;\n}(Lifecycle_1.Disposable));\nexports.ScreenDprMonitor = ScreenDprMonitor;\n//# sourceMappingURL=ScreenDprMonitor.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/ui/ScreenDprMonitor.js\n// module id = 23\n// module chunks = 0","\"use strict\";\n;\n;\n;\nvar isWebSocket = function (constructor) {\n    return constructor && constructor.CLOSING === 2;\n};\nvar isGlobalWebSocket = function () {\n    return typeof WebSocket !== 'undefined' && isWebSocket(WebSocket);\n};\nvar getDefaultOptions = function () { return ({\n    constructor: isGlobalWebSocket() ? WebSocket : null,\n    maxReconnectionDelay: 10000,\n    minReconnectionDelay: 1500,\n    reconnectionDelayGrowFactor: 1.3,\n    connectionTimeout: 4000,\n    maxRetries: Infinity,\n    debug: false,\n}); };\nvar bypassProperty = function (src, dst, name) {\n    Object.defineProperty(dst, name, {\n        get: function () { return src[name]; },\n        set: function (value) { src[name] = value; },\n        enumerable: true,\n        configurable: true,\n    });\n};\nvar initReconnectionDelay = function (config) {\n    return (config.minReconnectionDelay + Math.random() * config.minReconnectionDelay);\n};\nvar updateReconnectionDelay = function (config, previousDelay) {\n    var newDelay = previousDelay * config.reconnectionDelayGrowFactor;\n    return (newDelay > config.maxReconnectionDelay)\n        ? config.maxReconnectionDelay\n        : newDelay;\n};\nvar LEVEL_0_EVENTS = ['onopen', 'onclose', 'onmessage', 'onerror'];\nvar reassignEventListeners = function (ws, oldWs, listeners) {\n    Object.keys(listeners).forEach(function (type) {\n        listeners[type].forEach(function (_a) {\n            var listener = _a[0], options = _a[1];\n            ws.addEventListener(type, listener, options);\n        });\n    });\n    if (oldWs) {\n        LEVEL_0_EVENTS.forEach(function (name) {\n            ws[name] = oldWs[name];\n        });\n    }\n};\nvar ReconnectingWebsocket = function (url, protocols, options) {\n    var _this = this;\n    if (options === void 0) { options = {}; }\n    var ws;\n    var connectingTimeout;\n    var reconnectDelay = 0;\n    var retriesCount = 0;\n    var shouldRetry = true;\n    var savedOnClose = null;\n    var listeners = {};\n    // require new to construct\n    if (!(this instanceof ReconnectingWebsocket)) {\n        throw new TypeError(\"Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator\");\n    }\n    // Set config. Not using `Object.assign` because of IE11\n    var config = getDefaultOptions();\n    Object.keys(config)\n        .filter(function (key) { return options.hasOwnProperty(key); })\n        .forEach(function (key) { return config[key] = options[key]; });\n    if (!isWebSocket(config.constructor)) {\n        throw new TypeError('Invalid WebSocket constructor. Set `options.constructor`');\n    }\n    var log = config.debug ? function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return console.log.apply(console, ['RWS:'].concat(params));\n    } : function () { };\n    /**\n     * Not using dispatchEvent, otherwise we must use a DOM Event object\n     * Deferred because we want to handle the close event before this\n     */\n    var emitError = function (code, msg) { return setTimeout(function () {\n        var err = new Error(msg);\n        err.code = code;\n        if (Array.isArray(listeners.error)) {\n            listeners.error.forEach(function (_a) {\n                var fn = _a[0];\n                return fn(err);\n            });\n        }\n        if (ws.onerror) {\n            ws.onerror(err);\n        }\n    }, 0); };\n    var handleClose = function () {\n        log('handleClose', { shouldRetry: shouldRetry });\n        retriesCount++;\n        log('retries count:', retriesCount);\n        if (retriesCount > config.maxRetries) {\n            emitError('EHOSTDOWN', 'Too many failed connection attempts');\n            return;\n        }\n        if (!reconnectDelay) {\n            reconnectDelay = initReconnectionDelay(config);\n        }\n        else {\n            reconnectDelay = updateReconnectionDelay(config, reconnectDelay);\n        }\n        log('handleClose - reconnectDelay:', reconnectDelay);\n        if (shouldRetry) {\n            setTimeout(connect, reconnectDelay);\n        }\n    };\n    var connect = function () {\n        if (!shouldRetry) {\n            return;\n        }\n        log('connect');\n        var oldWs = ws;\n        var wsUrl = (typeof url === 'function') ? url() : url;\n        ws = new config.constructor(wsUrl, protocols);\n        connectingTimeout = setTimeout(function () {\n            log('timeout');\n            ws.close();\n            emitError('ETIMEDOUT', 'Connection timeout');\n        }, config.connectionTimeout);\n        log('bypass properties');\n        for (var key in ws) {\n            // @todo move to constant\n            if (['addEventListener', 'removeEventListener', 'close', 'send'].indexOf(key) < 0) {\n                bypassProperty(ws, _this, key);\n            }\n        }\n        ws.addEventListener('open', function () {\n            clearTimeout(connectingTimeout);\n            log('open');\n            reconnectDelay = initReconnectionDelay(config);\n            log('reconnectDelay:', reconnectDelay);\n            retriesCount = 0;\n        });\n        ws.addEventListener('close', handleClose);\n        reassignEventListeners(ws, oldWs, listeners);\n        // because when closing with fastClose=true, it is saved and set to null to avoid double calls\n        ws.onclose = ws.onclose || savedOnClose;\n        savedOnClose = null;\n    };\n    log('init');\n    connect();\n    this.close = function (code, reason, _a) {\n        if (code === void 0) { code = 1000; }\n        if (reason === void 0) { reason = ''; }\n        var _b = _a === void 0 ? {} : _a, _c = _b.keepClosed, keepClosed = _c === void 0 ? false : _c, _d = _b.fastClose, fastClose = _d === void 0 ? true : _d, _e = _b.delay, delay = _e === void 0 ? 0 : _e;\n        log('close - params:', { reason: reason, keepClosed: keepClosed, fastClose: fastClose, delay: delay, retriesCount: retriesCount, maxRetries: config.maxRetries });\n        shouldRetry = !keepClosed && retriesCount <= config.maxRetries;\n        if (delay) {\n            reconnectDelay = delay;\n        }\n        ws.close(code, reason);\n        if (fastClose) {\n            var fakeCloseEvent_1 = {\n                code: code,\n                reason: reason,\n                wasClean: true,\n            };\n            // execute close listeners soon with a fake closeEvent\n            // and remove them from the WS instance so they\n            // don't get fired on the real close.\n            handleClose();\n            ws.removeEventListener('close', handleClose);\n            // run and remove level2\n            if (Array.isArray(listeners.close)) {\n                listeners.close.forEach(function (_a) {\n                    var listener = _a[0], options = _a[1];\n                    listener(fakeCloseEvent_1);\n                    ws.removeEventListener('close', listener, options);\n                });\n            }\n            // run and remove level0\n            if (ws.onclose) {\n                savedOnClose = ws.onclose;\n                ws.onclose(fakeCloseEvent_1);\n                ws.onclose = null;\n            }\n        }\n    };\n    this.send = function (data) {\n        ws.send(data);\n    };\n    this.addEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            if (!listeners[type].some(function (_a) {\n                var l = _a[0];\n                return l === listener;\n            })) {\n                listeners[type].push([listener, options]);\n            }\n        }\n        else {\n            listeners[type] = [[listener, options]];\n        }\n        ws.addEventListener(type, listener, options);\n    };\n    this.removeEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            listeners[type] = listeners[type].filter(function (_a) {\n                var l = _a[0];\n                return l !== listener;\n            });\n        }\n        ws.removeEventListener(type, listener, options);\n    };\n};\nmodule.exports = ReconnectingWebsocket;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/reconnecting-websocket/dist/index.js\n// module id = 24\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/index.js!./xterm.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../css-loader/index.js!./xterm.css\", function() {\n\t\t\tvar newContent = require(\"!!../../css-loader/index.js!./xterm.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/dist/xterm.css\n// module id = 25\n// module chunks = 0","/*!\n * EventEmitter v5.2.6 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - https://oli.me.uk/\n * @preserve\n */\n\n;(function (exports) {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    function isValidListener (listener) {\n        if (typeof listener === 'function' || listener instanceof RegExp) {\n            return true\n        } else if (listener && typeof listener === 'object') {\n            return isValidListener(listener.listener)\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        if (!isValidListener(listener)) {\n            throw new TypeError('listener must be a function');\n        }\n\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0; i < listeners.length; i++) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}(typeof window !== 'undefined' ? window : this || {}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/wolfy87-eventemitter/EventEmitter.js\n// module id = 26\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction proposeGeometry(term) {\n    if (!term.element.parentElement) {\n        return null;\n    }\n    var parentElementStyle = window.getComputedStyle(term.element.parentElement);\n    var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    var elementStyle = window.getComputedStyle(term.element);\n    var elementPadding = {\n        top: parseInt(elementStyle.getPropertyValue('padding-top')),\n        bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n        right: parseInt(elementStyle.getPropertyValue('padding-right')),\n        left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    var elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    var elementPaddingHor = elementPadding.right + elementPadding.left;\n    var availableHeight = parentElementHeight - elementPaddingVer;\n    var availableWidth = parentElementWidth - elementPaddingHor - term._core.viewport.scrollBarWidth;\n    var geometry = {\n        cols: Math.floor(availableWidth / term._core._renderCoordinator.dimensions.actualCellWidth),\n        rows: Math.floor(availableHeight / term._core._renderCoordinator.dimensions.actualCellHeight)\n    };\n    return geometry;\n}\nexports.proposeGeometry = proposeGeometry;\nfunction fit(term) {\n    var geometry = proposeGeometry(term);\n    if (geometry) {\n        if (term.rows !== geometry.rows || term.cols !== geometry.cols) {\n            term._core._renderCoordinator.clear();\n            term.resize(geometry.cols, geometry.rows);\n        }\n    }\n}\nexports.fit = fit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.proposeGeometry = function () {\n        return proposeGeometry(this);\n    };\n    terminalConstructor.prototype.fit = function () {\n        fit(this);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=fit.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/addons/fit/fit.js\n// module id = 27\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = require(\"../Terminal\");\nvar Strings = require(\"../Strings\");\nvar AddonManager_1 = require(\"./AddonManager\");\nvar Terminal = (function () {\n    function Terminal(options) {\n        this._core = new Terminal_1.Terminal(options);\n        this._addonManager = new AddonManager_1.AddonManager();\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._core.onCursorMove; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._core.onLineFeed; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._core.onSelectionChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._core.onData; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._core.onTitleChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._core.onScroll; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._core.onKey; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._core.onRender; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._core.onResize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"element\", {\n        get: function () { return this._core.element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"textarea\", {\n        get: function () { return this._core.textarea; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"rows\", {\n        get: function () { return this._core.rows; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"cols\", {\n        get: function () { return this._core.cols; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () { return new BufferApiView(this._core.buffer); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () { return this._core.markers; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.blur = function () {\n        this._core.blur();\n    };\n    Terminal.prototype.focus = function () {\n        this._core.focus();\n    };\n    Terminal.prototype.on = function (type, listener) {\n        this._core.on(type, listener);\n    };\n    Terminal.prototype.off = function (type, listener) {\n        this._core.off(type, listener);\n    };\n    Terminal.prototype.emit = function (type, data) {\n        this._core.emit(type, data);\n    };\n    Terminal.prototype.addDisposableListener = function (type, handler) {\n        return this._core.addDisposableListener(type, handler);\n    };\n    Terminal.prototype.resize = function (columns, rows) {\n        this._core.resize(columns, rows);\n    };\n    Terminal.prototype.writeln = function (data) {\n        this._core.writeln(data);\n    };\n    Terminal.prototype.open = function (parent) {\n        this._core.open(parent);\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._core.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._core.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        return this._core.registerLinkMatcher(regex, handler, options);\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        this._core.deregisterLinkMatcher(matcherId);\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        return this._core.registerCharacterJoiner(handler);\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        this._core.deregisterCharacterJoiner(joinerId);\n    };\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        return this._core.addMarker(cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this._core.hasSelection();\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this._core.select(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this._core.getSelection();\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        return this._core.getSelectionPosition();\n    };\n    Terminal.prototype.clearSelection = function () {\n        this._core.clearSelection();\n    };\n    Terminal.prototype.selectAll = function () {\n        this._core.selectAll();\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        this._core.selectLines(start, end);\n    };\n    Terminal.prototype.dispose = function () {\n        this._addonManager.dispose();\n        this._core.dispose();\n    };\n    Terminal.prototype.destroy = function () {\n        this._core.destroy();\n    };\n    Terminal.prototype.scrollLines = function (amount) {\n        this._core.scrollLines(amount);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this._core.scrollPages(pageCount);\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this._core.scrollToTop();\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this._core.scrollToBottom();\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        this._core.scrollToLine(line);\n    };\n    Terminal.prototype.clear = function () {\n        this._core.clear();\n    };\n    Terminal.prototype.write = function (data) {\n        this._core.write(data);\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        this._core.writeUtf8(data);\n    };\n    Terminal.prototype.getOption = function (key) {\n        return this._core.getOption(key);\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        this._core.setOption(key, value);\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        this._core.refresh(start, end);\n    };\n    Terminal.prototype.reset = function () {\n        this._core.reset();\n    };\n    Terminal.applyAddon = function (addon) {\n        addon.apply(Terminal);\n    };\n    Terminal.prototype.loadAddon = function (addon) {\n        return this._addonManager.loadAddon(this, addon);\n    };\n    Object.defineProperty(Terminal, \"strings\", {\n        get: function () {\n            return Strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nvar BufferApiView = (function () {\n    function BufferApiView(_buffer) {\n        this._buffer = _buffer;\n    }\n    Object.defineProperty(BufferApiView.prototype, \"cursorY\", {\n        get: function () { return this._buffer.y; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"cursorX\", {\n        get: function () { return this._buffer.x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"viewportY\", {\n        get: function () { return this._buffer.ydisp; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"baseY\", {\n        get: function () { return this._buffer.ybase; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"length\", {\n        get: function () { return this._buffer.lines.length; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferApiView.prototype.getLine = function (y) {\n        var line = this._buffer.lines.get(y);\n        if (!line) {\n            return undefined;\n        }\n        return new BufferLineApiView(line);\n    };\n    return BufferApiView;\n}());\nvar BufferLineApiView = (function () {\n    function BufferLineApiView(_line) {\n        this._line = _line;\n    }\n    Object.defineProperty(BufferLineApiView.prototype, \"isWrapped\", {\n        get: function () { return this._line.isWrapped; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferLineApiView.prototype.getCell = function (x) {\n        if (x < 0 || x >= this._line.length) {\n            return undefined;\n        }\n        return new BufferCellApiView(this._line, x);\n    };\n    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {\n        return this._line.translateToString(trimRight, startColumn, endColumn);\n    };\n    return BufferLineApiView;\n}());\nvar BufferCellApiView = (function () {\n    function BufferCellApiView(_line, _x) {\n        this._line = _line;\n        this._x = _x;\n    }\n    Object.defineProperty(BufferCellApiView.prototype, \"char\", {\n        get: function () { return this._line.getString(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferCellApiView.prototype, \"width\", {\n        get: function () { return this._line.getWidth(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    return BufferCellApiView;\n}());\n//# sourceMappingURL=Terminal.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/public/Terminal.js\n// module id = 28\n// module chunks = 0","import {Terminal} from 'xterm'\nimport * as fit from 'xterm/lib/addons/fit/fit';\n\nimport ReconnectingWebSocket from 'reconnecting-websocket'\nimport 'xterm/dist/xterm.css'\nimport EventEmitter from 'wolfy87-eventemitter'\n\nTerminal.applyAddon(fit);  // Apply the `fit` addon\n\n(function (window) {\n\n  'use strict';\n\n\n  // Private functions\n\n  function injectScript(src, cb) {\n    var sj = document.createElement('script');\n    sj.type = 'text/javascript';\n    sj.async = true;\n    sj.src = src;\n    sj.addEventListener ? sj.addEventListener('load', cb, false) : sj.attachEvent('onload', cb);\n    var s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(sj, s);\n  }\n\n\n  // Process recaptcha input and inits SDK\n  var verifyCallback = function(response) {\n    var self = this;\n    var data = encodeURIComponent('g-recaptcha-response') + '=' + encodeURIComponent(response);\n    data += '&' + encodeURIComponent('session-duration') + '=' + encodeURIComponent('60m');\n  };\n\n  // register Recaptcha global onload callback\n  window.onloadCallback = function() {\n    //Register captcha only on the first term to avoid showing multiple times\n    verifyCallback.call(window.pwd);\n  }\n\n  function registerInputHandlers(termName, instance) {\n    var self = this;\n    // Attach block actions\n    var actions = document.querySelectorAll('code[class*=\"'+termName+'\"]');\n    for (var n=0; n < actions.length; ++n) {\n      actions[n].onclick = function() {\n\tself.socket.emit('instance terminal in', instance.name, this.innerText);\n        /* Prompt support\n\tvar lines = this.innerText.split(\"\\n\");\n        for (var i = 0; i < lines.length; i ++) {\n          var line = lines[i];\n          // if line starts with\n          if (line.startsWith(\"$\")) {\n            self.socket.emit('instance terminal in', instance.name, line.replace('$','')+'\\n');\n          }\n        }\n\t*/\n      };\n    }\n  }\n\n  function registerPortHandlers(termName, instance) {\n    var self = this;\n    // Attach block actions\n    var actions = document.querySelectorAll('[data-term*=\"'+termName+'\"]');\n    for (var n=0; n < actions.length; ++n) {\n      var anchor = actions[n];\n      var port = anchor.getAttribute(\"data-port\");\n      var protocol = anchor.getAttribute(\"data-protocol\") || 'http:';\n      var link;\n      if (port) {\n        link = protocol + '//'+ instance.proxy_host + '-' + port + '.direct.' + self.opts.baseUrl.split('/')[2] + anchor.attributes.href.value;\n      }\n      var openFn = function(link) {\n        return function(evt) {\n          evt.preventDefault();\n          if (link) {\n            window.open(link, '_blank');\n          }\n        };\n      }\n      anchor.onclick = openFn(link);\n      anchor.onauxclick = openFn(link);\n      anchor.oncontextmenu = function(evt) {\n        if (link) {\n          this.setAttribute(\"href\", link);\n        }\n      };\n    }\n  }\n\n\n  // PWD instance\n  var pwd = function () {\n    this.instances = {};\n    this.instanceBuffer = {};\n    return;\n  };\n\n\n  pwd.prototype = Object.create(EventEmitter.prototype)\n  pwd.prototype.constructor = pwd;\n\n\n  function setOpts(opts) {\n    var opts = opts || {};\n    this.opts = opts;\n    this.opts.baseUrl = this.opts.baseUrl || 'https://labs.play-with-docker.com';\n    this.opts.ports = this.opts.ports || [];\n    this.opts.ImageName = this.opts.ImageName || '';\n    this.opts.oauthProvider = this.opts.oauthProvider || 'docker';\n  }\n\n  pwd.prototype.login = function(cb) {\n    var self = this;\n    var width = screen.width*0.6;\n    var height = screen.height*0.6;\n    var x = screen.width/2 - width/2;\n    var y = screen.height/2 - height/2;\n\n    // display login btn in 1st terminal only\n    var term = window.pwd.terms[0];\n    var els = document.querySelectorAll(term.selector);\n    var loginBtn = document.createElement(\"input\");\n    loginBtn.type = 'button';\n    loginBtn.value = 'Log-in to access';\n    loginBtn.className = 'btn btn-lg btn-primary'\n    loginBtn.onclick = function() {\n      window.open(self.opts.baseUrl + '/oauth/providers/' + self.opts.oauthProvider + '/login', 'PWDLogin', 'width='+width+',height='+height+',left='+x+',top='+y);\n      var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n      var eventer = window[eventMethod];\n      var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n      // Listen to message from child window\n      eventer(messageEvent,function(e) {\n        if (e.data === 'done') {\n          els[0].removeChild(loginBtn);\n          cb();\n        }\n      }, false);\n    };\n    els[0].appendChild(loginBtn);\n  }\n\n  pwd.prototype.createSession = function(cb) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: this.opts.baseUrl + '/',\n      opts: {headers:{'Content-type':'application/x-www-form-urlencoded'}},\n      data: encodeURIComponent('session-duration') + '=' + encodeURIComponent('90m')\n    }, function(resp) {\n      //TODO handle errors\n      if (resp.status == 200) {\n        self.emitEvent('init')\n        var sessionData = JSON.parse(resp.responseText);\n        // fetch current scheme from opts to use in the new session hostname\n        self.opts.baseUrl = self.opts.baseUrl.split('/')[0] + '//' + sessionData.hostname;\n        self.init(sessionData.session_id, self.opts, function() {\n          self.terms.forEach(function(term) {\n\n            // Create terminals only for those elements that exist at least once in the DOM\n            if (document.querySelector(term.selector)) {\n              self.terminal(term);\n            }\n          });\n          cb();\n        });\n      } else if (resp.status == 403) {\n        //TODO login should return error and handle it\n        self.login(function() {\n          self.createSession(cb)\n        });\n      };\n    });\n  }\n\n  pwd.prototype.closeSession = function(callback) {\n    if (this.sessionId) {\n      sendRequest({\n        method: 'DELETE',\n        url: this.opts.baseUrl + '/sessions/' + this.sessionId,\n        opts: {headers:{'Content-type':'application/json'}},\n        sync: true\n      }, function(response) {\n        if (response.status == 200) {\n          callback();\n        } else {\n          callback(new Error(\"Error deleting session\"));\n        }\n      });\n    }\n  }\n\n  pwd.prototype.getUserInfo = function(callback) {\n    sendRequest({\n      method: 'GET',\n      url: this.opts.baseUrl + '/users/me',\n      opts: {headers:{'Content-type':'application/json'}}\n    }, function(response) {\n      if (response.status == 200) {\n        var u = JSON.parse(response.responseText);\n        callback(u);\n      } else {\n        callback(undefined);\n      }\n    });\n  }\n\n  pwd.prototype.newSession = function(terms, opts, callback) {\n    var self = this;\n    setOpts.call(this, opts);\n    terms = terms || [];\n    if (terms.length > 0) {\n      this.terms = terms;\n      this.createSession(function(err) {\n          if (err) {\n            console.warn('Could not create session');\n          }\n          !callback || callback();\n      });\n    } else {\n      console.warn('No terms specified, nothing to do.');\n    }\n  };\n\n  // your sdk init function\n  pwd.prototype.init = function (sessionId, opts, callback) {\n    var self = this;\n    setOpts.call(this, opts);\n    this.sessionId = sessionId;\n    var l = document.createElement(\"a\");\n    l.href = this.opts.baseUrl;\n\t\tthis.socket = new ReconnectingWebSocket((l.protocol === 'http:' ? 'ws://' : 'wss://') + l.host + '/sessions/' + sessionId + '/ws/' );\n\t\tthis.socket.listeners = {};\n\n\t\tthis.socket.on = function(name, cb) {\n\t\t\tif (!self.socket.listeners[name]) {\n\t\t\t\tself.socket.listeners[name] = [];\n\t\t\t}\n\t\t\tself.socket.listeners[name].push(cb);\n\t\t}\n\t  this.socket.emit = function() {\n\t\t\tvar name = arguments[0]\n\t\t\tvar args = [];\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\targs.push(arguments[i]);\n\t\t\t}\n\t\t\tself.socket.send(JSON.stringify({name: name, args: args}));\n\t\t}\n\n\t\tthis.socket.addEventListener('message', function (event) {\n\t\t\tvar m = JSON.parse(event.data);\n\t\t\tvar ls = self.socket.listeners[m.name];\n\t\t\tif (ls) {\n\t\t\t\tfor (var i=0; i<ls.length; i++) {\n\t\t\t\t\tvar l = ls[i];\n\t\t\t\t\tl.apply(l, m.args);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n    this.socket.on('instance terminal out', function(name ,data) {\n      var instance = self.instances[name];\n      if (instance && instance.terms) {\n        instance.terms.forEach(function(term) {term.write(data)});\n      } else {\n        //Buffer the data if term is not ready\n        if (self.instanceBuffer[name] == undefined) self.instanceBuffer[name] = '';\n        self.instanceBuffer[name] += data;\n      }\n    });\n\n    // Resize all terminals\n    this.socket.on('instance viewport resize', function(cols, rows) {\n      // Resize all terminals\n      for (var name in self.instances) {\n        self.instances[name].terms.forEach(function(term){\n          term.resize(cols,rows);\n        });\n      };\n    });\n\n    // Handle window resizing\n    window.onresize = function() {\n      self.resize();\n    };\n\n    sendRequest({\n      method: 'GET',\n      url: this.opts.baseUrl + '/sessions/' + sessionId,\n    }, function(response) {\n      var session = JSON.parse(response.responseText);\n      for (var name in session.instances) {\n        var i = session.instances[name];\n        // Setup empty terms\n        i.terms = [];\n        self.instances[name] = i;\n      }\n      !callback || callback();\n    });\n  };\n\n\n  pwd.prototype.resize = function() {\n    var name = Object.keys(this.instances)[0]\n    for (var n in this.instances) {\n      // there might be some instances without terminals\n      if (this.instances[n].terms) {\n        for (var i = 0; i < this.instances[n].terms.length; i ++) {\n          var term = this.instances[n].terms[i];\n          var size = term.proposeGeometry();\n          if (size.cols && size.rows) {\n            return this.socket.emit('instance viewport resize', size.cols, size.rows);\n          }\n        }\n      }\n    }\n  };\n\n\n  // I know, opts and data can be ommited. I'm not a JS developer =(\n  // Data needs to be sent encoded appropriately\n  function sendRequest(req, callback) {\n    var request = new XMLHttpRequest();\n    var asyncReq = !req.sync\n    request.open(req.method, req.url, asyncReq);\n\n    if (req.opts && req.opts.headers) {\n      for (var key in req.opts.headers) {\n        request.setRequestHeader(key, req.opts.headers[key]);\n      }\n    }\n    request.withCredentials = true;\n    request.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n    request.onload = function() {\n      callback(request);\n    };\n    if (typeof(req.data) === 'object' && req.data.constructor.name != 'FormData') {\n      request.send(JSON.stringify(req.data));\n    } else {\n      request.send(req.data);\n    }\n  };\n\n  pwd.prototype.createInstance = function(opts, callback) {\n    var self = this;\n    opts.ImageName = opts.ImageName || self.opts.ImageName;\n    //TODO handle http connection errors\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/instances',\n      opts: {headers:{'Content-type':'application/json'}},\n      data: opts\n    }, function(response) {\n      if (response.status == 200) {\n        var i = JSON.parse(response.responseText);\n        i.terms = [];\n        self.instances[i.name] = i;\n        callback(undefined, i);\n      } else if (response.status == 409) {\n        var err = new Error();\n        err.max = true;\n        callback(err);\n      } else {\n        callback(new Error());\n      }\n    });\n  }\n\n  pwd.prototype.upload = function(name, data, callback) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/instances/' + name + '/uploads',\n      opts: {},\n      data: data\n    }, function(response) {\n      if (response.status == 200) {\n        if (callback) {\n            callback(undefined);\n        }\n      } else {\n        if (callback) {\n            callback(new Error());\n        }\n      }\n    });\n  }\n\n\n  pwd.prototype.setup = function(data, callback) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/setup',\n      opts: {headers:{'Content-type':'application/json'}},\n      data: data\n    }, function(response) {\n      if (response.status == 200) {\n        if (callback) {\n            callback(undefined);\n        }\n      } else {\n        if (callback) {\n            callback(new Error());\n        }\n      }\n    });\n  }\n\n  pwd.prototype.exec = function(name, data, callback) {\n    var self = this;\n    sendRequest({\n      method: 'POST',\n      url: self.opts.baseUrl + '/sessions/' + this.sessionId + '/instances/' + name + '/exec',\n      opts: {headers:{'Content-type':'application/json'}},\n      data: {command: data}\n    }, function(response) {\n      if (response.status == 200) {\n        if (callback) {\n            callback(undefined);\n        }\n      } else {\n        if (callback) {\n            callback(new Error());\n        }\n      }\n    });\n  }\n\n  pwd.prototype.createTerminal = function(term, name) {\n    var self = this;\n    var i = this.instances[name];\n    term.name = term.name || term.selector;\n\n    var elements = document.querySelectorAll(term.selector);\n    for (var n=0; n < elements.length; ++n) {\n      var t = new Terminal({cursorBlink: false});\n      t.open(elements[n], {focus: true});\n      t.on('data', function(d) {\n        self.socket.emit('instance terminal in', i.name, d);\n      });\n\n      if (!i.terms) {\n        i.terms = [];\n      }\n      i.terms.push(t);\n      self.resize();\n    }\n\n\n    registerPortHandlers.call(self, term.selector, i)\n\n    registerInputHandlers.call(self, term.selector, i);\n\n    if (self.instanceBuffer[name]) {\n      //Flush buffer and clear it\n      i.terms.forEach(function(term){\n        term.write(self.instanceBuffer[name]);\n      });\n      self.instanceBuffer[name] = '';\n    }\n\n    return i.terms;\n  }\n\n  pwd.prototype.terminal = function(term, callback) {\n    var self = this;\n    var hostname = \"node\" + (this.terms.indexOf(term) + 1);\n    this.createInstance({type: term.type, Hostname: hostname}, function(err, instance) {\n      if (err && err.max) {\n        !callback || callback(new Error(\"Max instances reached\"))\n        return\n      } else if (err) {\n        !callback || callback(new Error(\"Error creating instance\"))\n        return\n      }\n\n      self.createTerminal(term, instance.name);\n\n\n      !callback || callback(undefined, instance);\n\n    });\n  }\n\n\n\n  // define your namespace myApp\n  window.pwd = new pwd();\n\n})(window, undefined);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.js\n// module id = 29\n// module chunks = 0","exports = module.exports = require(\"../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\\n * https://github.com/chjj/term.js\\n * @license MIT\\n *\\n * Permission is hereby granted, free of charge, to any person obtaining a copy\\n * of this software and associated documentation files (the \\\"Software\\\"), to deal\\n * in the Software without restriction, including without limitation the rights\\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\n * copies of the Software, and to permit persons to whom the Software is\\n * furnished to do so, subject to the following conditions:\\n *\\n * The above copyright notice and this permission notice shall be included in\\n * all copies or substantial portions of the Software.\\n *\\n * THE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\\n * THE SOFTWARE.\\n *\\n * Originally forked from (with the author's permission):\\n *   Fabrice Bellard's javascript vt100 for jslinux:\\n *   http://bellard.org/jslinux/\\n *   Copyright (c) 2011 Fabrice Bellard\\n *   The original design remains. The terminal itself\\n *   has been extended to include xterm CSI codes, among\\n *   other features.\\n */\\n\\n/**\\n *  Default styles for xterm.js\\n */\\n\\n.xterm {\\n    font-feature-settings: \\\"liga\\\" 0;\\n    position: relative;\\n    user-select: none;\\n    -ms-user-select: none;\\n    -webkit-user-select: none;\\n}\\n\\n.xterm.focus,\\n.xterm:focus {\\n    outline: none;\\n}\\n\\n.xterm .xterm-helpers {\\n    position: absolute;\\n    top: 0;\\n    /**\\n     * The z-index of the helpers must be higher than the canvases in order for\\n     * IMEs to appear on top.\\n     */\\n    z-index: 10;\\n}\\n\\n.xterm .xterm-helper-textarea {\\n    /*\\n     * HACK: to fix IE's blinking cursor\\n     * Move textarea out of the screen to the far left, so that the cursor is not visible.\\n     */\\n    position: absolute;\\n    opacity: 0;\\n    left: -9999em;\\n    top: 0;\\n    width: 0;\\n    height: 0;\\n    z-index: -10;\\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\\n    white-space: nowrap;\\n    overflow: hidden;\\n    resize: none;\\n}\\n\\n.xterm .composition-view {\\n    /* TODO: Composition position got messed up somewhere */\\n    background: #000;\\n    color: #FFF;\\n    display: none;\\n    position: absolute;\\n    white-space: nowrap;\\n    z-index: 1;\\n}\\n\\n.xterm .composition-view.active {\\n    display: block;\\n}\\n\\n.xterm .xterm-viewport {\\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\\n    background-color: #000;\\n    overflow-y: scroll;\\n    cursor: default;\\n    position: absolute;\\n    right: 0;\\n    left: 0;\\n    top: 0;\\n    bottom: 0;\\n}\\n\\n.xterm .xterm-screen {\\n    position: relative;\\n}\\n\\n.xterm .xterm-screen canvas {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n}\\n\\n.xterm .xterm-scroll-area {\\n    visibility: hidden;\\n}\\n\\n.xterm-char-measure-element {\\n    display: inline-block;\\n    visibility: hidden;\\n    position: absolute;\\n    top: 0;\\n    left: -9999em;\\n    line-height: normal;\\n}\\n\\n.xterm {\\n    cursor: text;\\n}\\n\\n.xterm.enable-mouse-events {\\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\\n    cursor: default;\\n}\\n\\n.xterm.xterm-cursor-pointer {\\n    cursor: pointer;\\n}\\n\\n.xterm.column-select.focus {\\n    /* Column selection mode */\\n    cursor: crosshair;\\n}\\n\\n.xterm .xterm-accessibility,\\n.xterm .xterm-message {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    bottom: 0;\\n    right: 0;\\n    z-index: 100;\\n    color: transparent;\\n}\\n\\n.xterm .live-region {\\n    position: absolute;\\n    left: -9999px;\\n    width: 1px;\\n    height: 1px;\\n    overflow: hidden;\\n}\\n\\n.xterm-dim {\\n    opacity: 0.5;\\n}\\n\\n.xterm-underline {\\n    text-decoration: underline;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/xterm/dist/xterm.css\n// module id = 30\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 31\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/lib/addStyles.js\n// module id = 32\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/lib/urls.js\n// module id = 33\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Strings = require(\"./Strings\");\nvar Platform_1 = require(\"./common/Platform\");\nvar RenderDebouncer_1 = require(\"./ui/RenderDebouncer\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Lifecycle_2 = require(\"./common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"./ui/ScreenDprMonitor\");\nvar MAX_ROWS_TO_READ = 20;\nvar AccessibilityManager = (function (_super) {\n    __extends(AccessibilityManager, _super);\n    function AccessibilityManager(_terminal, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._dimensions = _dimensions;\n        _this._liveRegionLineCount = 0;\n        _this._charsToConsume = [];\n        _this._charsToAnnounce = '';\n        _this._accessibilityTreeRoot = document.createElement('div');\n        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add('xterm-accessibility-tree');\n        _this._rowElements = [];\n        for (var i = 0; i < _this._terminal.rows; i++) {\n            _this._rowElements[i] = _this._createAccessibilityTreeNode();\n            _this._rowContainer.appendChild(_this._rowElements[i]);\n        }\n        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };\n        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };\n        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);\n        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);\n        _this._refreshRowsDimensions();\n        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);\n        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._refreshRows();\n        _this._liveRegion = document.createElement('div');\n        _this._liveRegion.classList.add('live-region');\n        _this._liveRegion.setAttribute('aria-live', 'assertive');\n        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);\n        _this.register(_this._renderRowsDebouncer);\n        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));\n        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));\n        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));\n        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\\n'); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));\n        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));\n        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this.register(_this._screenDprMonitor);\n        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });\n        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));\n        return _this;\n    }\n    AccessibilityManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal.element.removeChild(this._accessibilityTreeRoot);\n        this._rowElements.length = 0;\n    };\n    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {\n        var boundaryElement = e.target;\n        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];\n        var posInSet = boundaryElement.getAttribute('aria-posinset');\n        var lastRowPos = position === 0 ? '1' : \"\" + this._terminal.buffer.lines.length;\n        if (posInSet === lastRowPos) {\n            return;\n        }\n        if (e.relatedTarget !== beforeBoundaryElement) {\n            return;\n        }\n        var topBoundaryElement;\n        var bottomBoundaryElement;\n        if (position === 0) {\n            topBoundaryElement = boundaryElement;\n            bottomBoundaryElement = this._rowElements.pop();\n            this._rowContainer.removeChild(bottomBoundaryElement);\n        }\n        else {\n            topBoundaryElement = this._rowElements.shift();\n            bottomBoundaryElement = boundaryElement;\n            this._rowContainer.removeChild(topBoundaryElement);\n        }\n        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n        if (position === 0) {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.unshift(newElement);\n            this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n        }\n        else {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.push(newElement);\n            this._rowContainer.appendChild(newElement);\n        }\n        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._terminal.scrollLines(position === 0 ? -1 : 1);\n        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    AccessibilityManager.prototype._onResize = function (rows) {\n        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n            this._rowElements[i] = this._createAccessibilityTreeNode();\n            this._rowContainer.appendChild(this._rowElements[i]);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {\n        var element = document.createElement('div');\n        element.setAttribute('role', 'listitem');\n        element.tabIndex = -1;\n        this._refreshRowDimensions(element);\n        return element;\n    };\n    AccessibilityManager.prototype._onTab = function (spaceCount) {\n        for (var i = 0; i < spaceCount; i++) {\n            this._onChar(' ');\n        }\n    };\n    AccessibilityManager.prototype._onChar = function (char) {\n        var _this = this;\n        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n            if (this._charsToConsume.length > 0) {\n                var shiftedChar = this._charsToConsume.shift();\n                if (shiftedChar !== char) {\n                    this._charsToAnnounce += char;\n                }\n            }\n            else {\n                this._charsToAnnounce += char;\n            }\n            if (char === '\\n') {\n                this._liveRegionLineCount++;\n                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n                    this._liveRegion.textContent += Strings.tooMuchOutput;\n                }\n            }\n            if (Platform_1.isMac) {\n                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n                    setTimeout(function () {\n                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n                    }, 0);\n                }\n            }\n        }\n    };\n    AccessibilityManager.prototype._clearLiveRegion = function () {\n        this._liveRegion.textContent = '';\n        this._liveRegionLineCount = 0;\n        if (Platform_1.isMac) {\n            if (this._liveRegion.parentNode) {\n                this._accessibilityTreeRoot.removeChild(this._liveRegion);\n            }\n        }\n    };\n    AccessibilityManager.prototype._onKey = function (keyChar) {\n        this._clearLiveRegion();\n        this._charsToConsume.push(keyChar);\n    };\n    AccessibilityManager.prototype._refreshRows = function (start, end) {\n        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    AccessibilityManager.prototype._renderRows = function (start, end) {\n        var buffer = this._terminal.buffer;\n        var setSize = buffer.lines.length.toString();\n        for (var i = start; i <= end; i++) {\n            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n            var posInSet = (buffer.ydisp + i + 1).toString();\n            var element = this._rowElements[i];\n            if (element) {\n                element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;\n                element.setAttribute('aria-posinset', posInSet);\n                element.setAttribute('aria-setsize', setSize);\n            }\n        }\n        this._announceCharacters();\n    };\n    AccessibilityManager.prototype._refreshRowsDimensions = function () {\n        if (!this._dimensions.actualCellHeight) {\n            return;\n        }\n        if (this._rowElements.length !== this._terminal.rows) {\n            this._onResize(this._terminal.rows);\n        }\n        for (var i = 0; i < this._terminal.rows; i++) {\n            this._refreshRowDimensions(this._rowElements[i]);\n        }\n    };\n    AccessibilityManager.prototype.setDimensions = function (dimensions) {\n        this._dimensions = dimensions;\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._refreshRowDimensions = function (element) {\n        element.style.height = this._dimensions.actualCellHeight + \"px\";\n    };\n    AccessibilityManager.prototype._announceCharacters = function () {\n        if (this._charsToAnnounce.length === 0) {\n            return;\n        }\n        this._liveRegion.textContent += this._charsToAnnounce;\n        this._charsToAnnounce = '';\n    };\n    return AccessibilityManager;\n}(Lifecycle_2.Disposable));\nexports.AccessibilityManager = AccessibilityManager;\n//# sourceMappingURL=AccessibilityManager.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/AccessibilityManager.js\n// module id = 34\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferSet = (function () {\n    function BufferSet(_terminal) {\n        this._terminal = _terminal;\n        this._onBufferActivate = new EventEmitter2_1.EventEmitter2();\n        this._normal = new Buffer_1.Buffer(this._terminal, true);\n        this._normal.fillViewportRows();\n        this._alt = new Buffer_1.Buffer(this._terminal, false);\n        this._activeBuffer = this._normal;\n        this.setupTabStops();\n    }\n    Object.defineProperty(BufferSet.prototype, \"onBufferActivate\", {\n        get: function () { return this._onBufferActivate.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"alt\", {\n        get: function () {\n            return this._alt;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"active\", {\n        get: function () {\n            return this._activeBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"normal\", {\n        get: function () {\n            return this._normal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferSet.prototype.activateNormalBuffer = function () {\n        if (this._activeBuffer === this._normal) {\n            return;\n        }\n        this._normal.x = this._alt.x;\n        this._normal.y = this._alt.y;\n        this._alt.clear();\n        this._activeBuffer = this._normal;\n        this._onBufferActivate.fire({\n            activeBuffer: this._normal,\n            inactiveBuffer: this._alt\n        });\n    };\n    BufferSet.prototype.activateAltBuffer = function (fillAttr) {\n        if (this._activeBuffer === this._alt) {\n            return;\n        }\n        this._alt.fillViewportRows(fillAttr);\n        this._alt.x = this._normal.x;\n        this._alt.y = this._normal.y;\n        this._activeBuffer = this._alt;\n        this._onBufferActivate.fire({\n            activeBuffer: this._alt,\n            inactiveBuffer: this._normal\n        });\n    };\n    BufferSet.prototype.resize = function (newCols, newRows) {\n        this._normal.resize(newCols, newRows);\n        this._alt.resize(newCols, newRows);\n    };\n    BufferSet.prototype.setupTabStops = function (i) {\n        this._normal.setupTabStops(i);\n        this._alt.setupTabStops(i);\n    };\n    return BufferSet;\n}());\nexports.BufferSet = BufferSet;\n//# sourceMappingURL=BufferSet.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/BufferSet.js\n// module id = 35\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar CharMeasure = (function () {\n    function CharMeasure(document, parentElement) {\n        this._onCharSizeChanged = new EventEmitter2_1.EventEmitter2();\n        this._document = document;\n        this._parentElement = parentElement;\n        this._measureElement = this._document.createElement('span');\n        this._measureElement.classList.add('xterm-char-measure-element');\n        this._measureElement.textContent = 'W';\n        this._measureElement.setAttribute('aria-hidden', 'true');\n        this._parentElement.appendChild(this._measureElement);\n    }\n    Object.defineProperty(CharMeasure.prototype, \"onCharSizeChanged\", {\n        get: function () { return this._onCharSizeChanged.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function (options) {\n        this._measureElement.style.fontFamily = options.fontFamily;\n        this._measureElement.style.fontSize = options.fontSize + \"px\";\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        var adjustedHeight = Math.ceil(geometry.height);\n        if (this._width !== geometry.width || this._height !== adjustedHeight) {\n            this._width = geometry.width;\n            this._height = adjustedHeight;\n            this._onCharSizeChanged.fire();\n        }\n    };\n    return CharMeasure;\n}());\nexports.CharMeasure = CharMeasure;\n//# sourceMappingURL=CharMeasure.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/CharMeasure.js\n// module id = 36\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction prepareTextForTerminal(text) {\n    return text.replace(/\\r?\\n/g, '\\r');\n}\nexports.prepareTextForTerminal = prepareTextForTerminal;\nfunction bracketTextForPaste(text, bracketedPasteMode) {\n    if (bracketedPasteMode) {\n        return '\\x1b[200~' + text + '\\x1b[201~';\n    }\n    return text;\n}\nexports.bracketTextForPaste = bracketTextForPaste;\nfunction copyHandler(ev, term, selectionManager) {\n    if (term.browser.isMSIE) {\n        window.clipboardData.setData('Text', selectionManager.selectionText);\n    }\n    else {\n        ev.clipboardData.setData('text/plain', selectionManager.selectionText);\n    }\n    ev.preventDefault();\n}\nexports.copyHandler = copyHandler;\nfunction pasteHandler(ev, term) {\n    ev.stopPropagation();\n    var text;\n    var dispatchPaste = function (text) {\n        text = prepareTextForTerminal(text);\n        text = bracketTextForPaste(text, term.bracketedPasteMode);\n        term.handler(text);\n        term.textarea.value = '';\n        term.emit('paste', text);\n        term.cancel(ev);\n    };\n    if (term.browser.isMSIE) {\n        if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n            dispatchPaste(text);\n        }\n    }\n    else {\n        if (ev.clipboardData) {\n            text = ev.clipboardData.getData('text/plain');\n            dispatchPaste(text);\n        }\n    }\n}\nexports.pasteHandler = pasteHandler;\nfunction moveTextAreaUnderMouseCursor(ev, term) {\n    var pos = term.screenElement.getBoundingClientRect();\n    var left = ev.clientX - pos.left - 10;\n    var top = ev.clientY - pos.top - 10;\n    term.textarea.style.position = 'absolute';\n    term.textarea.style.width = '20px';\n    term.textarea.style.height = '20px';\n    term.textarea.style.left = left + \"px\";\n    term.textarea.style.top = top + \"px\";\n    term.textarea.style.zIndex = '1000';\n    term.textarea.focus();\n    setTimeout(function () {\n        term.textarea.style.position = null;\n        term.textarea.style.width = null;\n        term.textarea.style.height = null;\n        term.textarea.style.left = null;\n        term.textarea.style.top = null;\n        term.textarea.style.zIndex = null;\n    }, 200);\n}\nexports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;\nfunction rightClickHandler(ev, term, selectionManager, shouldSelectWord) {\n    moveTextAreaUnderMouseCursor(ev, term);\n    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {\n        selectionManager.selectWordAtCursor(ev);\n    }\n    term.textarea.value = selectionManager.selectionText;\n    term.textarea.select();\n}\nexports.rightClickHandler = rightClickHandler;\n//# sourceMappingURL=Clipboard.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/Clipboard.js\n// module id = 37\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CompositionHelper = (function () {\n    function CompositionHelper(_textarea, _compositionView, _terminal) {\n        this._textarea = _textarea;\n        this._compositionView = _compositionView;\n        this._terminal = _terminal;\n        this._isComposing = false;\n        this._isSendingComposition = false;\n        this._compositionPosition = { start: null, end: null };\n    }\n    CompositionHelper.prototype.compositionstart = function () {\n        this._isComposing = true;\n        this._compositionPosition.start = this._textarea.value.length;\n        this._compositionView.textContent = '';\n        this._compositionView.classList.add('active');\n    };\n    CompositionHelper.prototype.compositionupdate = function (ev) {\n        var _this = this;\n        this._compositionView.textContent = ev.data;\n        this.updateCompositionElements();\n        setTimeout(function () {\n            _this._compositionPosition.end = _this._textarea.value.length;\n        }, 0);\n    };\n    CompositionHelper.prototype.compositionend = function () {\n        this._finalizeComposition(true);\n    };\n    CompositionHelper.prototype.keydown = function (ev) {\n        if (this._isComposing || this._isSendingComposition) {\n            if (ev.keyCode === 229) {\n                return false;\n            }\n            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n                return false;\n            }\n            this._finalizeComposition(false);\n        }\n        if (ev.keyCode === 229) {\n            this._handleAnyTextareaChanges();\n            return false;\n        }\n        return true;\n    };\n    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {\n        var _this = this;\n        this._compositionView.classList.remove('active');\n        this._isComposing = false;\n        this._clearTextareaPosition();\n        if (!waitForPropagation) {\n            this._isSendingComposition = false;\n            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n            this._terminal.handler(input);\n        }\n        else {\n            var currentCompositionPosition_1 = {\n                start: this._compositionPosition.start,\n                end: this._compositionPosition.end\n            };\n            this._isSendingComposition = true;\n            setTimeout(function () {\n                if (_this._isSendingComposition) {\n                    _this._isSendingComposition = false;\n                    var input = void 0;\n                    if (_this._isComposing) {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);\n                    }\n                    else {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);\n                    }\n                    _this._terminal.handler(input);\n                }\n            }, 0);\n        }\n    };\n    CompositionHelper.prototype._handleAnyTextareaChanges = function () {\n        var _this = this;\n        var oldValue = this._textarea.value;\n        setTimeout(function () {\n            if (!_this._isComposing) {\n                var newValue = _this._textarea.value;\n                var diff = newValue.replace(oldValue, '');\n                if (diff.length > 0) {\n                    _this._terminal.handler(diff);\n                }\n            }\n        }, 0);\n    };\n    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {\n        var _this = this;\n        if (!this._isComposing) {\n            return;\n        }\n        if (this._terminal.buffer.isCursorInViewport) {\n            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);\n            var cursorTop = this._terminal.buffer.y * cellHeight;\n            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;\n            this._compositionView.style.left = cursorLeft + 'px';\n            this._compositionView.style.top = cursorTop + 'px';\n            this._compositionView.style.height = cellHeight + 'px';\n            this._compositionView.style.lineHeight = cellHeight + 'px';\n            this._compositionView.style.fontFamily = this._terminal.options.fontFamily;\n            this._compositionView.style.fontSize = this._terminal.options.fontSize + 'px';\n            var compositionViewBounds = this._compositionView.getBoundingClientRect();\n            this._textarea.style.left = cursorLeft + 'px';\n            this._textarea.style.top = cursorTop + 'px';\n            this._textarea.style.width = compositionViewBounds.width + 'px';\n            this._textarea.style.height = compositionViewBounds.height + 'px';\n            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n        }\n        if (!dontRecurse) {\n            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);\n        }\n    };\n    CompositionHelper.prototype._clearTextareaPosition = function () {\n        this._textarea.style.left = '';\n        this._textarea.style.top = '';\n    };\n    return CompositionHelper;\n}());\nexports.CompositionHelper = CompositionHelper;\n//# sourceMappingURL=CompositionHelper.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/CompositionHelper.js\n// module id = 38\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nfunction r(low, high) {\n    var c = high - low;\n    var arr = new Array(c);\n    while (c--) {\n        arr[c] = --high;\n    }\n    return arr;\n}\nvar TransitionTable = (function () {\n    function TransitionTable(length) {\n        this.table = (typeof Uint8Array === 'undefined')\n            ? new Array(length)\n            : new Uint8Array(length);\n    }\n    TransitionTable.prototype.add = function (code, state, action, next) {\n        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);\n    };\n    TransitionTable.prototype.addMany = function (codes, state, action, next) {\n        for (var i = 0; i < codes.length; i++) {\n            this.add(codes[i], state, action, next);\n        }\n    };\n    return TransitionTable;\n}());\nexports.TransitionTable = TransitionTable;\nvar PRINTABLES = r(0x20, 0x7f);\nvar EXECUTABLES = r(0x00, 0x18);\nEXECUTABLES.push(0x19);\nEXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\nvar NON_ASCII_PRINTABLE = 0xA0;\nexports.VT500_TRANSITION_TABLE = (function () {\n    var table = new TransitionTable(4095);\n    var states = r(0, 13 + 1);\n    var state;\n    for (state in states) {\n        for (var code = 0; code <= NON_ASCII_PRINTABLE; ++code) {\n            table.add(code, state, 1, 0);\n        }\n    }\n    table.addMany(PRINTABLES, 0, 2, 0);\n    for (state in states) {\n        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);\n        table.addMany(r(0x80, 0x90), state, 3, 0);\n        table.addMany(r(0x90, 0x98), state, 3, 0);\n        table.add(0x9c, state, 0, 0);\n        table.add(0x1b, state, 11, 1);\n        table.add(0x9d, state, 4, 8);\n        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);\n        table.add(0x9b, state, 11, 3);\n        table.add(0x90, state, 11, 9);\n    }\n    table.addMany(EXECUTABLES, 0, 3, 0);\n    table.addMany(EXECUTABLES, 1, 3, 1);\n    table.add(0x7f, 1, 0, 1);\n    table.addMany(EXECUTABLES, 8, 0, 8);\n    table.addMany(EXECUTABLES, 3, 3, 3);\n    table.add(0x7f, 3, 0, 3);\n    table.addMany(EXECUTABLES, 4, 3, 4);\n    table.add(0x7f, 4, 0, 4);\n    table.addMany(EXECUTABLES, 6, 3, 6);\n    table.addMany(EXECUTABLES, 5, 3, 5);\n    table.add(0x7f, 5, 0, 5);\n    table.addMany(EXECUTABLES, 2, 3, 2);\n    table.add(0x7f, 2, 0, 2);\n    table.add(0x5d, 1, 4, 8);\n    table.addMany(PRINTABLES, 8, 5, 8);\n    table.add(0x7f, 8, 5, 8);\n    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);\n    table.addMany(r(0x1c, 0x20), 8, 0, 8);\n    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);\n    table.addMany(PRINTABLES, 7, 0, 7);\n    table.addMany(EXECUTABLES, 7, 0, 7);\n    table.add(0x9c, 7, 0, 0);\n    table.add(0x7f, 7, 0, 7);\n    table.add(0x5b, 1, 11, 3);\n    table.addMany(r(0x40, 0x7f), 3, 7, 0);\n    table.addMany(r(0x30, 0x3a), 3, 8, 4);\n    table.add(0x3b, 3, 8, 4);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);\n    table.addMany(r(0x30, 0x3a), 4, 8, 4);\n    table.add(0x3b, 4, 8, 4);\n    table.addMany(r(0x40, 0x7f), 4, 7, 0);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);\n    table.addMany(r(0x20, 0x40), 6, 0, 6);\n    table.add(0x7f, 6, 0, 6);\n    table.addMany(r(0x40, 0x7f), 6, 0, 0);\n    table.add(0x3a, 3, 0, 6);\n    table.addMany(r(0x20, 0x30), 3, 9, 5);\n    table.addMany(r(0x20, 0x30), 5, 9, 5);\n    table.addMany(r(0x30, 0x40), 5, 0, 6);\n    table.addMany(r(0x40, 0x7f), 5, 7, 0);\n    table.addMany(r(0x20, 0x30), 4, 9, 5);\n    table.addMany(r(0x20, 0x30), 1, 9, 2);\n    table.addMany(r(0x20, 0x30), 2, 9, 2);\n    table.addMany(r(0x30, 0x7f), 2, 10, 0);\n    table.addMany(r(0x30, 0x50), 1, 10, 0);\n    table.addMany(r(0x51, 0x58), 1, 10, 0);\n    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);\n    table.addMany(r(0x60, 0x7f), 1, 10, 0);\n    table.add(0x50, 1, 11, 9);\n    table.addMany(EXECUTABLES, 9, 0, 9);\n    table.add(0x7f, 9, 0, 9);\n    table.addMany(r(0x1c, 0x20), 9, 0, 9);\n    table.addMany(r(0x20, 0x30), 9, 9, 12);\n    table.add(0x3a, 9, 0, 11);\n    table.addMany(r(0x30, 0x3a), 9, 8, 10);\n    table.add(0x3b, 9, 8, 10);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);\n    table.addMany(EXECUTABLES, 11, 0, 11);\n    table.addMany(r(0x20, 0x80), 11, 0, 11);\n    table.addMany(r(0x1c, 0x20), 11, 0, 11);\n    table.addMany(EXECUTABLES, 10, 0, 10);\n    table.add(0x7f, 10, 0, 10);\n    table.addMany(r(0x1c, 0x20), 10, 0, 10);\n    table.addMany(r(0x30, 0x3a), 10, 8, 10);\n    table.add(0x3b, 10, 8, 10);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);\n    table.addMany(r(0x20, 0x30), 10, 9, 12);\n    table.addMany(EXECUTABLES, 12, 0, 12);\n    table.add(0x7f, 12, 0, 12);\n    table.addMany(r(0x1c, 0x20), 12, 0, 12);\n    table.addMany(r(0x20, 0x30), 12, 9, 12);\n    table.addMany(r(0x30, 0x40), 12, 0, 11);\n    table.addMany(r(0x40, 0x7f), 12, 12, 13);\n    table.addMany(r(0x40, 0x7f), 10, 12, 13);\n    table.addMany(r(0x40, 0x7f), 9, 12, 13);\n    table.addMany(EXECUTABLES, 13, 13, 13);\n    table.addMany(PRINTABLES, 13, 13, 13);\n    table.add(0x7f, 13, 0, 13);\n    table.addMany([0x1b, 0x9c], 13, 14, 0);\n    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);\n    return table;\n})();\nvar DcsDummy = (function () {\n    function DcsDummy() {\n    }\n    DcsDummy.prototype.hook = function (collect, params, flag) { };\n    DcsDummy.prototype.put = function (data, start, end) { };\n    DcsDummy.prototype.unhook = function () { };\n    return DcsDummy;\n}());\nvar EscapeSequenceParser = (function (_super) {\n    __extends(EscapeSequenceParser, _super);\n    function EscapeSequenceParser(TRANSITIONS) {\n        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }\n        var _this = _super.call(this) || this;\n        _this.TRANSITIONS = TRANSITIONS;\n        _this.initialState = 0;\n        _this.currentState = _this.initialState;\n        _this._osc = '';\n        _this._params = [0];\n        _this._collect = '';\n        _this._printHandlerFb = function (data, start, end) { };\n        _this._executeHandlerFb = function (code) { };\n        _this._csiHandlerFb = function (collect, params, flag) { };\n        _this._escHandlerFb = function (collect, flag) { };\n        _this._oscHandlerFb = function (identifier, data) { };\n        _this._dcsHandlerFb = new DcsDummy();\n        _this._errorHandlerFb = function (state) { return state; };\n        _this._printHandler = _this._printHandlerFb;\n        _this._executeHandlers = Object.create(null);\n        _this._csiHandlers = Object.create(null);\n        _this._escHandlers = Object.create(null);\n        _this._oscHandlers = Object.create(null);\n        _this._dcsHandlers = Object.create(null);\n        _this._activeDcsHandler = null;\n        _this._errorHandler = _this._errorHandlerFb;\n        _this.setEscHandler('\\\\', function () { });\n        return _this;\n    }\n    EscapeSequenceParser.prototype.dispose = function () {\n        this._printHandlerFb = null;\n        this._executeHandlerFb = null;\n        this._csiHandlerFb = null;\n        this._escHandlerFb = null;\n        this._oscHandlerFb = null;\n        this._dcsHandlerFb = null;\n        this._errorHandlerFb = null;\n        this._printHandler = null;\n        this._executeHandlers = null;\n        this._escHandlers = null;\n        this._csiHandlers = null;\n        this._oscHandlers = null;\n        this._dcsHandlers = null;\n        this._activeDcsHandler = null;\n        this._errorHandler = null;\n    };\n    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {\n        this._printHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearPrintHandler = function () {\n        this._printHandler = this._printHandlerFb;\n    };\n    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {\n        this._executeHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {\n        if (this._executeHandlers[flag.charCodeAt(0)])\n            delete this._executeHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {\n        this._executeHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addCsiHandler = function (flag, callback) {\n        var index = flag.charCodeAt(0);\n        if (this._csiHandlers[index] === undefined) {\n            this._csiHandlers[index] = [];\n        }\n        var handlerList = this._csiHandlers[index];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {\n        this._csiHandlers[flag.charCodeAt(0)] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {\n        if (this._csiHandlers[flag.charCodeAt(0)])\n            delete this._csiHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {\n        this._csiHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {\n        this._escHandlers[collectAndFlag] = callback;\n    };\n    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {\n        if (this._escHandlers[collectAndFlag])\n            delete this._escHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {\n        this._escHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addOscHandler = function (ident, callback) {\n        if (this._oscHandlers[ident] === undefined) {\n            this._oscHandlers[ident] = [];\n        }\n        var handlerList = this._oscHandlers[ident];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {\n        this._oscHandlers[ident] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {\n        if (this._oscHandlers[ident])\n            delete this._oscHandlers[ident];\n    };\n    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {\n        this._oscHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {\n        this._dcsHandlers[collectAndFlag] = handler;\n    };\n    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {\n        if (this._dcsHandlers[collectAndFlag])\n            delete this._dcsHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {\n        this._dcsHandlerFb = handler;\n    };\n    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {\n        this._errorHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearErrorHandler = function () {\n        this._errorHandler = this._errorHandlerFb;\n    };\n    EscapeSequenceParser.prototype.reset = function () {\n        this.currentState = this.initialState;\n        this._osc = '';\n        this._params = [0];\n        this._collect = '';\n        this._activeDcsHandler = null;\n    };\n    EscapeSequenceParser.prototype.parse = function (data, length) {\n        var code = 0;\n        var transition = 0;\n        var error = false;\n        var currentState = this.currentState;\n        var print = -1;\n        var dcs = -1;\n        var osc = this._osc;\n        var collect = this._collect;\n        var params = this._params;\n        var table = this.TRANSITIONS.table;\n        var dcsHandler = this._activeDcsHandler;\n        var callback = null;\n        for (var i = 0; i < length; ++i) {\n            code = data[i];\n            if (currentState === 0 && code > 0x1f && code < 0x80) {\n                print = (~print) ? print : i;\n                do\n                    i++;\n                while (i < length && data[i] > 0x1f && data[i] < 0x80);\n                i--;\n                continue;\n            }\n            if (currentState === 4 && (code > 0x2f && code < 0x39)) {\n                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                continue;\n            }\n            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n            switch (transition >> 4) {\n                case 2:\n                    print = (~print) ? print : i;\n                    break;\n                case 3:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    callback = this._executeHandlers[code];\n                    if (callback)\n                        callback();\n                    else\n                        this._executeHandlerFb(code);\n                    break;\n                case 0:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    else if (~dcs) {\n                        dcsHandler.put(data, dcs, i);\n                        dcs = -1;\n                    }\n                    break;\n                case 1:\n                    if (code > 0x9f) {\n                        switch (currentState) {\n                            case 0:\n                                print = (~print) ? print : i;\n                                break;\n                            case 6:\n                                transition |= 6;\n                                break;\n                            case 11:\n                                transition |= 11;\n                                break;\n                            case 13:\n                                dcs = (~dcs) ? dcs : i;\n                                transition |= 13;\n                                break;\n                            default:\n                                error = true;\n                        }\n                    }\n                    else {\n                        error = true;\n                    }\n                    if (error) {\n                        var inject = this._errorHandler({\n                            position: i,\n                            code: code,\n                            currentState: currentState,\n                            print: print,\n                            dcs: dcs,\n                            osc: osc,\n                            collect: collect,\n                            params: params,\n                            abort: false\n                        });\n                        if (inject.abort)\n                            return;\n                        error = false;\n                    }\n                    break;\n                case 7:\n                    var handlers = this._csiHandlers[code];\n                    var j = handlers ? handlers.length - 1 : -1;\n                    for (; j >= 0; j--) {\n                        if (handlers[j](params, collect) !== false) {\n                            break;\n                        }\n                    }\n                    if (j < 0) {\n                        this._csiHandlerFb(collect, params, code);\n                    }\n                    break;\n                case 8:\n                    if (code === 0x3b)\n                        params.push(0);\n                    else\n                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                    break;\n                case 9:\n                    collect += String.fromCharCode(code);\n                    break;\n                case 10:\n                    callback = this._escHandlers[collect + String.fromCharCode(code)];\n                    if (callback)\n                        callback(collect, code);\n                    else\n                        this._escHandlerFb(collect, code);\n                    break;\n                case 11:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 12:\n                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];\n                    if (!dcsHandler)\n                        dcsHandler = this._dcsHandlerFb;\n                    dcsHandler.hook(collect, params, code);\n                    break;\n                case 13:\n                    dcs = (~dcs) ? dcs : i;\n                    break;\n                case 14:\n                    if (dcsHandler) {\n                        if (~dcs)\n                            dcsHandler.put(data, dcs, i);\n                        dcsHandler.unhook();\n                        dcsHandler = null;\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 4:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    break;\n                case 5:\n                    for (var j_1 = i + 1;; j_1++) {\n                        if (j_1 >= length\n                            || (code = data[j_1]) < 0x20\n                            || (code > 0x7f && code <= 0x9f)) {\n                            osc += TextDecoder_1.utf32ToString(data, i, j_1);\n                            i = j_1 - 1;\n                            break;\n                        }\n                    }\n                    break;\n                case 6:\n                    if (osc && code !== 0x18 && code !== 0x1a) {\n                        var idx = osc.indexOf(';');\n                        if (idx === -1) {\n                            this._oscHandlerFb(-1, osc);\n                        }\n                        else {\n                            var identifier = parseInt(osc.substring(0, idx));\n                            var content = osc.substring(idx + 1);\n                            var handlers_1 = this._oscHandlers[identifier];\n                            var j_2 = handlers_1 ? handlers_1.length - 1 : -1;\n                            for (; j_2 >= 0; j_2--) {\n                                if (handlers_1[j_2](content) !== false) {\n                                    break;\n                                }\n                            }\n                            if (j_2 < 0) {\n                                this._oscHandlerFb(identifier, content);\n                            }\n                        }\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n            }\n            currentState = transition & 15;\n        }\n        if (currentState === 0 && ~print) {\n            this._printHandler(data, print, length);\n        }\n        else if (currentState === 13 && ~dcs && dcsHandler) {\n            dcsHandler.put(data, dcs, length);\n        }\n        this._osc = osc;\n        this._collect = collect;\n        this._params = params;\n        this._activeDcsHandler = dcsHandler;\n        this.currentState = currentState;\n    };\n    return EscapeSequenceParser;\n}(Lifecycle_1.Disposable));\nexports.EscapeSequenceParser = EscapeSequenceParser;\n//# sourceMappingURL=EscapeSequenceParser.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/EscapeSequenceParser.js\n// module id = 39\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar Charsets_1 = require(\"./core/data/Charsets\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EscapeSequenceParser_1 = require(\"./EscapeSequenceParser\");\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\nvar DECRQSS = (function () {\n    function DECRQSS(_terminal) {\n        this._terminal = _terminal;\n        this._data = new Uint32Array(0);\n    }\n    DECRQSS.prototype.hook = function (collect, params, flag) {\n        this._data = new Uint32Array(0);\n    };\n    DECRQSS.prototype.put = function (data, start, end) {\n        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));\n    };\n    DECRQSS.prototype.unhook = function () {\n        var data = TextDecoder_1.utf32ToString(this._data);\n        this._data = new Uint32Array(0);\n        switch (data) {\n            case '\"q':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0\\\"q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case '\"p':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r61\\\"p\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'r':\n                var pt = '' + (this._terminal.buffer.scrollTop + 1) +\n                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + pt + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'm':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0m\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case ' q':\n                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };\n                var style = STYLES[this._terminal.getOption('cursorStyle')];\n                style -= this._terminal.getOption('cursorBlink');\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + style + \" q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            default:\n                this._terminal.error('Unknown DCS $q %s', data);\n                this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0$r\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n        }\n    };\n    return DECRQSS;\n}());\nvar InputHandler = (function (_super) {\n    __extends(InputHandler, _super);\n    function InputHandler(_terminal, _parser) {\n        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._parser = _parser;\n        _this._parseBuffer = new Uint32Array(4096);\n        _this._stringDecoder = new TextDecoder_1.StringToUtf32();\n        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();\n        _this._workCell = new BufferLine_1.CellData();\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this.register(_this._parser);\n        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {\n            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setEscHandlerFallback(function (collect, flag) {\n            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setExecuteHandlerFallback(function (code) {\n            _this._terminal.error('Unknown EXECUTE code: ', { code: code });\n        });\n        _this._parser.setOscHandlerFallback(function (identifier, data) {\n            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });\n        });\n        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });\n        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });\n        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });\n        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });\n        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });\n        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });\n        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });\n        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });\n        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });\n        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });\n        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });\n        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });\n        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });\n        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });\n        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });\n        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });\n        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });\n        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });\n        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });\n        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });\n        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });\n        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });\n        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });\n        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });\n        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });\n        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });\n        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });\n        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });\n        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });\n        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });\n        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });\n        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });\n        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });\n        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });\n        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });\n        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });\n        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });\n        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });\n        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });\n        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });\n        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });\n        _this._parser.setEscHandler('D', function () { return _this.index(); });\n        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });\n        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });\n        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });\n        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });\n        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });\n        _this._parser.setEscHandler('c', function () { return _this.reset(); });\n        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });\n        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });\n        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });\n        var _loop_1 = function (flag) {\n            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });\n            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });\n            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });\n            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });\n            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });\n            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });\n            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });\n        };\n        var this_1 = this;\n        for (var flag in Charsets_1.CHARSETS) {\n            _loop_1(flag);\n        }\n        _this._parser.setErrorHandler(function (state) {\n            _this._terminal.error('Parsing error: ', state);\n            return state;\n        });\n        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));\n        return _this;\n    }\n    Object.defineProperty(InputHandler.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    InputHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal = null;\n    };\n    InputHandler.prototype.parse = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._onCursorMove.fire();\n        }\n    };\n    InputHandler.prototype.parseUtf8 = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._utf8Decoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._terminal.emit('cursormove');\n        }\n    };\n    InputHandler.prototype.print = function (data, start, end) {\n        var code;\n        var chWidth;\n        var buffer = this._terminal.buffer;\n        var charset = this._terminal.charset;\n        var screenReaderMode = this._terminal.options.screenReaderMode;\n        var cols = this._terminal.cols;\n        var wraparoundMode = this._terminal.wraparoundMode;\n        var insertMode = this._terminal.insertMode;\n        var curAttr = this._terminal.curAttrData;\n        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n        this._terminal.updateRange(buffer.y);\n        for (var pos = start; pos < end; ++pos) {\n            code = data[pos];\n            chWidth = CharWidth_1.wcwidth(code);\n            if (code < 127 && charset) {\n                var ch = charset[String.fromCharCode(code)];\n                if (ch) {\n                    code = ch.charCodeAt(0);\n                }\n            }\n            if (screenReaderMode) {\n                this._terminal.emit('a11y.char', TextDecoder_1.stringFromCodePoint(code));\n            }\n            if (!chWidth && buffer.x) {\n                if (!bufferRow.getWidth(buffer.x - 1)) {\n                    bufferRow.addCodepointToCell(buffer.x - 2, code);\n                }\n                else {\n                    bufferRow.addCodepointToCell(buffer.x - 1, code);\n                }\n                continue;\n            }\n            if (buffer.x + chWidth - 1 >= cols) {\n                if (wraparoundMode) {\n                    buffer.x = 0;\n                    buffer.y++;\n                    if (buffer.y > buffer.scrollBottom) {\n                        buffer.y--;\n                        this._terminal.scroll(true);\n                    }\n                    else {\n                        buffer.lines.get(buffer.y).isWrapped = true;\n                    }\n                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n                }\n                else {\n                    if (chWidth === 2) {\n                        continue;\n                    }\n                }\n            }\n            if (insertMode) {\n                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));\n                if (bufferRow.getWidth(cols - 1) === 2) {\n                    bufferRow.setCellFromCodePoint(cols - 1, BufferLine_1.NULL_CELL_CODE, BufferLine_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);\n                }\n            }\n            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);\n            if (chWidth > 0) {\n                while (--chWidth) {\n                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);\n                }\n            }\n        }\n        this._terminal.updateRange(buffer.y);\n    };\n    InputHandler.prototype.addCsiHandler = function (flag, callback) {\n        return this._parser.addCsiHandler(flag, callback);\n    };\n    InputHandler.prototype.addOscHandler = function (ident, callback) {\n        return this._parser.addOscHandler(ident, callback);\n    };\n    InputHandler.prototype.bell = function () {\n        this._terminal.bell();\n    };\n    InputHandler.prototype.lineFeed = function () {\n        var buffer = this._terminal.buffer;\n        if (this._terminal.options.convertEol) {\n            buffer.x = 0;\n        }\n        buffer.y++;\n        if (buffer.y > buffer.scrollBottom) {\n            buffer.y--;\n            this._terminal.scroll();\n        }\n        if (buffer.x >= this._terminal.cols) {\n            buffer.x--;\n        }\n        this._onLineFeed.fire();\n    };\n    InputHandler.prototype.carriageReturn = function () {\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.backspace = function () {\n        if (this._terminal.buffer.x > 0) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.tab = function () {\n        var originalX = this._terminal.buffer.x;\n        this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        if (this._terminal.options.screenReaderMode) {\n            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);\n        }\n    };\n    InputHandler.prototype.shiftOut = function () {\n        this._terminal.setgLevel(1);\n    };\n    InputHandler.prototype.shiftIn = function () {\n        this._terminal.setgLevel(0);\n    };\n    InputHandler.prototype.insertChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.cursorUp = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n    };\n    InputHandler.prototype.cursorDown = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.cursorForward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.cursorBackward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n        this._terminal.buffer.x -= param;\n        if (this._terminal.buffer.x < 0) {\n            this._terminal.buffer.x = 0;\n        }\n    };\n    InputHandler.prototype.cursorNextLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorPrecedingLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorCharAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n    };\n    InputHandler.prototype.cursorPosition = function (params) {\n        var col;\n        var row = params[0] - 1;\n        if (params.length >= 2) {\n            col = params[1] - 1;\n        }\n        else {\n            col = 0;\n        }\n        if (row < 0) {\n            row = 0;\n        }\n        else if (row >= this._terminal.rows) {\n            row = this._terminal.rows - 1;\n        }\n        if (col < 0) {\n            col = 0;\n        }\n        else if (col >= this._terminal.cols) {\n            col = this._terminal.cols - 1;\n        }\n        this._terminal.buffer.x = col;\n        this._terminal.buffer.y = row;\n    };\n    InputHandler.prototype.cursorForwardTab = function (params) {\n        var param = params[0] || 1;\n        while (param--) {\n            this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        }\n    };\n    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {\n        if (clearWrap === void 0) { clearWrap = false; }\n        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);\n        line.replaceCells(start, end, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        if (clearWrap) {\n            line.isWrapped = false;\n        }\n    };\n    InputHandler.prototype._resetBufferLine = function (y) {\n        this._eraseInBufferLine(y, 0, this._terminal.cols, true);\n    };\n    InputHandler.prototype.eraseInDisplay = function (params) {\n        var j;\n        switch (params[0]) {\n            case 0:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);\n                for (; j < this._terminal.rows; j++) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(j);\n                break;\n            case 1:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);\n                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {\n                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;\n                }\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 2:\n                j = this._terminal.rows;\n                this._terminal.updateRange(j - 1);\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 3:\n                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;\n                if (scrollBackSize > 0) {\n                    this._terminal.buffer.lines.trimStart(scrollBackSize);\n                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);\n                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);\n                    this._onScroll.fire(0);\n                }\n                break;\n        }\n    };\n    InputHandler.prototype.eraseInLine = function (params) {\n        switch (params[0]) {\n            case 0:\n                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);\n                break;\n            case 1:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);\n                break;\n            case 2:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);\n                break;\n        }\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.insertLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;\n        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n        while (param--) {\n            buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var j;\n        j = this._terminal.rows - 1 - buffer.scrollBottom;\n        j = this._terminal.rows - 1 + buffer.ybase - j;\n        while (param--) {\n            buffer.lines.splice(row, 1);\n            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.scrollUp = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this._terminal.updateRange(buffer.scrollTop);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.scrollDown = function (params, collect) {\n        if (params.length < 2 && !collect) {\n            var param = params[0] || 1;\n            var buffer = this._terminal.buffer;\n            while (param--) {\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n            }\n            this._terminal.updateRange(buffer.scrollTop);\n            this._terminal.updateRange(buffer.scrollBottom);\n        }\n    };\n    InputHandler.prototype.eraseChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n    };\n    InputHandler.prototype.cursorBackwardTab = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.x = buffer.prevStop();\n        }\n    };\n    InputHandler.prototype.charPosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.hPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.repeatPrecedingCharacter = function (params) {\n        var buffer = this._terminal.buffer;\n        var line = buffer.lines.get(buffer.ybase + buffer.y);\n        line.loadCell(buffer.x - 1, this._workCell);\n        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), (this._workCell.content !== undefined) ? this._workCell : buffer.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n    };\n    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {\n        if (params[0] > 0) {\n            return;\n        }\n        if (!collect) {\n            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');\n            }\n        }\n        else if (collect === '>') {\n            if (this._terminal.is('xterm')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');\n            }\n            else if (this._terminal.is('rxvt-unicode')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(params[0] + 'c');\n            }\n            else if (this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');\n            }\n        }\n    };\n    InputHandler.prototype.linePosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y = param - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n    };\n    InputHandler.prototype.vPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.hVPosition = function (params) {\n        if (params[0] < 1)\n            params[0] = 1;\n        if (params[1] < 1)\n            params[1] = 1;\n        this._terminal.buffer.y = params[0] - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = params[1] - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.tabClear = function (params) {\n        var param = params[0];\n        if (param <= 0) {\n            delete this._terminal.buffer.tabs[this._terminal.buffer.x];\n        }\n        else if (param === 3) {\n            this._terminal.buffer.tabs = {};\n        }\n    };\n    InputHandler.prototype.setMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.setMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = true;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = true;\n                    break;\n                case 2:\n                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);\n                    break;\n                case 3:\n                    this._terminal.savedCols = this._terminal.cols;\n                    this._terminal.resize(132, this._terminal.rows);\n                    break;\n                case 6:\n                    this._terminal.originMode = true;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = true;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Serial port requested application keypad.');\n                    this._terminal.applicationKeypad = true;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = params[0] === 9;\n                    this._terminal.vt200Mouse = params[0] === 1000;\n                    this._terminal.normalMouse = params[0] > 1000;\n                    this._terminal.mouseEvents = true;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.add('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.disable();\n                    }\n                    this._terminal.log('Binding to mouse events.');\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = true;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = true;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = true;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = true;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = false;\n                    break;\n                case 1048:\n                    this.saveCursor(params);\n                    break;\n                case 1049:\n                    this.saveCursor(params);\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = true;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.resetMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.resetMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = false;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = false;\n                    break;\n                case 3:\n                    if (this._terminal.cols === 132 && this._terminal.savedCols) {\n                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);\n                    }\n                    delete this._terminal.savedCols;\n                    break;\n                case 6:\n                    this._terminal.originMode = false;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = false;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Switching back to normal keypad.');\n                    this._terminal.applicationKeypad = false;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = false;\n                    this._terminal.vt200Mouse = false;\n                    this._terminal.normalMouse = false;\n                    this._terminal.mouseEvents = false;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.remove('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.enable();\n                    }\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = false;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = false;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = false;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = false;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = true;\n                    break;\n                case 1048:\n                    this.restoreCursor(params);\n                    break;\n                case 1049:\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateNormalBuffer();\n                    if (params[0] === 1049) {\n                        this.restoreCursor(params);\n                    }\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = false;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.charAttributes = function (params) {\n        if (params.length === 1 && params[0] === 0) {\n            this._terminal.curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n            this._terminal.curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            return;\n        }\n        var l = params.length;\n        var p;\n        var attr = this._terminal.curAttrData;\n        for (var i = 0; i < l; i++) {\n            p = params[i];\n            if (p >= 30 && p <= 37) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 30);\n            }\n            else if (p >= 40 && p <= 47) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 40);\n            }\n            else if (p >= 90 && p <= 97) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 90) | 8;\n            }\n            else if (p >= 100 && p <= 107) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 100) | 8;\n            }\n            else if (p === 0) {\n                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            }\n            else if (p === 1) {\n                attr.fg |= 134217728;\n            }\n            else if (p === 3) {\n                attr.bg |= 67108864;\n            }\n            else if (p === 4) {\n                attr.fg |= 268435456;\n            }\n            else if (p === 5) {\n                attr.fg |= 536870912;\n            }\n            else if (p === 7) {\n                attr.fg |= 67108864;\n            }\n            else if (p === 8) {\n                attr.fg |= 1073741824;\n            }\n            else if (p === 2) {\n                attr.bg |= 134217728;\n            }\n            else if (p === 22) {\n                attr.fg &= ~134217728;\n                attr.bg &= ~134217728;\n            }\n            else if (p === 23) {\n                attr.bg &= ~67108864;\n            }\n            else if (p === 24) {\n                attr.fg &= ~268435456;\n            }\n            else if (p === 25) {\n                attr.fg &= ~536870912;\n            }\n            else if (p === 27) {\n                attr.fg &= ~67108864;\n            }\n            else if (p === 28) {\n                attr.fg &= ~1073741824;\n            }\n            else if (p === 39) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n            }\n            else if (p === 49) {\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else if (p === 38) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.fg |= 50331648;\n                    attr.fg &= ~16777215;\n                    attr.fg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.fg &= ~(50331648 | 255);\n                    attr.fg |= 33554432 | p;\n                }\n            }\n            else if (p === 48) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.bg |= 50331648;\n                    attr.bg &= ~16777215;\n                    attr.bg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.bg &= ~(50331648 | 255);\n                    attr.bg |= 33554432 | p;\n                }\n            }\n            else if (p === 100) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else {\n                this._terminal.error('Unknown SGR attribute: %d.', p);\n            }\n        }\n    };\n    InputHandler.prototype.deviceStatus = function (params, collect) {\n        if (!collect) {\n            switch (params[0]) {\n                case 5:\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[0n\");\n                    break;\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[\" + y + \";\" + x + \"R\");\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[?\" + y + \";\" + x + \"R\");\n                    break;\n                case 15:\n                    break;\n                case 25:\n                    break;\n                case 26:\n                    break;\n                case 53:\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.softReset = function (params, collect) {\n        if (collect === '!') {\n            this._terminal.cursorHidden = false;\n            this._terminal.insertMode = false;\n            this._terminal.originMode = false;\n            this._terminal.wraparoundMode = true;\n            this._terminal.applicationKeypad = false;\n            if (this._terminal.viewport) {\n                this._terminal.viewport.syncScrollArea();\n            }\n            this._terminal.applicationCursor = false;\n            this._terminal.buffer.scrollTop = 0;\n            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;\n            this._terminal.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n            this._terminal.buffer.x = this._terminal.buffer.y = 0;\n            this._terminal.charset = null;\n            this._terminal.glevel = 0;\n            this._terminal.charsets = [null];\n        }\n    };\n    InputHandler.prototype.setCursorStyle = function (params, collect) {\n        if (collect === ' ') {\n            var param = params[0] < 1 ? 1 : params[0];\n            switch (param) {\n                case 1:\n                case 2:\n                    this._terminal.setOption('cursorStyle', 'block');\n                    break;\n                case 3:\n                case 4:\n                    this._terminal.setOption('cursorStyle', 'underline');\n                    break;\n                case 5:\n                case 6:\n                    this._terminal.setOption('cursorStyle', 'bar');\n                    break;\n            }\n            var isBlinking = param % 2 === 1;\n            this._terminal.setOption('cursorBlink', isBlinking);\n        }\n    };\n    InputHandler.prototype.setScrollRegion = function (params, collect) {\n        if (collect) {\n            return;\n        }\n        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;\n        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;\n        this._terminal.buffer.x = 0;\n        this._terminal.buffer.y = 0;\n    };\n    InputHandler.prototype.saveCursor = function (params) {\n        this._terminal.buffer.savedX = this._terminal.buffer.x;\n        this._terminal.buffer.savedY = this._terminal.buffer.y;\n        this._terminal.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;\n        this._terminal.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;\n    };\n    InputHandler.prototype.restoreCursor = function (params) {\n        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;\n        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;\n        this._terminal.curAttrData.fg = this._terminal.buffer.savedCurAttrData.fg;\n        this._terminal.curAttrData.bg = this._terminal.buffer.savedCurAttrData.bg;\n    };\n    InputHandler.prototype.setTitle = function (data) {\n        this._terminal.handleTitle(data);\n    };\n    InputHandler.prototype.nextLine = function () {\n        this._terminal.buffer.x = 0;\n        this.index();\n    };\n    InputHandler.prototype.keypadApplicationMode = function () {\n        this._terminal.log('Serial port requested application keypad.');\n        this._terminal.applicationKeypad = true;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.keypadNumericMode = function () {\n        this._terminal.log('Switching back to normal keypad.');\n        this._terminal.applicationKeypad = false;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.selectDefaultCharset = function () {\n        this._terminal.setgLevel(0);\n        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.selectCharset = function (collectAndFlag) {\n        if (collectAndFlag.length !== 2) {\n            this.selectDefaultCharset();\n            return;\n        }\n        if (collectAndFlag[0] === '/') {\n            return;\n        }\n        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);\n        return;\n    };\n    InputHandler.prototype.index = function () {\n        this._terminal.index();\n    };\n    InputHandler.prototype.tabSet = function () {\n        this._terminal.tabSet();\n    };\n    InputHandler.prototype.reverseIndex = function () {\n        this._terminal.reverseIndex();\n    };\n    InputHandler.prototype.reset = function () {\n        this._parser.reset();\n        this._terminal.reset();\n    };\n    InputHandler.prototype.setgLevel = function (level) {\n        this._terminal.setgLevel(level);\n    };\n    return InputHandler;\n}(Lifecycle_1.Disposable));\nexports.InputHandler = InputHandler;\n//# sourceMappingURL=InputHandler.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/InputHandler.js\n// module id = 40\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar Linkifier = (function () {\n    function Linkifier(_terminal) {\n        this._terminal = _terminal;\n        this._linkMatchers = [];\n        this._nextLinkMatcherId = 0;\n        this._onLinkHover = new EventEmitter2_1.EventEmitter2();\n        this._onLinkLeave = new EventEmitter2_1.EventEmitter2();\n        this._onLinkTooltip = new EventEmitter2_1.EventEmitter2();\n        this._rowsToLinkify = {\n            start: null,\n            end: null\n        };\n    }\n    Object.defineProperty(Linkifier.prototype, \"onLinkHover\", {\n        get: function () { return this._onLinkHover.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkLeave\", {\n        get: function () { return this._onLinkLeave.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkTooltip\", {\n        get: function () { return this._onLinkTooltip.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Linkifier.prototype.attachToDom = function (mouseZoneManager) {\n        this._mouseZoneManager = mouseZoneManager;\n    };\n    Linkifier.prototype.linkifyRows = function (start, end) {\n        var _this = this;\n        if (!this._mouseZoneManager) {\n            return;\n        }\n        if (this._rowsToLinkify.start === null) {\n            this._rowsToLinkify.start = start;\n            this._rowsToLinkify.end = end;\n        }\n        else {\n            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n        }\n        this._mouseZoneManager.clearAll(start, end);\n        if (this._rowsTimeoutId) {\n            clearTimeout(this._rowsTimeoutId);\n        }\n        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);\n    };\n    Linkifier.prototype._linkifyRows = function () {\n        this._rowsTimeoutId = null;\n        var buffer = this._terminal.buffer;\n        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n        if (absoluteRowIndexStart >= buffer.lines.length) {\n            return;\n        }\n        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;\n        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);\n        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n        while (iterator.hasNext()) {\n            var lineData = iterator.next();\n            for (var i = 0; i < this._linkMatchers.length; i++) {\n                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n            }\n        }\n        this._rowsToLinkify.start = null;\n        this._rowsToLinkify.end = null;\n    };\n    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {\n        if (options === void 0) { options = {}; }\n        if (!handler) {\n            throw new Error('handler must be defined');\n        }\n        var matcher = {\n            id: this._nextLinkMatcherId++,\n            regex: regex,\n            handler: handler,\n            matchIndex: options.matchIndex,\n            validationCallback: options.validationCallback,\n            hoverTooltipCallback: options.tooltipCallback,\n            hoverLeaveCallback: options.leaveCallback,\n            willLinkActivate: options.willLinkActivate,\n            priority: options.priority || 0\n        };\n        this._addLinkMatcherToList(matcher);\n        return matcher.id;\n    };\n    Linkifier.prototype._addLinkMatcherToList = function (matcher) {\n        if (this._linkMatchers.length === 0) {\n            this._linkMatchers.push(matcher);\n            return;\n        }\n        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {\n            if (matcher.priority <= this._linkMatchers[i].priority) {\n                this._linkMatchers.splice(i + 1, 0, matcher);\n                return;\n            }\n        }\n        this._linkMatchers.splice(0, 0, matcher);\n    };\n    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {\n        for (var i = 0; i < this._linkMatchers.length; i++) {\n            if (this._linkMatchers[i].id === matcherId) {\n                this._linkMatchers.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {\n        var _this = this;\n        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');\n        var match;\n        var stringIndex = -1;\n        var _loop_1 = function () {\n            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n            if (!uri) {\n                if (this_1._terminal.debug) {\n                    console.log({ match: match, matcher: matcher });\n                    throw new Error('match found without corresponding matchIndex');\n                }\n                return \"break\";\n            }\n            stringIndex = text.indexOf(uri, stringIndex + 1);\n            rex.lastIndex = stringIndex + uri.length;\n            if (stringIndex < 0) {\n                return \"break\";\n            }\n            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n            if (bufferIndex[0] < 0) {\n                return \"break\";\n            }\n            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);\n            var attr = line.getFg(bufferIndex[1]);\n            var fg;\n            if (attr) {\n                fg = (attr >> 9) & 0x1ff;\n            }\n            if (matcher.validationCallback) {\n                matcher.validationCallback(uri, function (isValid) {\n                    if (_this._rowsTimeoutId) {\n                        return;\n                    }\n                    if (isValid) {\n                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);\n                    }\n                });\n            }\n            else {\n                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);\n            }\n        };\n        var this_1 = this;\n        while ((match = rex.exec(text)) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {\n        var _this = this;\n        var width = CharWidth_1.getStringCellWidth(uri);\n        var x1 = x % this._terminal.cols;\n        var y1 = y + Math.floor(x / this._terminal.cols);\n        var x2 = (x1 + width) % this._terminal.cols;\n        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);\n        if (x2 === 0) {\n            x2 = this._terminal.cols;\n            y2--;\n        }\n        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {\n            if (matcher.handler) {\n                return matcher.handler(e, uri);\n            }\n            window.open(uri, '_blank');\n        }, function () {\n            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.add('xterm-cursor-pointer');\n        }, function (e) {\n            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            if (matcher.hoverTooltipCallback) {\n                matcher.hoverTooltipCallback(e, uri);\n            }\n        }, function () {\n            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.remove('xterm-cursor-pointer');\n            if (matcher.hoverLeaveCallback) {\n                matcher.hoverLeaveCallback();\n            }\n        }, function (e) {\n            if (matcher.willLinkActivate) {\n                return matcher.willLinkActivate(e, uri);\n            }\n            return true;\n        }));\n    };\n    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {\n        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };\n    };\n    Linkifier.TIME_BEFORE_LINKIFY = 200;\n    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;\n    return Linkifier;\n}());\nexports.Linkifier = Linkifier;\n//# sourceMappingURL=Linkifier.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/Linkifier.js\n// module id = 41\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar Browser = require(\"./common/Platform\");\nvar SelectionModel_1 = require(\"./SelectionModel\");\nvar AltClickHandler_1 = require(\"./handlers/AltClickHandler\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar DRAG_SCROLL_MAX_THRESHOLD = 50;\nvar DRAG_SCROLL_MAX_SPEED = 15;\nvar DRAG_SCROLL_INTERVAL = 50;\nvar ALT_CLICK_MOVE_CURSOR_TIME = 500;\nvar WORD_SEPARATORS = ' ()[]{}\\'\"';\nvar NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nvar ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\nvar SelectionManager = (function () {\n    function SelectionManager(_terminal, _charMeasure) {\n        this._terminal = _terminal;\n        this._charMeasure = _charMeasure;\n        this._enabled = true;\n        this._workCell = new BufferLine_1.CellData();\n        this._onLinuxMouseSelection = new EventEmitter2_1.EventEmitter2();\n        this._onRedrawRequest = new EventEmitter2_1.EventEmitter2();\n        this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        this._initListeners();\n        this.enable();\n        this._model = new SelectionModel_1.SelectionModel(_terminal);\n        this._activeSelectionMode = 0;\n    }\n    Object.defineProperty(SelectionManager.prototype, \"onLinuxMouseSelection\", {\n        get: function () { return this._onLinuxMouseSelection.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onRedrawRequest\", {\n        get: function () { return this._onRedrawRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.dispose = function () {\n        this._removeMouseDownListeners();\n    };\n    Object.defineProperty(SelectionManager.prototype, \"_buffer\", {\n        get: function () {\n            return this._terminal.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype._initListeners = function () {\n        var _this = this;\n        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };\n        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };\n        this.initBuffersListeners();\n    };\n    SelectionManager.prototype.initBuffersListeners = function () {\n        var _this = this;\n        this._trimListener = this._terminal.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n        this._terminal.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });\n    };\n    SelectionManager.prototype.disable = function () {\n        this.clearSelection();\n        this._enabled = false;\n    };\n    SelectionManager.prototype.enable = function () {\n        this._enabled = true;\n    };\n    Object.defineProperty(SelectionManager.prototype, \"selectionStart\", {\n        get: function () { return this._model.finalSelectionStart; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionEnd\", {\n        get: function () { return this._model.finalSelectionEnd; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"hasSelection\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return false;\n            }\n            return start[0] !== end[0] || start[1] !== end[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionText\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return '';\n            }\n            var result = [];\n            if (this._activeSelectionMode === 3) {\n                if (start[0] === end[0]) {\n                    return '';\n                }\n                for (var i = start[1]; i <= end[1]; i++) {\n                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);\n                    result.push(lineText);\n                }\n            }\n            else {\n                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n                for (var i = start[1] + 1; i <= end[1] - 1; i++) {\n                    var bufferLine = this._buffer.lines.get(i);\n                    var lineText = this._buffer.translateBufferLineToString(i, true);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n                if (start[1] !== end[1]) {\n                    var bufferLine = this._buffer.lines.get(end[1]);\n                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n            }\n            var formattedResult = result.map(function (line) {\n                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n            }).join(Browser.isMSWindows ? '\\r\\n' : '\\n');\n            return formattedResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.clearSelection = function () {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.refresh = function (isLinuxMouseSelection) {\n        var _this = this;\n        if (!this._refreshAnimationFrame) {\n            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });\n        }\n        if (Browser.isLinux && isLinuxMouseSelection) {\n            var selectionText = this.selectionText;\n            if (selectionText.length) {\n                this._onLinuxMouseSelection.fire(this.selectionText);\n            }\n        }\n    };\n    SelectionManager.prototype._refresh = function () {\n        this._refreshAnimationFrame = null;\n        this._onRedrawRequest.fire({\n            start: this._model.finalSelectionStart,\n            end: this._model.finalSelectionEnd,\n            columnSelectMode: this._activeSelectionMode === 3\n        });\n    };\n    SelectionManager.prototype.isClickInSelection = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        var start = this._model.finalSelectionStart;\n        var end = this._model.finalSelectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return this._areCoordsInSelection(coords, start, end);\n    };\n    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {\n        return (coords[1] > start[1] && coords[1] < end[1]) ||\n            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n    };\n    SelectionManager.prototype.selectWordAtCursor = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._selectWordAt(coords, false);\n            this._model.selectionEnd = null;\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype.selectAll = function () {\n        this._model.isSelectAllActive = true;\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.selectLines = function (start, end) {\n        this._model.clearSelection();\n        start = Math.max(start, 0);\n        end = Math.min(end, this._terminal.buffer.lines.length - 1);\n        this._model.selectionStart = [0, start];\n        this._model.selectionEnd = [this._terminal.cols, end];\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype._onTrim = function (amount) {\n        var needsRefresh = this._model.onTrim(amount);\n        if (needsRefresh) {\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._getMouseBufferCoords = function (event) {\n        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);\n        if (!coords) {\n            return null;\n        }\n        coords[0]--;\n        coords[1]--;\n        coords[1] += this._terminal.buffer.ydisp;\n        return coords;\n    };\n    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {\n        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];\n        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);\n        if (offset >= 0 && offset <= terminalHeight) {\n            return 0;\n        }\n        if (offset > terminalHeight) {\n            offset -= terminalHeight;\n        }\n        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n        offset /= DRAG_SCROLL_MAX_THRESHOLD;\n        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n    };\n    SelectionManager.prototype.shouldForceSelection = function (event) {\n        if (Browser.isMac) {\n            return event.altKey && this._terminal.options.macOptionClickForcesSelection;\n        }\n        return event.shiftKey;\n    };\n    SelectionManager.prototype.onMouseDown = function (event) {\n        this._mouseDownTimeStamp = event.timeStamp;\n        if (event.button === 2 && this.hasSelection) {\n            return;\n        }\n        if (event.button !== 0) {\n            return;\n        }\n        if (!this._enabled) {\n            if (!this.shouldForceSelection(event)) {\n                return;\n            }\n            event.stopPropagation();\n        }\n        event.preventDefault();\n        this._dragScrollAmount = 0;\n        if (this._enabled && event.shiftKey) {\n            this._onIncrementalClick(event);\n        }\n        else {\n            if (event.detail === 1) {\n                this._onSingleClick(event);\n            }\n            else if (event.detail === 2) {\n                this._onDoubleClick(event);\n            }\n            else if (event.detail === 3) {\n                this._onTripleClick(event);\n            }\n        }\n        this._addMouseDownListeners();\n        this.refresh(true);\n    };\n    SelectionManager.prototype._addMouseDownListeners = function () {\n        var _this = this;\n        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);\n    };\n    SelectionManager.prototype._removeMouseDownListeners = function () {\n        if (this._terminal.element.ownerDocument) {\n            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n        }\n        clearInterval(this._dragScrollIntervalTimer);\n        this._dragScrollIntervalTimer = null;\n    };\n    SelectionManager.prototype._onIncrementalClick = function (event) {\n        if (this._model.selectionStart) {\n            this._model.selectionEnd = this._getMouseBufferCoords(event);\n        }\n    };\n    SelectionManager.prototype._onSingleClick = function (event) {\n        this._model.selectionStartLength = 0;\n        this._model.isSelectAllActive = false;\n        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;\n        this._model.selectionStart = this._getMouseBufferCoords(event);\n        if (!this._model.selectionStart) {\n            return;\n        }\n        this._model.selectionEnd = null;\n        var line = this._buffer.lines.get(this._model.selectionStart[1]);\n        if (!line) {\n            return;\n        }\n        if (line.length >= this._model.selectionStart[0]) {\n            return;\n        }\n        if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n            this._model.selectionStart[0]++;\n        }\n    };\n    SelectionManager.prototype._onDoubleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 1;\n            this._selectWordAt(coords, true);\n        }\n    };\n    SelectionManager.prototype._onTripleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 2;\n            this._selectLineAt(coords[1]);\n        }\n    };\n    SelectionManager.prototype.shouldColumnSelect = function (event) {\n        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);\n    };\n    SelectionManager.prototype._onMouseMove = function (event) {\n        event.stopImmediatePropagation();\n        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n        this._model.selectionEnd = this._getMouseBufferCoords(event);\n        if (!this._model.selectionEnd) {\n            this.refresh(true);\n            return;\n        }\n        if (this._activeSelectionMode === 2) {\n            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n                this._model.selectionEnd[0] = 0;\n            }\n            else {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n        }\n        else if (this._activeSelectionMode === 1) {\n            this._selectToWordAt(this._model.selectionEnd);\n        }\n        this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n        if (this._activeSelectionMode !== 3) {\n            if (this._dragScrollAmount > 0) {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n            else if (this._dragScrollAmount < 0) {\n                this._model.selectionEnd[0] = 0;\n            }\n        }\n        if (this._model.selectionEnd[1] < this._buffer.lines.length) {\n            if (this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0]) === 0) {\n                this._model.selectionEnd[0]++;\n            }\n        }\n        if (!previousSelectionEnd ||\n            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype._dragScroll = function () {\n        if (this._dragScrollAmount) {\n            this._terminal.scrollLines(this._dragScrollAmount, false);\n            if (this._dragScrollAmount > 0) {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = this._terminal.cols;\n                }\n                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);\n            }\n            else {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = 0;\n                }\n                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;\n            }\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._onMouseUp = function (event) {\n        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n        this._removeMouseDownListeners();\n        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {\n            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();\n        }\n        else if (this.hasSelection) {\n            this._onSelectionChange.fire();\n        }\n    };\n    SelectionManager.prototype._onBufferActivate = function (e) {\n        var _this = this;\n        this.clearSelection();\n        if (this._trimListener) {\n            this._trimListener.dispose();\n        }\n        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n    };\n    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {\n        var charIndex = coords[0];\n        for (var i = 0; coords[0] >= i; i++) {\n            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;\n            if (this._workCell.getWidth() === 0) {\n                charIndex--;\n            }\n            else if (length_1 > 1 && coords[0] !== i) {\n                charIndex += length_1 - 1;\n            }\n        }\n        return charIndex;\n    };\n    SelectionManager.prototype.setSelection = function (col, row, length) {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this._model.selectionStart = [col, row];\n        this._model.selectionStartLength = length;\n        this.refresh();\n    };\n    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {\n        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }\n        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }\n        if (coords[0] >= this._terminal.cols) {\n            return null;\n        }\n        var bufferLine = this._buffer.lines.get(coords[1]);\n        if (!bufferLine) {\n            return null;\n        }\n        var line = this._buffer.translateBufferLineToString(coords[1], false);\n        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n        var endIndex = startIndex;\n        var charOffset = coords[0] - startIndex;\n        var leftWideCharCount = 0;\n        var rightWideCharCount = 0;\n        var leftLongCharOffset = 0;\n        var rightLongCharOffset = 0;\n        if (line.charAt(startIndex) === ' ') {\n            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n                startIndex--;\n            }\n            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n                endIndex++;\n            }\n        }\n        else {\n            var startCol = coords[0];\n            var endCol = coords[0];\n            if (bufferLine.getWidth(startCol) === 0) {\n                leftWideCharCount++;\n                startCol--;\n            }\n            if (bufferLine.getWidth(endCol) === 2) {\n                rightWideCharCount++;\n                endCol++;\n            }\n            var length_2 = bufferLine.getString(endCol).length;\n            if (length_2 > 1) {\n                rightLongCharOffset += length_2 - 1;\n                endIndex += length_2 - 1;\n            }\n            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n                bufferLine.loadCell(startCol - 1, this._workCell);\n                var length_3 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 0) {\n                    leftWideCharCount++;\n                    startCol--;\n                }\n                else if (length_3 > 1) {\n                    leftLongCharOffset += length_3 - 1;\n                    startIndex -= length_3 - 1;\n                }\n                startIndex--;\n                startCol--;\n            }\n            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n                bufferLine.loadCell(endCol + 1, this._workCell);\n                var length_4 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 2) {\n                    rightWideCharCount++;\n                    endCol++;\n                }\n                else if (length_4 > 1) {\n                    rightLongCharOffset += length_4 - 1;\n                    endIndex += length_4 - 1;\n                }\n                endIndex++;\n                endCol++;\n            }\n        }\n        endIndex++;\n        var start = startIndex\n            + charOffset\n            - leftWideCharCount\n            + leftLongCharOffset;\n        var length = Math.min(this._terminal.cols, endIndex\n            - startIndex\n            + leftWideCharCount\n            + rightWideCharCount\n            - leftLongCharOffset\n            - rightLongCharOffset);\n        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n            return null;\n        }\n        if (followWrappedLinesAbove) {\n            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {\n                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);\n                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);\n                    if (previousLineWordPosition) {\n                        var offset = this._terminal.cols - previousLineWordPosition.start;\n                        start -= offset;\n                        length += offset;\n                    }\n                }\n            }\n        }\n        if (followWrappedLinesBelow) {\n            if (start + length === this._terminal.cols && bufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);\n                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {\n                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n                    if (nextLineWordPosition) {\n                        length += nextLineWordPosition.length;\n                    }\n                }\n            }\n        }\n        return { start: start, length: length };\n    };\n    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {\n        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n        if (wordPosition) {\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                coords[1]--;\n            }\n            this._model.selectionStart = [wordPosition.start, coords[1]];\n            this._model.selectionStartLength = wordPosition.length;\n        }\n    };\n    SelectionManager.prototype._selectToWordAt = function (coords) {\n        var wordPosition = this._getWordAt(coords, true);\n        if (wordPosition) {\n            var endRow = coords[1];\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                endRow--;\n            }\n            if (!this._model.areSelectionValuesReversed()) {\n                while (wordPosition.start + wordPosition.length > this._terminal.cols) {\n                    wordPosition.length -= this._terminal.cols;\n                    endRow++;\n                }\n            }\n            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n        }\n    };\n    SelectionManager.prototype._isCharWordSeparator = function (cell) {\n        if (cell.getWidth() === 0) {\n            return false;\n        }\n        return WORD_SEPARATORS.indexOf(cell.getChars()) >= 0;\n    };\n    SelectionManager.prototype._selectLineAt = function (line) {\n        var wrappedRange = this._buffer.getWrappedRangeForLine(line);\n        this._model.selectionStart = [0, wrappedRange.first];\n        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];\n        this._model.selectionStartLength = 0;\n    };\n    return SelectionManager;\n}());\nexports.SelectionManager = SelectionManager;\n//# sourceMappingURL=SelectionManager.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/SelectionManager.js\n// module id = 42\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectionModel = (function () {\n    function SelectionModel(_terminal) {\n        this._terminal = _terminal;\n        this.clearSelection();\n    }\n    SelectionModel.prototype.clearSelection = function () {\n        this.selectionStart = null;\n        this.selectionEnd = null;\n        this.isSelectAllActive = false;\n        this.selectionStartLength = 0;\n    };\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionStart\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [0, 0];\n            }\n            if (!this.selectionEnd || !this.selectionStart) {\n                return this.selectionStart;\n            }\n            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionEnd\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];\n            }\n            if (!this.selectionStart) {\n                return null;\n            }\n            if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n                if (startPlusLength > this._terminal.cols) {\n                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];\n                }\n                return [startPlusLength, this.selectionStart[1]];\n            }\n            if (this.selectionStartLength) {\n                if (this.selectionEnd[1] === this.selectionStart[1]) {\n                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n                }\n            }\n            return this.selectionEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionModel.prototype.areSelectionValuesReversed = function () {\n        var start = this.selectionStart;\n        var end = this.selectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n    };\n    SelectionModel.prototype.onTrim = function (amount) {\n        if (this.selectionStart) {\n            this.selectionStart[1] -= amount;\n        }\n        if (this.selectionEnd) {\n            this.selectionEnd[1] -= amount;\n        }\n        if (this.selectionEnd && this.selectionEnd[1] < 0) {\n            this.clearSelection();\n            return true;\n        }\n        if (this.selectionStart && this.selectionStart[1] < 0) {\n            this.selectionStart[1] = 0;\n        }\n        return false;\n    };\n    return SelectionModel;\n}());\nexports.SelectionModel = SelectionModel;\n//# sourceMappingURL=SelectionModel.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/SelectionModel.js\n// module id = 43\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';\nvar SoundManager = (function () {\n    function SoundManager(_terminal) {\n        this._terminal = _terminal;\n    }\n    Object.defineProperty(SoundManager, \"audioContext\", {\n        get: function () {\n            if (!SoundManager._audioContext) {\n                var audioContextCtor = window.AudioContext || window.webkitAudioContext;\n                if (!audioContextCtor) {\n                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n                    return null;\n                }\n                SoundManager._audioContext = new audioContextCtor();\n            }\n            return SoundManager._audioContext;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SoundManager.prototype.playBellSound = function () {\n        var ctx = SoundManager.audioContext;\n        if (!ctx) {\n            return;\n        }\n        var bellAudioSource = ctx.createBufferSource();\n        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {\n            bellAudioSource.buffer = buffer;\n            bellAudioSource.connect(ctx.destination);\n            bellAudioSource.start(0);\n        });\n    };\n    SoundManager.prototype._base64ToArrayBuffer = function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    };\n    SoundManager.prototype._removeMimeType = function (dataURI) {\n        var splitUri = dataURI.split(',');\n        return splitUri[1];\n    };\n    return SoundManager;\n}());\nexports.SoundManager = SoundManager;\n//# sourceMappingURL=SoundManager.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/SoundManager.js\n// module id = 44\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferSet_1 = require(\"./BufferSet\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CompositionHelper_1 = require(\"./CompositionHelper\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar Viewport_1 = require(\"./Viewport\");\nvar Clipboard_1 = require(\"./Clipboard\");\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar InputHandler_1 = require(\"./InputHandler\");\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar Linkifier_1 = require(\"./Linkifier\");\nvar SelectionManager_1 = require(\"./SelectionManager\");\nvar CharMeasure_1 = require(\"./CharMeasure\");\nvar Browser = require(\"./common/Platform\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Strings = require(\"./Strings\");\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar SoundManager_1 = require(\"./SoundManager\");\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar AccessibilityManager_1 = require(\"./AccessibilityManager\");\nvar CharAtlasCache_1 = require(\"./renderer/atlas/CharAtlasCache\");\nvar DomRenderer_1 = require(\"./renderer/dom/DomRenderer\");\nvar Keyboard_1 = require(\"./core/input/Keyboard\");\nvar Clone_1 = require(\"./common/Clone\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar WindowsMode_1 = require(\"./WindowsMode\");\nvar ColorManager_1 = require(\"./ui/ColorManager\");\nvar RenderCoordinator_1 = require(\"./renderer/RenderCoordinator\");\nvar document = (typeof window !== 'undefined') ? window.document : null;\nvar WRITE_BUFFER_PAUSE_THRESHOLD = 5;\nvar WRITE_TIMEOUT_MS = 12;\nvar WRITE_BUFFER_LENGTH_THRESHOLD = 50;\nvar MINIMUM_COLS = 2;\nvar MINIMUM_ROWS = 1;\nvar CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\nvar DEFAULT_OPTIONS = {\n    cols: 80,\n    rows: 24,\n    convertEol: false,\n    termName: 'xterm',\n    cursorBlink: false,\n    cursorStyle: 'block',\n    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,\n    bellStyle: 'none',\n    drawBoldTextInBrightColors: true,\n    enableBold: true,\n    experimentalCharAtlas: 'static',\n    fontFamily: 'courier-new, courier, monospace',\n    fontSize: 15,\n    fontWeight: 'normal',\n    fontWeightBold: 'bold',\n    lineHeight: 1.0,\n    letterSpacing: 0,\n    scrollback: 1000,\n    screenKeys: false,\n    screenReaderMode: false,\n    debug: false,\n    macOptionIsMeta: false,\n    macOptionClickForcesSelection: false,\n    cancelEvents: false,\n    disableStdin: false,\n    useFlowControl: false,\n    allowTransparency: false,\n    tabStopWidth: 8,\n    theme: undefined,\n    rightClickSelectsWord: Browser.isMac,\n    rendererType: 'canvas',\n    windowsMode: false\n};\nvar Terminal = (function (_super) {\n    __extends(Terminal, _super);\n    function Terminal(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.browser = Browser;\n        _this._blankLine = null;\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onKey = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onResize = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        _this._onTitleChange = new EventEmitter2_1.EventEmitter2();\n        _this.options = Clone_1.clone(options);\n        _this._setup();\n        _this.onCursorMove(function () { return _this.emit('cursormove'); });\n        _this.onData(function (e) { return _this.emit('data', e); });\n        _this.onKey(function (e) { return _this.emit('key', e.key, e.domEvent); });\n        _this.onLineFeed(function () { return _this.emit('linefeed'); });\n        _this.onRender(function (e) { return _this.emit('refresh', e); });\n        _this.onResize(function (e) { return _this.emit('resize', e); });\n        _this.onSelectionChange(function () { return _this.emit('selection'); });\n        _this.onScroll(function (e) { return _this.emit('scroll', e); });\n        _this.onTitleChange(function (e) { return _this.emit('title', e); });\n        return _this;\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._onKey.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._onResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._onTitleChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this._windowsMode) {\n            this._windowsMode.dispose();\n            this._windowsMode = undefined;\n        }\n        this._customKeyEventHandler = null;\n        CharAtlasCache_1.removeTerminalFromCache(this);\n        this.handler = function () { };\n        this.write = function () { };\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n    Terminal.prototype.destroy = function () {\n        this.dispose();\n    };\n    Terminal.prototype._setup = function () {\n        var _this = this;\n        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {\n            if (_this.options[key] === null || _this.options[key] === undefined) {\n                _this.options[key] = DEFAULT_OPTIONS[key];\n            }\n        });\n        this._parent = document ? document.body : null;\n        this.cols = Math.max(this.options.cols, MINIMUM_COLS);\n        this.rows = Math.max(this.options.rows, MINIMUM_ROWS);\n        if (this.options.handler) {\n            this.onData(this.options.handler);\n        }\n        this.cursorState = 0;\n        this.cursorHidden = false;\n        this._customKeyEventHandler = null;\n        this.applicationKeypad = false;\n        this.applicationCursor = false;\n        this.originMode = false;\n        this.insertMode = false;\n        this.wraparoundMode = true;\n        this.bracketedPasteMode = false;\n        this.charset = null;\n        this.gcharset = null;\n        this.glevel = 0;\n        this.charsets = [null];\n        this.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this._eraseAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.params = [];\n        this.currentParam = 0;\n        this.writeBuffer = [];\n        this.writeBufferUtf8 = [];\n        this._writeInProgress = false;\n        this._xoffSentToCatchUp = false;\n        this._userScrolling = false;\n        this._inputHandler = new InputHandler_1.InputHandler(this);\n        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });\n        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });\n        this._inputHandler.onData(function (e) { return _this._onData.fire(e); });\n        this.register(this._inputHandler);\n        this.selectionManager = this.selectionManager || null;\n        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);\n        this._mouseZoneManager = this._mouseZoneManager || null;\n        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);\n        this.buffers = new BufferSet_1.BufferSet(this);\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n            this.selectionManager.initBuffersListeners();\n        }\n        if (this.options.windowsMode) {\n            this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () {\n            return this.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.eraseAttrData = function () {\n        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);\n        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;\n        return this._eraseAttrData;\n    };\n    Terminal.prototype.focus = function () {\n        if (this.textarea) {\n            this.textarea.focus({ preventScroll: true });\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"isFocused\", {\n        get: function () {\n            return document.activeElement === this.textarea && document.hasFocus();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.getOption = function (key) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        return this.options[key];\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {\n            console.error(\"Option \\\"\" + key + \"\\\" can only be set in the constructor\");\n        }\n        if (this.options[key] === value) {\n            return;\n        }\n        switch (key) {\n            case 'bellStyle':\n                if (!value) {\n                    value = 'none';\n                }\n                break;\n            case 'cursorStyle':\n                if (!value) {\n                    value = 'block';\n                }\n                break;\n            case 'fontWeight':\n                if (!value) {\n                    value = 'normal';\n                }\n                break;\n            case 'fontWeightBold':\n                if (!value) {\n                    value = 'bold';\n                }\n                break;\n            case 'lineHeight':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n            case 'rendererType':\n                if (!value) {\n                    value = 'canvas';\n                }\n                break;\n            case 'tabStopWidth':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n                break;\n            case 'theme':\n                this._setTheme(value);\n                break;\n            case 'scrollback':\n                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);\n                if (value < 0) {\n                    console.warn(key + \" cannot be less than 0, value: \" + value);\n                    return;\n                }\n                if (this.options[key] !== value) {\n                    var newBufferLength = this.rows + value;\n                    if (this.buffer.lines.length > newBufferLength) {\n                        var amountToTrim = this.buffer.lines.length - newBufferLength;\n                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);\n                        this.buffer.lines.trimStart(amountToTrim);\n                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);\n                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);\n                        if (needsRefresh) {\n                            this.refresh(0, this.rows - 1);\n                        }\n                    }\n                }\n                break;\n        }\n        this.options[key] = value;\n        switch (key) {\n            case 'fontFamily':\n            case 'fontSize':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this.charMeasure.measure(this.options);\n                }\n                break;\n            case 'drawBoldTextInBrightColors':\n            case 'experimentalCharAtlas':\n            case 'enableBold':\n            case 'letterSpacing':\n            case 'lineHeight':\n            case 'fontWeight':\n            case 'fontWeightBold':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this._renderCoordinator.onResize(this.cols, this.rows);\n                    this.refresh(0, this.rows - 1);\n                }\n                break;\n            case 'rendererType':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.setRenderer(this._createRenderer());\n                }\n                break;\n            case 'scrollback':\n                this.buffers.resize(this.cols, this.rows);\n                if (this.viewport) {\n                    this.viewport.syncScrollArea();\n                }\n                break;\n            case 'screenReaderMode':\n                if (value) {\n                    if (!this._accessibilityManager && this._renderCoordinator) {\n                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n                    }\n                }\n                else {\n                    if (this._accessibilityManager) {\n                        this._accessibilityManager.dispose();\n                        this._accessibilityManager = null;\n                    }\n                }\n                break;\n            case 'tabStopWidth':\n                this.buffers.setupTabStops();\n                break;\n            case 'windowsMode':\n                if (value) {\n                    if (!this._windowsMode) {\n                        this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n                    }\n                }\n                else {\n                    if (this._windowsMode) {\n                        this._windowsMode.dispose();\n                        this._windowsMode = undefined;\n                    }\n                }\n                break;\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.onOptionsChanged();\n        }\n    };\n    Terminal.prototype._onTextAreaFocus = function (ev) {\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[I');\n        }\n        this.updateCursorStyle(ev);\n        this.element.classList.add('focus');\n        this.showCursor();\n        this.emit('focus');\n    };\n    Terminal.prototype.blur = function () {\n        return this.textarea.blur();\n    };\n    Terminal.prototype._onTextAreaBlur = function () {\n        this.textarea.value = '';\n        this.refresh(this.buffer.y, this.buffer.y);\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[O');\n        }\n        this.element.classList.remove('focus');\n        this.emit('blur');\n    };\n    Terminal.prototype._initGlobal = function () {\n        var _this = this;\n        this._bindKeys();\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {\n            if (!_this.hasSelection()) {\n                return;\n            }\n            Clipboard_1.copyHandler(event, _this, _this.selectionManager);\n        }));\n        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));\n        if (Browser.isFirefox) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {\n                if (event.button === 2) {\n                    Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n                }\n            }));\n        }\n        else {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {\n                Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n            }));\n        }\n        if (Browser.isLinux) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {\n                if (event.button === 1) {\n                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this);\n                }\n            }));\n        }\n    };\n    Terminal.prototype._bindKeys = function () {\n        var _this = this;\n        var self = this;\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyDown(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyPress(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {\n            if (!wasModifierKeyOnlyEvent(ev)) {\n                _this.focus();\n            }\n            self._keyUp(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));\n        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));\n        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));\n    };\n    Terminal.prototype.open = function (parent) {\n        var _this = this;\n        this._parent = parent || this._parent;\n        if (!this._parent) {\n            throw new Error('Terminal requires a parent element.');\n        }\n        this._context = this._parent.ownerDocument.defaultView;\n        this._document = this._parent.ownerDocument;\n        this.element = this._document.createElement('div');\n        this.element.dir = 'ltr';\n        this.element.classList.add('terminal');\n        this.element.classList.add('xterm');\n        this.element.setAttribute('tabindex', '0');\n        this._parent.appendChild(this.element);\n        var fragment = document.createDocumentFragment();\n        this._viewportElement = document.createElement('div');\n        this._viewportElement.classList.add('xterm-viewport');\n        fragment.appendChild(this._viewportElement);\n        this._viewportScrollArea = document.createElement('div');\n        this._viewportScrollArea.classList.add('xterm-scroll-area');\n        this._viewportElement.appendChild(this._viewportScrollArea);\n        this.screenElement = document.createElement('div');\n        this.screenElement.classList.add('xterm-screen');\n        this._helperContainer = document.createElement('div');\n        this._helperContainer.classList.add('xterm-helpers');\n        this.screenElement.appendChild(this._helperContainer);\n        fragment.appendChild(this.screenElement);\n        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);\n        this.register(this._mouseZoneManager);\n        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));\n        this.linkifier.attachToDom(this._mouseZoneManager);\n        this.textarea = document.createElement('textarea');\n        this.textarea.classList.add('xterm-helper-textarea');\n        this.textarea.setAttribute('aria-label', Strings.promptLabel);\n        this.textarea.setAttribute('aria-multiline', 'false');\n        this.textarea.setAttribute('autocorrect', 'off');\n        this.textarea.setAttribute('autocapitalize', 'off');\n        this.textarea.setAttribute('spellcheck', 'false');\n        this.textarea.tabIndex = 0;\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));\n        this._helperContainer.appendChild(this.textarea);\n        this._compositionView = document.createElement('div');\n        this._compositionView.classList.add('composition-view');\n        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);\n        this._helperContainer.appendChild(this._compositionView);\n        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);\n        this.element.appendChild(fragment);\n        this._theme = this.options.theme;\n        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);\n        this._colorManager.setTheme(this._theme);\n        var renderer = this._createRenderer();\n        this._renderCoordinator = new RenderCoordinator_1.RenderCoordinator(renderer, this.rows, this.screenElement);\n        this._renderCoordinator.onRender(function (e) { return _this._onRender.fire(e); });\n        this.onResize(function (e) { return _this._renderCoordinator.resize(e.cols, e.rows); });\n        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure, this._renderCoordinator.dimensions);\n        this.viewport.onThemeChange(this._colorManager.colors);\n        this.register(this.viewport);\n        this.register(this.onCursorMove(function () { return _this._renderCoordinator.onCursorMove(); }));\n        this.register(this.onResize(function () { return _this._renderCoordinator.onResize(_this.cols, _this.rows); }));\n        this.register(this.addDisposableListener('blur', function () { return _this._renderCoordinator.onBlur(); }));\n        this.register(this.addDisposableListener('focus', function () { return _this._renderCoordinator.onFocus(); }));\n        this.register(this.charMeasure.onCharSizeChanged(function () { return _this._renderCoordinator.onCharSizeChanged(); }));\n        this.register(this._renderCoordinator.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));\n        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);\n        this.register(this.selectionManager.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));\n        this.register(this.selectionManager.onRedrawRequest(function (e) { return _this._renderCoordinator.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));\n        this.register(this.selectionManager.onLinuxMouseSelection(function (text) {\n            _this.textarea.value = text;\n            _this.textarea.focus();\n            _this.textarea.select();\n        }));\n        this.register(this.onScroll(function () {\n            _this.viewport.syncScrollArea();\n            _this.selectionManager.refresh();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));\n        this.mouseHelper = new MouseHelper_1.MouseHelper(this._renderCoordinator);\n        this.element.classList.toggle('enable-mouse-events', this.mouseEvents);\n        if (this.mouseEvents) {\n            this.selectionManager.disable();\n        }\n        else {\n            this.selectionManager.enable();\n        }\n        if (this.options.screenReaderMode) {\n            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n            this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function (e) { return _this._accessibilityManager.setDimensions(e); }));\n        }\n        this.charMeasure.measure(this.options);\n        this.refresh(0, this.rows - 1);\n        this._initGlobal();\n        this.bindMouse();\n    };\n    Terminal.prototype._createRenderer = function () {\n        switch (this.options.rendererType) {\n            case 'canvas':\n                return new Renderer_1.Renderer(this, this._colorManager.colors);\n                break;\n            case 'dom':\n                return new DomRenderer_1.DomRenderer(this, this._colorManager.colors);\n                break;\n            default: throw new Error(\"Unrecognized rendererType \\\"\" + this.options.rendererType + \"\\\"\");\n        }\n    };\n    Terminal.prototype._setTheme = function (theme) {\n        this._theme = theme;\n        if (this._colorManager) {\n            this._colorManager.setTheme(theme);\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.setColors(this._colorManager.colors);\n        }\n        if (this.viewport) {\n            this.viewport.onThemeChange(this._colorManager.colors);\n        }\n    };\n    Terminal.prototype.bindMouse = function () {\n        var _this = this;\n        var el = this.element;\n        var self = this;\n        var pressed = 32;\n        function sendButton(ev) {\n            var button;\n            var pos;\n            button = getButton(ev);\n            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            sendEvent(button, pos);\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    pressed = button;\n                    break;\n                case 'mouseup':\n                    pressed = 32;\n                    break;\n                case 'wheel':\n                    break;\n            }\n        }\n        function sendMove(ev) {\n            var button = pressed;\n            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            button += 32;\n            sendEvent(button, pos);\n        }\n        function encode(data, ch) {\n            if (!self.utfMouse) {\n                if (ch === 255) {\n                    data.push(0);\n                    return;\n                }\n                if (ch > 127)\n                    ch = 127;\n                data.push(ch);\n            }\n            else {\n                if (ch > 2047) {\n                    data.push(2047);\n                    return;\n                }\n                data.push(ch);\n            }\n        }\n        function sendEvent(button, pos) {\n            if (self._vt300Mouse) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                var data_1 = EscapeSequences_1.C0.ESC + '[24';\n                if (button === 0)\n                    data_1 += '1';\n                else if (button === 1)\n                    data_1 += '3';\n                else if (button === 2)\n                    data_1 += '5';\n                else if (button === 3)\n                    return;\n                else\n                    data_1 += '0';\n                data_1 += '~[' + pos.x + ',' + pos.y + ']\\r';\n                self.handler(data_1);\n                return;\n            }\n            if (self._decLocator) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                if (button === 0)\n                    button = 2;\n                else if (button === 1)\n                    button = 4;\n                else if (button === 2)\n                    button = 6;\n                else if (button === 3)\n                    button = 3;\n                self.handler(EscapeSequences_1.C0.ESC + '['\n                    + button\n                    + ';'\n                    + (button === 3 ? 4 : 0)\n                    + ';'\n                    + pos.y\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.page || 0\n                    + '&w');\n                return;\n            }\n            if (self.urxvtMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                pos.x++;\n                pos.y++;\n                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');\n                return;\n            }\n            if (self.sgrMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                self.handler(EscapeSequences_1.C0.ESC + '[<'\n                    + (((button & 3) === 3 ? button & ~3 : button) - 32)\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.y\n                    + ((button & 3) === 3 ? 'm' : 'M'));\n                return;\n            }\n            var data = [];\n            encode(data, button);\n            encode(data, pos.x);\n            encode(data, pos.y);\n            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));\n        }\n        function getButton(ev) {\n            var button;\n            var shift;\n            var meta;\n            var ctrl;\n            var mod;\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    button = ev.button !== null && ev.button !== undefined\n                        ? +ev.button\n                        : ev.which !== null && ev.which !== undefined\n                            ? ev.which - 1\n                            : null;\n                    if (Browser.isMSIE) {\n                        button = button === 1 ? 0 : button === 4 ? 1 : button;\n                    }\n                    break;\n                case 'mouseup':\n                    button = 3;\n                    break;\n                case 'DOMMouseScroll':\n                    button = ev.detail < 0\n                        ? 64\n                        : 65;\n                    break;\n                case 'wheel':\n                    button = ev.deltaY < 0\n                        ? 64\n                        : 65;\n                    break;\n            }\n            shift = ev.shiftKey ? 4 : 0;\n            meta = ev.metaKey ? 8 : 0;\n            ctrl = ev.ctrlKey ? 16 : 0;\n            mod = shift | meta | ctrl;\n            if (self.vt200Mouse) {\n                mod &= ctrl;\n            }\n            else if (!self.normalMouse) {\n                mod = 0;\n            }\n            button = (32 + (mod << 2)) + button;\n            return button;\n        }\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {\n            ev.preventDefault();\n            _this.focus();\n            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {\n                return;\n            }\n            sendButton(ev);\n            if (_this.vt200Mouse) {\n                ev.overrideType = 'mouseup';\n                sendButton(ev);\n                return _this.cancel(ev);\n            }\n            var moveHandler;\n            if (_this.normalMouse) {\n                moveHandler = function (event) {\n                    if (!_this.normalMouse) {\n                        return;\n                    }\n                    sendMove(event);\n                };\n                _this._document.addEventListener('mousemove', moveHandler);\n            }\n            var handler = function (ev) {\n                if (_this.normalMouse && !_this.x10Mouse) {\n                    sendButton(ev);\n                }\n                if (moveHandler) {\n                    _this._document.removeEventListener('mousemove', moveHandler);\n                    moveHandler = null;\n                }\n                _this._document.removeEventListener('mouseup', handler);\n                return _this.cancel(ev);\n            };\n            _this._document.addEventListener('mouseup', handler);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (!_this.mouseEvents) {\n                if (!_this.buffer.hasScrollback) {\n                    var amount = _this.viewport.getLinesScrolled(ev);\n                    if (amount === 0) {\n                        return;\n                    }\n                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n                    var data = '';\n                    for (var i = 0; i < Math.abs(amount); i++) {\n                        data += sequence;\n                    }\n                    _this.handler(data);\n                }\n                return;\n            }\n            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)\n                return;\n            sendButton(ev);\n            ev.preventDefault();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onWheel(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchStart(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchMove(ev);\n            return _this.cancel(ev);\n        }));\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        if (this._renderCoordinator) {\n            this._renderCoordinator.refreshRows(start, end);\n        }\n    };\n    Terminal.prototype._queueLinkification = function (start, end) {\n        if (this.linkifier) {\n            this.linkifier.linkifyRows(start, end);\n        }\n    };\n    Terminal.prototype.updateCursorStyle = function (ev) {\n        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {\n            this.element.classList.add('column-select');\n        }\n        else {\n            this.element.classList.remove('column-select');\n        }\n    };\n    Terminal.prototype.showCursor = function () {\n        if (!this.cursorState) {\n            this.cursorState = 1;\n            this.refresh(this.buffer.y, this.buffer.y);\n        }\n    };\n    Terminal.prototype.scroll = function (isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        var newLine;\n        newLine = this._blankLine;\n        var eraseAttr = this.eraseAttrData();\n        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);\n            this._blankLine = newLine;\n        }\n        newLine.isWrapped = isWrapped;\n        var topRow = this.buffer.ybase + this.buffer.scrollTop;\n        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;\n        if (this.buffer.scrollTop === 0) {\n            var willBufferBeTrimmed = this.buffer.lines.isFull;\n            if (bottomRow === this.buffer.lines.length - 1) {\n                if (willBufferBeTrimmed) {\n                    this.buffer.lines.recycle().copyFrom(newLine);\n                }\n                else {\n                    this.buffer.lines.push(newLine.clone());\n                }\n            }\n            else {\n                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n            }\n            if (!willBufferBeTrimmed) {\n                this.buffer.ybase++;\n                if (!this._userScrolling) {\n                    this.buffer.ydisp++;\n                }\n            }\n            else {\n                if (this._userScrolling) {\n                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);\n                }\n            }\n        }\n        else {\n            var scrollRegionHeight = bottomRow - topRow + 1;\n            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n            this.buffer.lines.set(bottomRow, newLine.clone());\n        }\n        if (!this._userScrolling) {\n            this.buffer.ydisp = this.buffer.ybase;\n        }\n        this.updateRange(this.buffer.scrollTop);\n        this.updateRange(this.buffer.scrollBottom);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {\n        if (disp < 0) {\n            if (this.buffer.ydisp === 0) {\n                return;\n            }\n            this._userScrolling = true;\n        }\n        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {\n            this._userScrolling = false;\n        }\n        var oldYdisp = this.buffer.ydisp;\n        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);\n        if (oldYdisp === this.buffer.ydisp) {\n            return;\n        }\n        if (!suppressScrollEvent) {\n            this._onScroll.fire(this.buffer.ydisp);\n        }\n        this.refresh(0, this.rows - 1);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this.scrollLines(pageCount * (this.rows - 1));\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this.scrollLines(-this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        var scrollAmount = line - this.buffer.ydisp;\n        if (scrollAmount !== 0) {\n            this.scrollLines(scrollAmount);\n        }\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBufferUtf8.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBufferUtf8.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBufferUtf8.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWriteUtf8();\n            });\n        }\n    };\n    Terminal.prototype._innerWriteUtf8 = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBufferUtf8 = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBufferUtf8.length > bufferOffset) {\n            var data = this.writeBufferUtf8[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBufferUtf8.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parseUtf8(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBufferUtf8.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBufferUtf8 = this.writeBufferUtf8.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWriteUtf8(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBufferUtf8 = [];\n        }\n    };\n    Terminal.prototype.write = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBuffer.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBuffer.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWrite();\n            });\n        }\n    };\n    Terminal.prototype._innerWrite = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBuffer = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBuffer.length > bufferOffset) {\n            var data = this.writeBuffer[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parse(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBuffer.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBuffer = this.writeBuffer.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBuffer = [];\n        }\n    };\n    Terminal.prototype.writeln = function (data) {\n        this.write(data + '\\r\\n');\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._customKeyEventHandler = customKeyEventHandler;\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._inputHandler.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._inputHandler.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n        this.refresh(0, this.rows - 1);\n        return matcherId;\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        var joinerId = this._renderCoordinator.registerCharacterJoiner(handler);\n        this.refresh(0, this.rows - 1);\n        return joinerId;\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        if (this._renderCoordinator.deregisterCharacterJoiner(joinerId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () {\n            return this.buffer.markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        if (this.buffer !== this.buffers.normal) {\n            return;\n        }\n        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this.selectionManager ? this.selectionManager.hasSelection : false;\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this.selectionManager.setSelection(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this.selectionManager ? this.selectionManager.selectionText : '';\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        if (!this.selectionManager.hasSelection) {\n            return undefined;\n        }\n        return {\n            startColumn: this.selectionManager.selectionStart[0],\n            startRow: this.selectionManager.selectionStart[1],\n            endColumn: this.selectionManager.selectionEnd[0],\n            endRow: this.selectionManager.selectionEnd[1]\n        };\n    };\n    Terminal.prototype.clearSelection = function () {\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n        }\n    };\n    Terminal.prototype.selectAll = function () {\n        if (this.selectionManager) {\n            this.selectionManager.selectAll();\n        }\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        if (this.selectionManager) {\n            this.selectionManager.selectLines(start, end);\n        }\n    };\n    Terminal.prototype._keyDown = function (event) {\n        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n            return false;\n        }\n        if (!this._compositionHelper.keydown(event)) {\n            if (this.buffer.ybase !== this.buffer.ydisp) {\n                this.scrollToBottom();\n            }\n            return false;\n        }\n        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);\n        this.updateCursorStyle(event);\n        if (result.type === 3 || result.type === 2) {\n            var scrollCount = this.rows - 1;\n            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);\n            return this.cancel(event, true);\n        }\n        if (result.type === 1) {\n            this.selectAll();\n        }\n        if (this._isThirdLevelShift(this.browser, event)) {\n            return true;\n        }\n        if (result.cancel) {\n            this.cancel(event, true);\n        }\n        if (!result.key) {\n            return true;\n        }\n        this.emit('keydown', event);\n        this._onKey.fire({ key: result.key, domEvent: event });\n        this.showCursor();\n        this.handler(result.key);\n        return this.cancel(event, true);\n    };\n    Terminal.prototype._isThirdLevelShift = function (browser, ev) {\n        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n        if (ev.type === 'keypress') {\n            return thirdLevelKey;\n        }\n        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n    };\n    Terminal.prototype.setgLevel = function (g) {\n        this.glevel = g;\n        this.charset = this.charsets[g];\n    };\n    Terminal.prototype.setgCharset = function (g, charset) {\n        this.charsets[g] = charset;\n        if (this.glevel === g) {\n            this.charset = charset;\n        }\n    };\n    Terminal.prototype._keyUp = function (ev) {\n        this.updateCursorStyle(ev);\n    };\n    Terminal.prototype._keyPress = function (ev) {\n        var key;\n        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n            return false;\n        }\n        this.cancel(ev);\n        if (ev.charCode) {\n            key = ev.charCode;\n        }\n        else if (ev.which === null || ev.which === undefined) {\n            key = ev.keyCode;\n        }\n        else if (ev.which !== 0 && ev.charCode !== 0) {\n            key = ev.which;\n        }\n        else {\n            return false;\n        }\n        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {\n            return false;\n        }\n        key = String.fromCharCode(key);\n        this.emit('keypress', key, ev);\n        this._onKey.fire({ key: key, domEvent: ev });\n        this.showCursor();\n        this.handler(key);\n        return true;\n    };\n    Terminal.prototype.bell = function () {\n        var _this = this;\n        this.emit('bell');\n        if (this._soundBell()) {\n            this.soundManager.playBellSound();\n        }\n        if (this._visualBell()) {\n            this.element.classList.add('visual-bell-active');\n            clearTimeout(this._visualBellTimer);\n            this._visualBellTimer = window.setTimeout(function () {\n                _this.element.classList.remove('visual-bell-active');\n            }, 200);\n        }\n    };\n    Terminal.prototype.log = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.log)\n            return;\n        this._context.console.log(text, data);\n    };\n    Terminal.prototype.error = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.error)\n            return;\n        this._context.console.error(text, data);\n    };\n    Terminal.prototype.resize = function (x, y) {\n        if (isNaN(x) || isNaN(y)) {\n            return;\n        }\n        if (x === this.cols && y === this.rows) {\n            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {\n                this.charMeasure.measure(this.options);\n            }\n            return;\n        }\n        if (x < MINIMUM_COLS)\n            x = MINIMUM_COLS;\n        if (y < MINIMUM_ROWS)\n            y = MINIMUM_ROWS;\n        this.buffers.resize(x, y);\n        this.cols = x;\n        this.rows = y;\n        this.buffers.setupTabStops(this.cols);\n        if (this.charMeasure) {\n            this.charMeasure.measure(this.options);\n        }\n        this.refresh(0, this.rows - 1);\n        this._onResize.fire({ cols: x, rows: y });\n    };\n    Terminal.prototype.updateRange = function (y) {\n        if (y < this._refreshStart)\n            this._refreshStart = y;\n        if (y > this._refreshEnd)\n            this._refreshEnd = y;\n    };\n    Terminal.prototype.maxRange = function () {\n        this._refreshStart = 0;\n        this._refreshEnd = this.rows - 1;\n    };\n    Terminal.prototype.clear = function () {\n        if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n            return;\n        }\n        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));\n        this.buffer.lines.length = 1;\n        this.buffer.ydisp = 0;\n        this.buffer.ybase = 0;\n        this.buffer.y = 0;\n        for (var i = 1; i < this.rows; i++) {\n            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this.refresh(0, this.rows - 1);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.is = function (term) {\n        return (this.options.termName + '').indexOf(term) === 0;\n    };\n    Terminal.prototype.handler = function (data) {\n        if (this.options.disableStdin) {\n            return;\n        }\n        if (this.selectionManager && this.selectionManager.hasSelection) {\n            this.selectionManager.clearSelection();\n        }\n        if (this.buffer.ybase !== this.buffer.ydisp) {\n            this.scrollToBottom();\n        }\n        this._onData.fire(data);\n    };\n    Terminal.prototype.handleTitle = function (title) {\n        this._onTitleChange.fire(title);\n    };\n    Terminal.prototype.index = function () {\n        this.buffer.y++;\n        if (this.buffer.y > this.buffer.scrollBottom) {\n            this.buffer.y--;\n            this.scroll();\n        }\n        if (this.buffer.x >= this.cols) {\n            this.buffer.x--;\n        }\n    };\n    Terminal.prototype.reverseIndex = function () {\n        if (this.buffer.y === this.buffer.scrollTop) {\n            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;\n            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);\n            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttrData()));\n            this.updateRange(this.buffer.scrollTop);\n            this.updateRange(this.buffer.scrollBottom);\n        }\n        else {\n            this.buffer.y--;\n        }\n    };\n    Terminal.prototype.reset = function () {\n        this.options.rows = this.rows;\n        this.options.cols = this.cols;\n        var customKeyEventHandler = this._customKeyEventHandler;\n        var inputHandler = this._inputHandler;\n        var cursorState = this.cursorState;\n        var writeBuffer = this.writeBuffer;\n        var writeBufferUtf8 = this.writeBufferUtf8;\n        var writeInProgress = this._writeInProgress;\n        var xoffSentToCatchUp = this._xoffSentToCatchUp;\n        var userScrolling = this._userScrolling;\n        this._setup();\n        this._customKeyEventHandler = customKeyEventHandler;\n        this._inputHandler = inputHandler;\n        this.cursorState = cursorState;\n        this.writeBuffer = writeBuffer;\n        this.writeBufferUtf8 = writeBufferUtf8;\n        this._writeInProgress = writeInProgress;\n        this._xoffSentToCatchUp = xoffSentToCatchUp;\n        this._userScrolling = userScrolling;\n        this.refresh(0, this.rows - 1);\n        if (this.viewport) {\n            this.viewport.syncScrollArea();\n        }\n    };\n    Terminal.prototype.tabSet = function () {\n        this.buffer.tabs[this.buffer.x] = true;\n    };\n    Terminal.prototype.cancel = function (ev, force) {\n        if (!this.options.cancelEvents && !force) {\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    };\n    Terminal.prototype._visualBell = function () {\n        return false;\n    };\n    Terminal.prototype._soundBell = function () {\n        return this.options.bellStyle === 'sound';\n    };\n    return Terminal;\n}(EventEmitter_1.EventEmitter));\nexports.Terminal = Terminal;\nfunction wasModifierKeyOnlyEvent(ev) {\n    return ev.keyCode === 16 ||\n        ev.keyCode === 17 ||\n        ev.keyCode === 18;\n}\n//# sourceMappingURL=Terminal.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/Terminal.js\n// module id = 45\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar FALLBACK_SCROLL_BAR_WIDTH = 15;\nvar Viewport = (function (_super) {\n    __extends(Viewport, _super);\n    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._viewportElement = _viewportElement;\n        _this._scrollArea = _scrollArea;\n        _this._charMeasure = _charMeasure;\n        _this._dimensions = _dimensions;\n        _this.scrollBarWidth = 0;\n        _this._currentRowHeight = 0;\n        _this._lastRecordedBufferLength = 0;\n        _this._lastRecordedViewportHeight = 0;\n        _this._lastRecordedBufferHeight = 0;\n        _this._lastScrollTop = 0;\n        _this._wheelPartialScroll = 0;\n        _this._refreshAnimationFrame = null;\n        _this._ignoreNextScrollEvent = false;\n        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));\n        setTimeout(function () { return _this.syncScrollArea(); }, 0);\n        return _this;\n    }\n    Viewport.prototype.onDimensionsChance = function (dimensions) {\n        this._dimensions = dimensions;\n    };\n    Viewport.prototype.onThemeChange = function (colors) {\n        this._viewportElement.style.backgroundColor = colors.background.css;\n    };\n    Viewport.prototype._refresh = function () {\n        var _this = this;\n        if (this._refreshAnimationFrame === null) {\n            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });\n        }\n    };\n    Viewport.prototype._innerRefresh = function () {\n        if (this._charMeasure.height > 0) {\n            this._currentRowHeight = this._dimensions.scaledCellHeight / window.devicePixelRatio;\n            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._dimensions.canvasHeight);\n            if (this._lastRecordedBufferHeight !== newBufferHeight) {\n                this._lastRecordedBufferHeight = newBufferHeight;\n                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n            }\n        }\n        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._viewportElement.scrollTop !== scrollTop) {\n            this._ignoreNextScrollEvent = true;\n            this._viewportElement.scrollTop = scrollTop;\n        }\n        this._refreshAnimationFrame = null;\n    };\n    Viewport.prototype.syncScrollArea = function () {\n        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {\n            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;\n            this._refresh();\n            return;\n        }\n        if (this._lastRecordedViewportHeight !== this._dimensions.canvasHeight) {\n            this._refresh();\n            return;\n        }\n        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._lastScrollTop !== newScrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n            this._refresh();\n            return;\n        }\n    };\n    Viewport.prototype._onScroll = function (ev) {\n        this._lastScrollTop = this._viewportElement.scrollTop;\n        if (!this._viewportElement.offsetParent) {\n            return;\n        }\n        if (this._ignoreNextScrollEvent) {\n            this._ignoreNextScrollEvent = false;\n            return;\n        }\n        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n        var diff = newRow - this._terminal.buffer.ydisp;\n        this._terminal.scrollLines(diff, true);\n    };\n    Viewport.prototype.onWheel = function (ev) {\n        var amount = this._getPixelsScrolled(ev);\n        if (amount === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += amount;\n        ev.preventDefault();\n    };\n    Viewport.prototype._getPixelsScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n            amount *= this._currentRowHeight;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._currentRowHeight * this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.getLinesScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n            amount /= this._currentRowHeight + 0.0;\n            this._wheelPartialScroll += amount;\n            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n            this._wheelPartialScroll %= 1;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.onTouchStart = function (ev) {\n        this._lastTouchY = ev.touches[0].pageY;\n    };\n    Viewport.prototype.onTouchMove = function (ev) {\n        var deltaY = this._lastTouchY - ev.touches[0].pageY;\n        this._lastTouchY = ev.touches[0].pageY;\n        if (deltaY === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += deltaY;\n        ev.preventDefault();\n    };\n    return Viewport;\n}(Lifecycle_1.Disposable));\nexports.Viewport = Viewport;\n//# sourceMappingURL=Viewport.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/Viewport.js\n// module id = 46\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nfunction applyWindowsMode(terminal) {\n    return terminal.onLineFeed(function () {\n        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);\n        var lastChar = line.get(terminal.cols - 1);\n        var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);\n        nextLine.isWrapped = (lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.NULL_CELL_CODE && lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.WHITESPACE_CELL_CODE);\n    });\n}\nexports.applyWindowsMode = applyWindowsMode;\n//# sourceMappingURL=WindowsMode.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/WindowsMode.js\n// module id = 47\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./EventEmitter2\");\nvar CircularList = (function () {\n    function CircularList(_maxLength) {\n        this._maxLength = _maxLength;\n        this.onDeleteEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onInsertEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onTrimEmitter = new EventEmitter2_1.EventEmitter2();\n        this._array = new Array(this._maxLength);\n        this._startIndex = 0;\n        this._length = 0;\n    }\n    Object.defineProperty(CircularList.prototype, \"onDelete\", {\n        get: function () { return this.onDeleteEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onInsert\", {\n        get: function () { return this.onInsertEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onTrim\", {\n        get: function () { return this.onTrimEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (newMaxLength) {\n            if (this._maxLength === newMaxLength) {\n                return;\n            }\n            var newArray = new Array(newMaxLength);\n            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {\n                newArray[i] = this._array[this._getCyclicIndex(i)];\n            }\n            this._array = newArray;\n            this._maxLength = newMaxLength;\n            this._startIndex = 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"length\", {\n        get: function () {\n            return this._length;\n        },\n        set: function (newLength) {\n            if (newLength > this._length) {\n                for (var i = this._length; i < newLength; i++) {\n                    this._array[i] = undefined;\n                }\n            }\n            this._length = newLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.get = function (index) {\n        return this._array[this._getCyclicIndex(index)];\n    };\n    CircularList.prototype.set = function (index, value) {\n        this._array[this._getCyclicIndex(index)] = value;\n    };\n    CircularList.prototype.push = function (value) {\n        this._array[this._getCyclicIndex(this._length)] = value;\n        if (this._length === this._maxLength) {\n            this._startIndex = ++this._startIndex % this._maxLength;\n            this.onTrimEmitter.fire(1);\n        }\n        else {\n            this._length++;\n        }\n    };\n    CircularList.prototype.recycle = function () {\n        if (this._length !== this._maxLength) {\n            throw new Error('Can only recycle when the buffer is full');\n        }\n        this._startIndex = ++this._startIndex % this._maxLength;\n        this.onTrimEmitter.fire(1);\n        return this._array[this._getCyclicIndex(this._length - 1)];\n    };\n    Object.defineProperty(CircularList.prototype, \"isFull\", {\n        get: function () {\n            return this._length === this._maxLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.pop = function () {\n        return this._array[this._getCyclicIndex(this._length-- - 1)];\n    };\n    CircularList.prototype.splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        if (deleteCount) {\n            for (var i = start; i < this._length - deleteCount; i++) {\n                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n            }\n            this._length -= deleteCount;\n        }\n        for (var i = this._length - 1; i >= start; i--) {\n            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n        }\n        for (var i = 0; i < items.length; i++) {\n            this._array[this._getCyclicIndex(start + i)] = items[i];\n        }\n        if (this._length + items.length > this._maxLength) {\n            var countToTrim = (this._length + items.length) - this._maxLength;\n            this._startIndex += countToTrim;\n            this._length = this._maxLength;\n            this.onTrimEmitter.fire(countToTrim);\n        }\n        else {\n            this._length += items.length;\n        }\n    };\n    CircularList.prototype.trimStart = function (count) {\n        if (count > this._length) {\n            count = this._length;\n        }\n        this._startIndex += count;\n        this._length -= count;\n        this.onTrimEmitter.fire(count);\n    };\n    CircularList.prototype.shiftElements = function (start, count, offset) {\n        if (count <= 0) {\n            return;\n        }\n        if (start < 0 || start >= this._length) {\n            throw new Error('start argument out of range');\n        }\n        if (start + offset < 0) {\n            throw new Error('Cannot shift elements in list beyond index 0');\n        }\n        if (offset > 0) {\n            for (var i = count - 1; i >= 0; i--) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n            var expandListBy = (start + count + offset) - this._length;\n            if (expandListBy > 0) {\n                this._length += expandListBy;\n                while (this._length > this._maxLength) {\n                    this._length--;\n                    this._startIndex++;\n                    this.onTrimEmitter.fire(1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < count; i++) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n        }\n    };\n    CircularList.prototype._getCyclicIndex = function (index) {\n        return (this._startIndex + index) % this._maxLength;\n    };\n    return CircularList;\n}());\nexports.CircularList = CircularList;\n//# sourceMappingURL=CircularList.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/CircularList.js\n// module id = 48\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction clone(val, depth) {\n    if (depth === void 0) { depth = 5; }\n    if (typeof val !== 'object') {\n        return val;\n    }\n    if (val === null) {\n        return null;\n    }\n    var clonedObject = Array.isArray(val) ? [] : {};\n    for (var key in val) {\n        clonedObject[key] = depth <= 1 ? val[key] : clone(val[key], depth - 1);\n    }\n    return clonedObject;\n}\nexports.clone = clone;\n//# sourceMappingURL=Clone.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/Clone.js\n// module id = 49\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./Lifecycle\");\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter() {\n        var _this = _super.call(this) || this;\n        _this._events = _this._events || {};\n        return _this;\n    }\n    EventEmitter.prototype.on = function (type, listener) {\n        this._events[type] = this._events[type] || [];\n        this._events[type].push(listener);\n    };\n    EventEmitter.prototype.addDisposableListener = function (type, handler) {\n        var _this = this;\n        this.on(type, handler);\n        var disposed = false;\n        return {\n            dispose: function () {\n                if (disposed) {\n                    return;\n                }\n                _this.off(type, handler);\n                disposed = true;\n            }\n        };\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var i = obj.length;\n        while (i--) {\n            if (obj[i] === listener) {\n                obj.splice(i, 1);\n                return;\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllListeners = function (type) {\n        if (this._events[type]) {\n            delete this._events[type];\n        }\n    };\n    EventEmitter.prototype.emit = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n        }\n    };\n    EventEmitter.prototype.emitMayRemoveListeners = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n            i -= length - obj.length;\n            length = obj.length;\n        }\n    };\n    EventEmitter.prototype.listeners = function (type) {\n        return this._events[type] || [];\n    };\n    EventEmitter.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._events = {};\n    };\n    return EventEmitter;\n}(Lifecycle_1.Disposable));\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/common/EventEmitter.js\n// module id = 50\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {\n    var toRemove = [];\n    for (var y = 0; y < lines.length - 1; y++) {\n        var i = y;\n        var nextLine = lines.get(++i);\n        if (!nextLine.isWrapped) {\n            continue;\n        }\n        var wrappedLines = [lines.get(y)];\n        while (i < lines.length && nextLine.isWrapped) {\n            wrappedLines.push(nextLine);\n            nextLine = lines.get(++i);\n        }\n        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n            y += wrappedLines.length - 1;\n            continue;\n        }\n        var destLineIndex = 0;\n        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n        var srcLineIndex = 1;\n        var srcCol = 0;\n        while (srcLineIndex < wrappedLines.length) {\n            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n            var srcRemainingCells = srcTrimmedTineLength - srcCol;\n            var destRemainingCells = newCols - destCol;\n            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n            destCol += cellsToCopy;\n            if (destCol === newCols) {\n                destLineIndex++;\n                destCol = 0;\n            }\n            srcCol += cellsToCopy;\n            if (srcCol === srcTrimmedTineLength) {\n                srcLineIndex++;\n                srcCol = 0;\n            }\n            if (destCol === 0 && destLineIndex !== 0) {\n                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n                }\n            }\n        }\n        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n        var countToRemove = 0;\n        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {\n            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {\n                countToRemove++;\n            }\n            else {\n                break;\n            }\n        }\n        if (countToRemove > 0) {\n            toRemove.push(y + wrappedLines.length - countToRemove);\n            toRemove.push(countToRemove);\n        }\n        y += wrappedLines.length - 1;\n    }\n    return toRemove;\n}\nexports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;\nfunction reflowLargerCreateNewLayout(lines, toRemove) {\n    var layout = [];\n    var nextToRemoveIndex = 0;\n    var nextToRemoveStart = toRemove[nextToRemoveIndex];\n    var countRemovedSoFar = 0;\n    for (var i = 0; i < lines.length; i++) {\n        if (nextToRemoveStart === i) {\n            var countToRemove = toRemove[++nextToRemoveIndex];\n            lines.onDeleteEmitter.fire({\n                index: i - countRemovedSoFar,\n                amount: countToRemove\n            });\n            i += countToRemove - 1;\n            countRemovedSoFar += countToRemove;\n            nextToRemoveStart = toRemove[++nextToRemoveIndex];\n        }\n        else {\n            layout.push(i);\n        }\n    }\n    return {\n        layout: layout,\n        countRemoved: countRemovedSoFar\n    };\n}\nexports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;\nfunction reflowLargerApplyNewLayout(lines, newLayout) {\n    var newLayoutLines = [];\n    for (var i = 0; i < newLayout.length; i++) {\n        newLayoutLines.push(lines.get(newLayout[i]));\n    }\n    for (var i = 0; i < newLayoutLines.length; i++) {\n        lines.set(i, newLayoutLines[i]);\n    }\n    lines.length = newLayout.length;\n}\nexports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;\nfunction reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {\n    var newLineLengths = [];\n    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });\n    var srcCol = 0;\n    var srcLine = 0;\n    var cellsAvailable = 0;\n    while (cellsAvailable < cellsNeeded) {\n        if (cellsNeeded - cellsAvailable < newCols) {\n            newLineLengths.push(cellsNeeded - cellsAvailable);\n            break;\n        }\n        srcCol += newCols;\n        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n        if (srcCol > oldTrimmedLength) {\n            srcCol -= oldTrimmedLength;\n            srcLine++;\n        }\n        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n        if (endsWithWide) {\n            srcCol--;\n        }\n        var lineLength = endsWithWide ? newCols - 1 : newCols;\n        newLineLengths.push(lineLength);\n        cellsAvailable += lineLength;\n    }\n    return newLineLengths;\n}\nexports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;\nfunction getWrappedLineTrimmedLength(lines, i, cols) {\n    if (i === lines.length - 1) {\n        return lines[i].getTrimmedLength();\n    }\n    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n    if (endsInNull && followingLineStartsWithWide) {\n        return cols - 1;\n    }\n    return cols;\n}\nexports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;\n//# sourceMappingURL=BufferReflow.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/core/buffer/BufferReflow.js\n// module id = 51\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"../../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar Marker = (function (_super) {\n    __extends(Marker, _super);\n    function Marker(line) {\n        var _this = _super.call(this) || this;\n        _this.line = line;\n        _this._id = Marker._nextId++;\n        _this.isDisposed = false;\n        _this._onDispose = new EventEmitter2_1.EventEmitter2();\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"onDispose\", {\n        get: function () { return this._onDispose.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.dispose = function () {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this._onDispose.fire();\n    };\n    Marker._nextId = 1;\n    return Marker;\n}(Lifecycle_1.Disposable));\nexports.Marker = Marker;\n//# sourceMappingURL=Marker.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/core/buffer/Marker.js\n// module id = 52\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHARSETS = {};\nexports.DEFAULT_CHARSET = exports.CHARSETS['B'];\nexports.CHARSETS['0'] = {\n    '`': '\\u25c6',\n    'a': '\\u2592',\n    'b': '\\u0009',\n    'c': '\\u000c',\n    'd': '\\u000d',\n    'e': '\\u000a',\n    'f': '\\u00b0',\n    'g': '\\u00b1',\n    'h': '\\u2424',\n    'i': '\\u000b',\n    'j': '\\u2518',\n    'k': '\\u2510',\n    'l': '\\u250c',\n    'm': '\\u2514',\n    'n': '\\u253c',\n    'o': '\\u23ba',\n    'p': '\\u23bb',\n    'q': '\\u2500',\n    'r': '\\u23bc',\n    's': '\\u23bd',\n    't': '\\u251c',\n    'u': '\\u2524',\n    'v': '\\u2534',\n    'w': '\\u252c',\n    'x': '\\u2502',\n    'y': '\\u2264',\n    'z': '\\u2265',\n    '{': '\\u03c0',\n    '|': '\\u2260',\n    '}': '\\u00a3',\n    '~': '\\u00b7'\n};\nexports.CHARSETS['A'] = {\n    '#': ''\n};\nexports.CHARSETS['B'] = null;\nexports.CHARSETS['4'] = {\n    '#': '',\n    '@': '',\n    '[': 'ij',\n    '\\\\': '',\n    ']': '|',\n    '{': '',\n    '|': 'f',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['C'] =\n    exports.CHARSETS['5'] = {\n        '[': '',\n        '\\\\': '',\n        ']': '',\n        '^': '',\n        '`': '',\n        '{': '',\n        '|': '',\n        '}': '',\n        '~': ''\n    };\nexports.CHARSETS['R'] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['Q'] = {\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '^': '',\n    '`': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['K'] = {\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['Y'] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '`': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\nexports.CHARSETS['E'] =\n    exports.CHARSETS['6'] = {\n        '@': '',\n        '[': '',\n        '\\\\': '',\n        ']': '',\n        '^': '',\n        '`': '',\n        '{': '',\n        '|': '',\n        '}': '',\n        '~': ''\n    };\nexports.CHARSETS['Z'] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '{': '',\n    '|': '',\n    '}': ''\n};\nexports.CHARSETS['H'] =\n    exports.CHARSETS['7'] = {\n        '@': '',\n        '[': '',\n        '\\\\': '',\n        ']': '',\n        '^': '',\n        '`': '',\n        '{': '',\n        '|': '',\n        '}': '',\n        '~': ''\n    };\nexports.CHARSETS['='] = {\n    '#': '',\n    '@': '',\n    '[': '',\n    '\\\\': '',\n    ']': '',\n    '^': '',\n    '_': '',\n    '`': '',\n    '{': '',\n    '|': '',\n    '}': '',\n    '~': ''\n};\n//# sourceMappingURL=Charsets.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/core/data/Charsets.js\n// module id = 53\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../../common/data/EscapeSequences\");\nvar KEYCODE_KEY_MAPPINGS = {\n    48: ['0', ')'],\n    49: ['1', '!'],\n    50: ['2', '@'],\n    51: ['3', '#'],\n    52: ['4', '$'],\n    53: ['5', '%'],\n    54: ['6', '^'],\n    55: ['7', '&'],\n    56: ['8', '*'],\n    57: ['9', '('],\n    186: [';', ':'],\n    187: ['=', '+'],\n    188: [',', '<'],\n    189: ['-', '_'],\n    190: ['.', '>'],\n    191: ['/', '?'],\n    192: ['`', '~'],\n    219: ['[', '{'],\n    220: ['\\\\', '|'],\n    221: [']', '}'],\n    222: ['\\'', '\"']\n};\nfunction evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {\n    var result = {\n        type: 0,\n        cancel: false,\n        key: undefined\n    };\n    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n    switch (ev.keyCode) {\n        case 0:\n            if (ev.key === 'UIKeyInputUpArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OA';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[A';\n                }\n            }\n            else if (ev.key === 'UIKeyInputLeftArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OD';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[D';\n                }\n            }\n            else if (ev.key === 'UIKeyInputRightArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OC';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[C';\n                }\n            }\n            else if (ev.key === 'UIKeyInputDownArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OB';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[B';\n                }\n            }\n            break;\n        case 8:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.BS;\n                break;\n            }\n            else if (ev.altKey) {\n                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;\n                break;\n            }\n            result.key = EscapeSequences_1.C0.DEL;\n            break;\n        case 9:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[Z';\n                break;\n            }\n            result.key = EscapeSequences_1.C0.HT;\n            result.cancel = true;\n            break;\n        case 13:\n            result.key = EscapeSequences_1.C0.CR;\n            result.cancel = true;\n            break;\n        case 27:\n            result.key = EscapeSequences_1.C0.ESC;\n            result.cancel = true;\n            break;\n        case 37:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OD';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[D';\n            }\n            break;\n        case 39:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OC';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[C';\n            }\n            break;\n        case 38:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OA';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[A';\n            }\n            break;\n        case 40:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OB';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[B';\n            }\n            break;\n        case 45:\n            if (!ev.shiftKey && !ev.ctrlKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[2~';\n            }\n            break;\n        case 46:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[3~';\n            }\n            break;\n        case 36:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OH';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[H';\n            }\n            break;\n        case 35:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OF';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[F';\n            }\n            break;\n        case 33:\n            if (ev.shiftKey) {\n                result.type = 2;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[5~';\n            }\n            break;\n        case 34:\n            if (ev.shiftKey) {\n                result.type = 3;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[6~';\n            }\n            break;\n        case 112:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OP';\n            }\n            break;\n        case 113:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OQ';\n            }\n            break;\n        case 114:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OR';\n            }\n            break;\n        case 115:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OS';\n            }\n            break;\n        case 116:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[15~';\n            }\n            break;\n        case 117:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[17~';\n            }\n            break;\n        case 118:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[18~';\n            }\n            break;\n        case 119:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[19~';\n            }\n            break;\n        case 120:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[20~';\n            }\n            break;\n        case 121:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[21~';\n            }\n            break;\n        case 122:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[23~';\n            }\n            break;\n        case 123:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[24~';\n            }\n            break;\n        default:\n            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n                if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    result.key = String.fromCharCode(ev.keyCode - 64);\n                }\n                else if (ev.keyCode === 32) {\n                    result.key = String.fromCharCode(0);\n                }\n                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n                }\n                else if (ev.keyCode === 56) {\n                    result.key = String.fromCharCode(127);\n                }\n                else if (ev.keyCode === 219) {\n                    result.key = String.fromCharCode(27);\n                }\n                else if (ev.keyCode === 220) {\n                    result.key = String.fromCharCode(28);\n                }\n                else if (ev.keyCode === 221) {\n                    result.key = String.fromCharCode(29);\n                }\n            }\n            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n                if (key) {\n                    result.key = EscapeSequences_1.C0.ESC + key;\n                }\n                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);\n                }\n            }\n            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {\n                if (ev.keyCode === 65) {\n                    result.type = 1;\n                }\n            }\n            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n                result.key = ev.key;\n            }\n            else if (ev.key && ev.ctrlKey) {\n                if (ev.key === '_') {\n                    result.key = EscapeSequences_1.C0.US;\n                }\n            }\n            break;\n    }\n    return result;\n}\nexports.evaluateKeyboardEvent = evaluateKeyboardEvent;\n//# sourceMappingURL=Keyboard.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/core/input/Keyboard.js\n// module id = 54\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../common/data/EscapeSequences\");\nvar AltClickHandler = (function () {\n    function AltClickHandler(_mouseEvent, _terminal) {\n        var _a;\n        this._mouseEvent = _mouseEvent;\n        this._terminal = _terminal;\n        this._lines = this._terminal.buffer.lines;\n        this._startCol = this._terminal.buffer.x;\n        this._startRow = this._terminal.buffer.y;\n        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);\n        if (coordinates) {\n            _a = coordinates.map(function (coordinate) {\n                return coordinate - 1;\n            }), this._endCol = _a[0], this._endRow = _a[1];\n        }\n    }\n    AltClickHandler.prototype.move = function () {\n        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {\n            this._terminal.handler(this._arrowSequences());\n        }\n    };\n    AltClickHandler.prototype._arrowSequences = function () {\n        if (!this._terminal.buffer.hasScrollback) {\n            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();\n        }\n        return this._moveHorizontallyOnly();\n    };\n    AltClickHandler.prototype._resetStartingRow = function () {\n        if (this._moveToRequestedRow().length === 0) {\n            return '';\n        }\n        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence(\"D\"));\n    };\n    AltClickHandler.prototype._moveToRequestedRow = function () {\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();\n        return repeat(rowsToMove, this._sequence(this._verticalDirection()));\n    };\n    AltClickHandler.prototype._moveToRequestedCol = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        var endRow = this._endRow;\n        var direction = this._horizontalDirection();\n        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === \"C\").length, this._sequence(direction));\n    };\n    AltClickHandler.prototype._moveHorizontallyOnly = function () {\n        var direction = this._horizontalDirection();\n        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));\n    };\n    AltClickHandler.prototype._wrappedRowsCount = function () {\n        var wrappedRows = 0;\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        for (var i = 0; i < Math.abs(startRow - endRow); i++) {\n            var direction = this._verticalDirection() === \"A\" ? -1 : 1;\n            if (this._lines.get(startRow + (direction * i)).isWrapped) {\n                wrappedRows++;\n            }\n        }\n        return wrappedRows;\n    };\n    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {\n        var rowCount = 0;\n        var lineWraps = this._lines.get(currentRow).isWrapped;\n        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {\n            rowCount++;\n            currentRow--;\n            lineWraps = this._lines.get(currentRow).isWrapped;\n        }\n        return rowCount;\n    };\n    AltClickHandler.prototype._horizontalDirection = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        if ((this._startCol < this._endCol &&\n            startRow <= this._endRow) ||\n            (this._startCol >= this._endCol &&\n                startRow < this._endRow)) {\n            return \"C\";\n        }\n        return \"D\";\n    };\n    AltClickHandler.prototype._verticalDirection = function () {\n        if (this._startRow > this._endRow) {\n            return \"A\";\n        }\n        return \"B\";\n    };\n    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {\n        var currentCol = startCol;\n        var currentRow = startRow;\n        var bufferStr = '';\n        while (currentCol !== endCol || currentRow !== endRow) {\n            currentCol += forward ? 1 : -1;\n            if (forward && currentCol > this._terminal.cols - 1) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n                currentCol = 0;\n                startCol = 0;\n                currentRow++;\n            }\n            else if (!forward && currentCol < 0) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);\n                currentCol = this._terminal.cols - 1;\n                startCol = currentCol;\n                currentRow--;\n            }\n        }\n        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n    };\n    AltClickHandler.prototype._sequence = function (direction) {\n        var mod = this._terminal.applicationCursor ? 'O' : '[';\n        return EscapeSequences_1.C0.ESC + mod + direction;\n    };\n    return AltClickHandler;\n}());\nexports.AltClickHandler = AltClickHandler;\nfunction repeat(count, str) {\n    count = Math.floor(count);\n    var rpt = '';\n    for (var i = 0; i < count; i++) {\n        rpt += str;\n    }\n    return rpt;\n}\n//# sourceMappingURL=AltClickHandler.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/handlers/AltClickHandler.js\n// module id = 55\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AddonManager = (function () {\n    function AddonManager() {\n        this._addons = [];\n    }\n    AddonManager.prototype.dispose = function () {\n        for (var i = this._addons.length - 1; i >= 0; i--) {\n            this._addons[i].instance.dispose();\n        }\n    };\n    AddonManager.prototype.loadAddon = function (terminal, instance) {\n        var _this = this;\n        var loadedAddon = {\n            instance: instance,\n            dispose: instance.dispose,\n            isDisposed: false\n        };\n        this._addons.push(loadedAddon);\n        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };\n        instance.activate(terminal);\n    };\n    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {\n        if (loadedAddon.isDisposed) {\n            return;\n        }\n        var index = -1;\n        for (var i = 0; i < this._addons.length; i++) {\n            if (this._addons[i] === loadedAddon) {\n                index = i;\n                break;\n            }\n        }\n        if (index === -1) {\n            throw new Error('Could not dispose an addon that has not been loaded');\n        }\n        loadedAddon.isDisposed = true;\n        loadedAddon.dispose.apply(loadedAddon.instance);\n        this._addons.splice(index, 1);\n    };\n    return AddonManager;\n}());\nexports.AddonManager = AddonManager;\n//# sourceMappingURL=AddonManager.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/public/AddonManager.js\n// module id = 56\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BLINK_INTERVAL = 600;\nvar CursorRenderLayer = (function (_super) {\n    __extends(CursorRenderLayer, _super);\n    function CursorRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;\n        _this._cell = new BufferLine_1.CellData();\n        _this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n        _this._cursorRenderers = {\n            'bar': _this._renderBarCursor.bind(_this),\n            'block': _this._renderBlockCursor.bind(_this),\n            'underline': _this._renderUnderlineCursor.bind(_this)\n        };\n        return _this;\n    }\n    CursorRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n    };\n    CursorRenderLayer.prototype.reset = function (terminal) {\n        this._clearCursor();\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.dispose();\n            this._cursorBlinkStateManager = null;\n            this.onOptionsChanged(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onBlur = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.pause();\n        }\n        terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n    };\n    CursorRenderLayer.prototype.onFocus = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.resume(terminal);\n        }\n        else {\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        var _this = this;\n        if (terminal.options.cursorBlink) {\n            if (!this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {\n                    _this._render(terminal, true);\n                });\n            }\n        }\n        else {\n            if (this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager.dispose();\n                this._cursorBlinkStateManager = null;\n            }\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onCursorMove = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {\n        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n            this._render(terminal, false);\n        }\n        else {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {\n        if (!terminal.cursorState || terminal.cursorHidden) {\n            this._clearCursor();\n            return;\n        }\n        var cursorY = terminal.buffer.ybase + terminal.buffer.y;\n        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {\n            this._clearCursor();\n            return;\n        }\n        terminal.buffer.lines.get(cursorY).loadCell(terminal.buffer.x, this._cell);\n        if (this._cell.content === undefined) {\n            return;\n        }\n        if (!terminal.isFocused) {\n            this._clearCursor();\n            this._ctx.save();\n            this._ctx.fillStyle = this._colors.cursor.css;\n            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n            this._ctx.restore();\n            this._state.x = terminal.buffer.x;\n            this._state.y = viewportRelativeCursorY;\n            this._state.isFocused = false;\n            this._state.style = terminal.options.cursorStyle;\n            this._state.width = this._cell.getWidth();\n            return;\n        }\n        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n            this._clearCursor();\n            return;\n        }\n        if (this._state) {\n            if (this._state.x === terminal.buffer.x &&\n                this._state.y === viewportRelativeCursorY &&\n                this._state.isFocused === terminal.isFocused &&\n                this._state.style === terminal.options.cursorStyle &&\n                this._state.width === this._cell.getWidth()) {\n                return;\n            }\n            this._clearCursor();\n        }\n        this._ctx.save();\n        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n        this._ctx.restore();\n        this._state.x = terminal.buffer.x;\n        this._state.y = viewportRelativeCursorY;\n        this._state.isFocused = false;\n        this._state.style = terminal.options.cursorStyle;\n        this._state.width = this._cell.getWidth();\n    };\n    CursorRenderLayer.prototype._clearCursor = function () {\n        if (this._state) {\n            this.clearCells(this._state.x, this._state.y, this._state.width, 1);\n            this._state = {\n                x: null,\n                y: null,\n                isFocused: null,\n                style: null,\n                width: null\n            };\n        }\n    };\n    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillLeftLineAtCell(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillCells(x, y, cell.getWidth(), 1);\n        this._ctx.fillStyle = this._colors.cursorAccent.css;\n        this.fillCharTrueColor(terminal, cell, x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillBottomLineAtCells(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.strokeStyle = this._colors.cursor.css;\n        this.strokeRectAtCell(x, y, cell.getWidth(), 1);\n        this._ctx.restore();\n    };\n    return CursorRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.CursorRenderLayer = CursorRenderLayer;\nvar CursorBlinkStateManager = (function () {\n    function CursorBlinkStateManager(terminal, _renderCallback) {\n        this._renderCallback = _renderCallback;\n        this.isCursorVisible = true;\n        if (terminal.isFocused) {\n            this._restartInterval();\n        }\n    }\n    Object.defineProperty(CursorBlinkStateManager.prototype, \"isPaused\", {\n        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },\n        enumerable: true,\n        configurable: true\n    });\n    CursorBlinkStateManager.prototype.dispose = function () {\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {\n        var _this = this;\n        if (this.isPaused) {\n            return;\n        }\n        this._animationTimeRestarted = Date.now();\n        this.isCursorVisible = true;\n        if (!this._animationFrame) {\n            this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n        }\n    };\n    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {\n        var _this = this;\n        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n        }\n        this._blinkStartTimeout = setTimeout(function () {\n            if (_this._animationTimeRestarted) {\n                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                _this._animationTimeRestarted = null;\n                if (time > 0) {\n                    _this._restartInterval(time);\n                    return;\n                }\n            }\n            _this.isCursorVisible = false;\n            _this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n            _this._blinkInterval = setInterval(function () {\n                if (_this._animationTimeRestarted) {\n                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                    _this._animationTimeRestarted = null;\n                    _this._restartInterval(time);\n                    return;\n                }\n                _this.isCursorVisible = !_this.isCursorVisible;\n                _this._animationFrame = window.requestAnimationFrame(function () {\n                    _this._renderCallback();\n                    _this._animationFrame = null;\n                });\n            }, BLINK_INTERVAL);\n        }, timeToStart);\n    };\n    CursorBlinkStateManager.prototype.pause = function () {\n        this.isCursorVisible = true;\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.resume = function (terminal) {\n        this._animationTimeRestarted = null;\n        this._restartInterval();\n        this.restartBlinkAnimation(terminal);\n    };\n    return CursorBlinkStateManager;\n}());\n//# sourceMappingURL=CursorRenderLayer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/CursorRenderLayer.js\n// module id = 57\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache = (function () {\n    function GridCache() {\n        this.cache = [];\n    }\n    GridCache.prototype.resize = function (width, height) {\n        for (var x = 0; x < width; x++) {\n            if (this.cache.length <= x) {\n                this.cache.push([]);\n            }\n            for (var y = this.cache[x].length; y < height; y++) {\n                this.cache[x].push(null);\n            }\n            this.cache[x].length = height;\n        }\n        this.cache.length = width;\n    };\n    GridCache.prototype.clear = function () {\n        for (var x = 0; x < this.cache.length; x++) {\n            for (var y = 0; y < this.cache[x].length; y++) {\n                this.cache[x][y] = null;\n            }\n        }\n    };\n    return GridCache;\n}());\nexports.GridCache = GridCache;\n//# sourceMappingURL=GridCache.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/GridCache.js\n// module id = 58\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar LinkRenderLayer = (function (_super) {\n    __extends(LinkRenderLayer, _super);\n    function LinkRenderLayer(container, zIndex, colors, terminal) {\n        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;\n        _this._state = null;\n        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    LinkRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = null;\n    };\n    LinkRenderLayer.prototype.reset = function (terminal) {\n        this._clearCurrentLink();\n    };\n    LinkRenderLayer.prototype._clearCurrentLink = function () {\n        if (this._state) {\n            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n            var middleRowCount = this._state.y2 - this._state.y1 - 1;\n            if (middleRowCount > 0) {\n                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n            }\n            this.clearCells(0, this._state.y2, this._state.x2, 1);\n            this._state = null;\n        }\n    };\n    LinkRenderLayer.prototype._onLinkHover = function (e) {\n        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(e.fg)) {\n            this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        if (e.y1 === e.y2) {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n        }\n        else {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n            for (var y = e.y1 + 1; y < e.y2; y++) {\n                this.fillBottomLineAtCells(0, y, e.cols);\n            }\n            this.fillBottomLineAtCells(0, e.y2, e.x2);\n        }\n        this._state = e;\n    };\n    LinkRenderLayer.prototype._onLinkLeave = function (e) {\n        this._clearCurrentLink();\n    };\n    return LinkRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.LinkRenderLayer = LinkRenderLayer;\n//# sourceMappingURL=LinkRenderLayer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/LinkRenderLayer.js\n// module id = 59\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer_1 = require(\"../ui/RenderDebouncer\");\nvar EventEmitter2_1 = require(\"../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"../ui/ScreenDprMonitor\");\nvar Lifecycle_2 = require(\"../ui/Lifecycle\");\nvar RenderCoordinator = (function (_super) {\n    __extends(RenderCoordinator, _super);\n    function RenderCoordinator(_renderer, _rowCount, screenElement) {\n        var _this = _super.call(this) || this;\n        _this._renderer = _renderer;\n        _this._rowCount = _rowCount;\n        _this._isPaused = false;\n        _this._needsFullRefresh = false;\n        _this._canvasWidth = 0;\n        _this._canvasHeight = 0;\n        _this._onDimensionsChange = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onRefreshRequest = new EventEmitter2_1.EventEmitter2();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });\n        _this.register(_this._renderDebouncer);\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this._screenDprMonitor.setListener(function () { return _this._renderer.onDevicePixelRatioChange(); });\n        _this.register(_this._screenDprMonitor);\n        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this._renderer.onDevicePixelRatioChange(); }));\n        if ('IntersectionObserver' in window) {\n            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });\n            observer_1.observe(screenElement);\n            _this.register({ dispose: function () { return observer_1.disconnect(); } });\n        }\n        return _this;\n    }\n    Object.defineProperty(RenderCoordinator.prototype, \"onDimensionsChange\", {\n        get: function () { return this._onDimensionsChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRefreshRequest\", {\n        get: function () { return this._onRefreshRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"dimensions\", {\n        get: function () { return this._renderer.dimensions; },\n        enumerable: true,\n        configurable: true\n    });\n    RenderCoordinator.prototype._onIntersectionChange = function (entry) {\n        this._isPaused = entry.intersectionRatio === 0;\n        if (!this._isPaused && this._needsFullRefresh) {\n            this.refreshRows(0, this._rowCount - 1);\n            this._needsFullRefresh = false;\n        }\n    };\n    RenderCoordinator.prototype.refreshRows = function (start, end) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n            return;\n        }\n        this._renderDebouncer.refresh(start, end, this._rowCount);\n    };\n    RenderCoordinator.prototype._renderRows = function (start, end) {\n        this._renderer.renderRows(start, end);\n        this._onRender.fire({ start: start, end: end });\n    };\n    RenderCoordinator.prototype.resize = function (cols, rows) {\n        this._rowCount = rows;\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype.changeOptions = function () {\n        this._renderer.onOptionsChanged();\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype._fireOnCanvasResize = function () {\n        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {\n            return;\n        }\n        this._onDimensionsChange.fire(this._renderer.dimensions);\n    };\n    RenderCoordinator.prototype.setRenderer = function (renderer) {\n        this._renderer.dispose();\n        this._renderer = renderer;\n    };\n    RenderCoordinator.prototype._fullRefresh = function () {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this.refreshRows(0, this._rowCount);\n        }\n    };\n    RenderCoordinator.prototype.setColors = function (colors) {\n        this._renderer.setColors(colors);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onDevicePixelRatioChange = function () {\n        this._renderer.onDevicePixelRatioChange();\n    };\n    RenderCoordinator.prototype.onResize = function (cols, rows) {\n        this._renderer.onResize(cols, rows);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onCharSizeChanged = function () {\n        this._renderer.onCharSizeChanged();\n    };\n    RenderCoordinator.prototype.onBlur = function () {\n        this._renderer.onBlur();\n    };\n    RenderCoordinator.prototype.onFocus = function () {\n        this._renderer.onFocus();\n    };\n    RenderCoordinator.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        this._renderer.onSelectionChanged(start, end, columnSelectMode);\n    };\n    RenderCoordinator.prototype.onCursorMove = function () {\n        this._renderer.onCursorMove();\n    };\n    RenderCoordinator.prototype.onOptionsChanged = function () {\n        this._renderer.onOptionsChanged();\n    };\n    RenderCoordinator.prototype.clear = function () {\n        this._renderer.clear();\n    };\n    RenderCoordinator.prototype.registerCharacterJoiner = function (handler) {\n        return this._renderer.registerCharacterJoiner(handler);\n    };\n    RenderCoordinator.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._renderer.deregisterCharacterJoiner(joinerId);\n    };\n    return RenderCoordinator;\n}(Lifecycle_1.Disposable));\nexports.RenderCoordinator = RenderCoordinator;\n//# sourceMappingURL=RenderCoordinator.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/RenderCoordinator.js\n// module id = 60\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextRenderLayer_1 = require(\"./TextRenderLayer\");\nvar SelectionRenderLayer_1 = require(\"./SelectionRenderLayer\");\nvar CursorRenderLayer_1 = require(\"./CursorRenderLayer\");\nvar LinkRenderLayer_1 = require(\"./LinkRenderLayer\");\nvar CharacterJoinerRegistry_1 = require(\"../renderer/CharacterJoinerRegistry\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar Renderer = (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);\n        _this._renderLayers = [\n            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this._colors, _this._characterJoinerRegistry, allowTransparency),\n            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this._colors),\n            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this._colors, _this._terminal),\n            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this._colors)\n        ];\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._devicePixelRatio = window.devicePixelRatio;\n        _this._updateDimensions();\n        _this.onOptionsChanged();\n        return _this;\n    }\n    Renderer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._renderLayers.forEach(function (l) { return l.dispose(); });\n    };\n    Renderer.prototype.onDevicePixelRatioChange = function () {\n        if (this._devicePixelRatio !== window.devicePixelRatio) {\n            this._devicePixelRatio = window.devicePixelRatio;\n            this.onResize(this._terminal.cols, this._terminal.rows);\n        }\n    };\n    Renderer.prototype.setColors = function (colors) {\n        var _this = this;\n        this._colors = colors;\n        this._renderLayers.forEach(function (l) {\n            l.setColors(_this._terminal, _this._colors);\n            l.reset(_this._terminal);\n        });\n    };\n    Renderer.prototype.onResize = function (cols, rows) {\n        var _this = this;\n        this._updateDimensions();\n        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    Renderer.prototype.onCharSizeChanged = function () {\n        this.onResize(this._terminal.cols, this._terminal.rows);\n    };\n    Renderer.prototype.onBlur = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onBlur(_this._terminal); });\n    };\n    Renderer.prototype.onFocus = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onFocus(_this._terminal); });\n    };\n    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        var _this = this;\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });\n    };\n    Renderer.prototype.onCursorMove = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });\n    };\n    Renderer.prototype.onOptionsChanged = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });\n    };\n    Renderer.prototype.clear = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.reset(_this._terminal); });\n    };\n    Renderer.prototype._runOperation = function (operation) {\n        this._renderLayers.forEach(function (l) { return operation(l); });\n    };\n    Renderer.prototype.renderRows = function (start, end) {\n        var _this = this;\n        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });\n    };\n    Renderer.prototype._updateDimensions = function () {\n        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {\n            return;\n        }\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);\n        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;\n        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n    };\n    Renderer.prototype.registerCharacterJoiner = function (handler) {\n        return this._characterJoinerRegistry.registerCharacterJoiner(handler);\n    };\n    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);\n    };\n    return Renderer;\n}(Lifecycle_1.Disposable));\nexports.Renderer = Renderer;\n//# sourceMappingURL=Renderer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/Renderer.js\n// module id = 61\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar SelectionRenderLayer = (function (_super) {\n    __extends(SelectionRenderLayer, _super);\n    function SelectionRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;\n        _this._clearState();\n        return _this;\n    }\n    SelectionRenderLayer.prototype._clearState = function () {\n        this._state = {\n            start: null,\n            end: null,\n            columnSelectMode: null,\n            ydisp: null\n        };\n    };\n    SelectionRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._clearState();\n    };\n    SelectionRenderLayer.prototype.reset = function (terminal) {\n        if (this._state.start && this._state.end) {\n            this._clearState();\n            this.clearAll();\n        }\n    };\n    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {\n            return;\n        }\n        this.clearAll();\n        if (!start || !end) {\n            this._clearState();\n            return;\n        }\n        var viewportStartRow = start[1] - terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        this._ctx.fillStyle = this._colors.selection.css;\n        if (columnSelectMode) {\n            var startCol = start[0];\n            var width = end[0] - startCol;\n            var height = viewportCappedEndRow - viewportCappedStartRow + 1;\n            this.fillCells(startCol, viewportCappedStartRow, width, height);\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;\n            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;\n                this.fillCells(0, viewportCappedEndRow, endCol, 1);\n            }\n        }\n        this._state.start = [start[0], start[1]];\n        this._state.end = [end[0], end[1]];\n        this._state.columnSelectMode = columnSelectMode;\n        this._state.ydisp = terminal.buffer.ydisp;\n    };\n    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {\n        return !this._areCoordinatesEqual(start, this._state.start) ||\n            !this._areCoordinatesEqual(end, this._state.end) ||\n            columnSelectMode !== this._state.columnSelectMode ||\n            ydisp !== this._state.ydisp;\n    };\n    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {\n        if (!coord1 || !coord2) {\n            return false;\n        }\n        return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n    };\n    return SelectionRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.SelectionRenderLayer = SelectionRenderLayer;\n//# sourceMappingURL=SelectionRenderLayer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/SelectionRenderLayer.js\n// module id = 62\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache_1 = require(\"./GridCache\");\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar CharacterJoinerRegistry_1 = require(\"./CharacterJoinerRegistry\");\nvar TextRenderLayer = (function (_super) {\n    __extends(TextRenderLayer, _super);\n    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {\n        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;\n        _this._characterOverlapCache = {};\n        _this._workCell = new BufferLine_1.CellData();\n        _this._state = new GridCache_1.GridCache();\n        _this._characterJoinerRegistry = characterJoinerRegistry;\n        return _this;\n    }\n    TextRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        var terminalFont = this._getFont(terminal, false, false);\n        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n            this._characterWidth = dim.scaledCharWidth;\n            this._characterFont = terminalFont;\n            this._characterOverlapCache = {};\n        }\n        this._state.clear();\n        this._state.resize(terminal.cols, terminal.rows);\n    };\n    TextRenderLayer.prototype.reset = function (terminal) {\n        this._state.clear();\n        this.clearAll();\n    };\n    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {\n        for (var y = firstRow; y <= lastRow; y++) {\n            var row = y + terminal.buffer.ydisp;\n            var line = terminal.buffer.lines.get(row);\n            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];\n            for (var x = 0; x < terminal.cols; x++) {\n                line.loadCell(x, this._workCell);\n                var cell = this._workCell;\n                var isJoined = false;\n                var lastCharX = x;\n                if (cell.getWidth() === 0) {\n                    continue;\n                }\n                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n                    isJoined = true;\n                    var range = joinedRanges.shift();\n                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);\n                    lastCharX = range[1] - 1;\n                }\n                if (!isJoined && this._isOverlapping(cell)) {\n                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === BufferLine_1.NULL_CELL_CODE) {\n                        cell.content &= ~12582912;\n                        cell.content |= 2 << 22;\n                    }\n                }\n                callback(cell, x, y);\n                x = lastCharX;\n            }\n        }\n    };\n    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        var ctx = this._ctx;\n        var cols = terminal.cols;\n        var startX = 0;\n        var startY = 0;\n        var prevFillStyle = null;\n        ctx.save();\n        this._forEachCell(terminal, firstRow, lastRow, null, function (cell, x, y) {\n            var nextFillStyle = null;\n            if (cell.isInverse()) {\n                if (cell.isFgDefault()) {\n                    nextFillStyle = _this._colors.foreground.css;\n                }\n                else if (cell.isFgRGB()) {\n                    nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                }\n                else {\n                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;\n                }\n            }\n            else if (cell.isBgRGB()) {\n                nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else if (cell.isBgPalette()) {\n                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;\n            }\n            if (prevFillStyle === null) {\n                startX = x;\n                startY = y;\n            }\n            if (y !== startY) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, cols - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            else if (prevFillStyle !== nextFillStyle) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, x - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            prevFillStyle = nextFillStyle;\n        });\n        if (prevFillStyle !== null) {\n            ctx.fillStyle = prevFillStyle;\n            this.fillCells(startX, startY, cols - startX, 1);\n        }\n        ctx.restore();\n    };\n    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {\n            if (cell.isInvisible()) {\n                return;\n            }\n            _this.drawChars(terminal, cell, x, y);\n            if (cell.isUnderline()) {\n                _this._ctx.save();\n                if (cell.isInverse()) {\n                    if (cell.isBgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.background.css;\n                    }\n                    else if (cell.isBgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n                    }\n                    else {\n                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;\n                    }\n                }\n                else {\n                    if (cell.isFgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.foreground.css;\n                    }\n                    else if (cell.isFgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                    }\n                    else {\n                        var fg = cell.getFgColor();\n                        if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                            fg += 8;\n                        }\n                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;\n                    }\n                }\n                _this.fillBottomLineAtCells(x, y, cell.getWidth());\n                _this._ctx.restore();\n            }\n        });\n    };\n    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {\n        if (this._state.cache.length === 0) {\n            return;\n        }\n        if (this._charAtlas) {\n            this._charAtlas.beginFrame();\n        }\n        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);\n        this._drawBackground(terminal, firstRow, lastRow);\n        this._drawForeground(terminal, firstRow, lastRow);\n    };\n    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        this.setTransparency(terminal, terminal.options.allowTransparency);\n    };\n    TextRenderLayer.prototype._isOverlapping = function (cell) {\n        if (cell.getWidth() !== 1) {\n            return false;\n        }\n        if (cell.getCode() < 256) {\n            return false;\n        }\n        var chars = cell.getChars();\n        if (this._characterOverlapCache.hasOwnProperty(chars)) {\n            return this._characterOverlapCache[chars];\n        }\n        this._ctx.save();\n        this._ctx.font = this._characterFont;\n        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n        this._ctx.restore();\n        this._characterOverlapCache[chars] = overlaps;\n        return overlaps;\n    };\n    return TextRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.TextRenderLayer = TextRenderLayer;\n//# sourceMappingURL=TextRenderLayer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/TextRenderLayer.js\n// module id = 63\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar ColorManager_1 = require(\"../../ui/ColorManager\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar LRUMap_1 = require(\"./LRUMap\");\nvar Platform_1 = require(\"../../common/Platform\");\nvar TEXTURE_WIDTH = 1024;\nvar TEXTURE_HEIGHT = 1024;\nvar TRANSPARENT_COLOR = {\n    css: 'rgba(0, 0, 0, 0)',\n    rgba: 0\n};\nvar FRAME_CACHE_DRAW_LIMIT = 100;\nvar GLYPH_BITMAP_COMMIT_DELAY = 100;\nfunction getGlyphCacheKey(glyph) {\n    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\nexports.getGlyphCacheKey = getGlyphCacheKey;\nvar DynamicCharAtlas = (function (_super) {\n    __extends(DynamicCharAtlas, _super);\n    function DynamicCharAtlas(document, _config) {\n        var _this = _super.call(this) || this;\n        _this._config = _config;\n        _this._drawToCacheCount = 0;\n        _this._glyphsWaitingOnBitmap = [];\n        _this._bitmapCommitTimeout = null;\n        _this._bitmap = null;\n        _this._cacheCanvas = document.createElement('canvas');\n        _this._cacheCanvas.width = TEXTURE_WIDTH;\n        _this._cacheCanvas.height = TEXTURE_HEIGHT;\n        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = _this._config.scaledCharWidth;\n        tmpCanvas.height = _this._config.scaledCharHeight;\n        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });\n        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);\n        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);\n        var capacity = _this._width * _this._height;\n        _this._cacheMap = new LRUMap_1.default(capacity);\n        _this._cacheMap.prealloc(capacity);\n        return _this;\n    }\n    DynamicCharAtlas.prototype.dispose = function () {\n        if (this._bitmapCommitTimeout !== null) {\n            window.clearTimeout(this._bitmapCommitTimeout);\n            this._bitmapCommitTimeout = null;\n        }\n    };\n    DynamicCharAtlas.prototype.beginFrame = function () {\n        this._drawToCacheCount = 0;\n    };\n    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (glyph.code === 32) {\n            return true;\n        }\n        if (!this._canCache(glyph)) {\n            return false;\n        }\n        var glyphKey = getGlyphCacheKey(glyph);\n        var cacheValue = this._cacheMap.get(glyphKey);\n        if (cacheValue !== null && cacheValue !== undefined) {\n            this._drawFromCache(ctx, cacheValue, x, y);\n            return true;\n        }\n        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n            var index = void 0;\n            if (this._cacheMap.size < this._cacheMap.capacity) {\n                index = this._cacheMap.size;\n            }\n            else {\n                index = this._cacheMap.peek().index;\n            }\n            var cacheValue_1 = this._drawToCache(glyph, index);\n            this._cacheMap.set(glyphKey, cacheValue_1);\n            this._drawFromCache(ctx, cacheValue_1, x, y);\n            return true;\n        }\n        return false;\n    };\n    DynamicCharAtlas.prototype._canCache = function (glyph) {\n        return glyph.code < 256;\n    };\n    DynamicCharAtlas.prototype._toCoordinateX = function (index) {\n        return (index % this._width) * this._config.scaledCharWidth;\n    };\n    DynamicCharAtlas.prototype._toCoordinateY = function (index) {\n        return Math.floor(index / this._width) * this._config.scaledCharHeight;\n    };\n    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {\n        if (cacheValue.isEmpty) {\n            return;\n        }\n        var cacheX = this._toCoordinateX(cacheValue.index);\n        var cacheY = this._toCoordinateY(cacheValue.index);\n        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    };\n    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {\n        if (idx < this._config.colors.ansi.length) {\n            return this._config.colors.ansi[idx];\n        }\n        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];\n    };\n    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {\n        if (this._config.allowTransparency) {\n            return TRANSPARENT_COLOR;\n        }\n        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.foreground;\n        }\n        else if (glyph.bg < 256) {\n            return this._getColorFromAnsiIndex(glyph.bg);\n        }\n        return this._config.colors.background;\n    };\n    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {\n        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.background;\n        }\n        else if (glyph.fg < 256) {\n            return this._getColorFromAnsiIndex(glyph.fg);\n        }\n        return this._config.colors.foreground;\n    };\n    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {\n        this._drawToCacheCount++;\n        this._tmpCtx.save();\n        var backgroundColor = this._getBackgroundColor(glyph);\n        this._tmpCtx.globalCompositeOperation = 'copy';\n        this._tmpCtx.fillStyle = backgroundColor.css;\n        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        this._tmpCtx.globalCompositeOperation = 'source-over';\n        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n        var fontStyle = glyph.italic ? 'italic' : '';\n        this._tmpCtx.font =\n            fontStyle + \" \" + fontWeight + \" \" + this._config.fontSize * this._config.devicePixelRatio + \"px \" + this._config.fontFamily;\n        this._tmpCtx.textBaseline = 'middle';\n        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n        if (glyph.dim) {\n            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);\n        this._tmpCtx.restore();\n        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        var isEmpty = false;\n        if (!this._config.allowTransparency) {\n            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);\n        }\n        var x = this._toCoordinateX(index);\n        var y = this._toCoordinateY(index);\n        this._cacheCtx.putImageData(imageData, x, y);\n        var cacheValue = {\n            index: index,\n            isEmpty: isEmpty,\n            inBitmap: false\n        };\n        this._addGlyphToBitmap(cacheValue);\n        return cacheValue;\n    };\n    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {\n        var _this = this;\n        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {\n            return;\n        }\n        this._glyphsWaitingOnBitmap.push(cacheValue);\n        if (this._bitmapCommitTimeout !== null) {\n            return;\n        }\n        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);\n    };\n    DynamicCharAtlas.prototype._generateBitmap = function () {\n        var _this = this;\n        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n        this._glyphsWaitingOnBitmap = [];\n        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {\n            _this._bitmap = bitmap;\n            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {\n                var value = glyphsMovingToBitmap[i];\n                value.inBitmap = true;\n            }\n        });\n        this._bitmapCommitTimeout = null;\n    };\n    return DynamicCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = DynamicCharAtlas;\n//# sourceMappingURL=DynamicCharAtlas.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/DynamicCharAtlas.js\n// module id = 64\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRUMap = (function () {\n    function LRUMap(capacity) {\n        this.capacity = capacity;\n        this._map = {};\n        this._head = null;\n        this._tail = null;\n        this._nodePool = [];\n        this.size = 0;\n    }\n    LRUMap.prototype._unlinkNode = function (node) {\n        var prev = node.prev;\n        var next = node.next;\n        if (node === this._head) {\n            this._head = next;\n        }\n        if (node === this._tail) {\n            this._tail = prev;\n        }\n        if (prev !== null) {\n            prev.next = next;\n        }\n        if (next !== null) {\n            next.prev = prev;\n        }\n    };\n    LRUMap.prototype._appendNode = function (node) {\n        var tail = this._tail;\n        if (tail !== null) {\n            tail.next = node;\n        }\n        node.prev = tail;\n        node.next = null;\n        this._tail = node;\n        if (this._head === null) {\n            this._head = node;\n        }\n    };\n    LRUMap.prototype.prealloc = function (count) {\n        var nodePool = this._nodePool;\n        for (var i = 0; i < count; i++) {\n            nodePool.push({\n                prev: null,\n                next: null,\n                key: null,\n                value: null\n            });\n        }\n    };\n    LRUMap.prototype.get = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            this._unlinkNode(node);\n            this._appendNode(node);\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peekValue = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peek = function () {\n        var head = this._head;\n        return head === null ? null : head.value;\n    };\n    LRUMap.prototype.set = function (key, value) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            node = this._map[key];\n            this._unlinkNode(node);\n            node.value = value;\n        }\n        else if (this.size >= this.capacity) {\n            node = this._head;\n            this._unlinkNode(node);\n            delete this._map[node.key];\n            node.key = key;\n            node.value = value;\n            this._map[key] = node;\n        }\n        else {\n            var nodePool = this._nodePool;\n            if (nodePool.length > 0) {\n                node = nodePool.pop();\n                node.key = key;\n                node.value = value;\n            }\n            else {\n                node = {\n                    prev: null,\n                    next: null,\n                    key: key,\n                    value: value\n                };\n            }\n            this._map[key] = node;\n            this.size++;\n        }\n        this._appendNode(node);\n    };\n    return LRUMap;\n}());\nexports.default = LRUMap;\n//# sourceMappingURL=LRUMap.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/LRUMap.js\n// module id = 65\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar NoneCharAtlas = (function (_super) {\n    __extends(NoneCharAtlas, _super);\n    function NoneCharAtlas(document, config) {\n        return _super.call(this) || this;\n    }\n    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        return false;\n    };\n    return NoneCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = NoneCharAtlas;\n//# sourceMappingURL=NoneCharAtlas.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/NoneCharAtlas.js\n// module id = 66\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar Types_2 = require(\"../../common/Types\");\nvar StaticCharAtlas = (function (_super) {\n    __extends(StaticCharAtlas, _super);\n    function StaticCharAtlas(_document, _config) {\n        var _this = _super.call(this) || this;\n        _this._document = _document;\n        _this._config = _config;\n        _this._canvasFactory = function (width, height) {\n            var canvas = _this._document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            return canvas;\n        };\n        return _this;\n    }\n    StaticCharAtlas.prototype._doWarmUp = function () {\n        var _this = this;\n        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);\n        if (result instanceof HTMLCanvasElement) {\n            this._texture = result;\n        }\n        else {\n            result.then(function (texture) {\n                _this._texture = texture;\n            });\n        }\n    };\n    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {\n        var isAscii = glyph.code < 256;\n        var isBasicColor = glyph.fg < 16;\n        var isDefaultColor = glyph.fg === Types_2.DEFAULT_COLOR;\n        var isDefaultBackground = glyph.bg === Types_2.DEFAULT_COLOR;\n        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;\n    };\n    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (this._texture === null || this._texture === undefined) {\n            return false;\n        }\n        var colorIndex = 0;\n        if (CharAtlasUtils_1.is256Color(glyph.fg)) {\n            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);\n        }\n        else if (glyph.fg === Types_2.DEFAULT_COLOR) {\n            if (glyph.bold) {\n                colorIndex = 1;\n            }\n        }\n        if (!this._isCached(glyph, colorIndex)) {\n            return false;\n        }\n        ctx.save();\n        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n        if (glyph.dim) {\n            ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);\n        ctx.restore();\n        return true;\n    };\n    return StaticCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = StaticCharAtlas;\n//# sourceMappingURL=StaticCharAtlas.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/atlas/StaticCharAtlas.js\n// module id = 67\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DomRendererRowFactory_1 = require(\"./DomRendererRowFactory\");\nvar Types_1 = require(\"../atlas/Types\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nvar ROW_CONTAINER_CLASS = 'xterm-rows';\nvar FG_CLASS_PREFIX = 'xterm-fg-';\nvar BG_CLASS_PREFIX = 'xterm-bg-';\nvar FOCUS_CLASS = 'xterm-focus';\nvar SELECTION_CLASS = 'xterm-selection';\nvar nextTerminalId = 1;\nvar DomRenderer = (function (_super) {\n    __extends(DomRenderer, _super);\n    function DomRenderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        _this._terminalClass = nextTerminalId++;\n        _this._rowElements = [];\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n        _this._rowContainer.style.lineHeight = 'normal';\n        _this._rowContainer.setAttribute('aria-hidden', 'true');\n        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);\n        _this._selectionContainer = document.createElement('div');\n        _this._selectionContainer.classList.add(SELECTION_CLASS);\n        _this._selectionContainer.setAttribute('aria-hidden', 'true');\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._updateDimensions();\n        _this._injectCss();\n        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(_terminal.options, document);\n        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);\n        _this._terminal.screenElement.appendChild(_this._rowContainer);\n        _this._terminal.screenElement.appendChild(_this._selectionContainer);\n        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    DomRenderer.prototype.dispose = function () {\n        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n        this._terminal.screenElement.removeChild(this._rowContainer);\n        this._terminal.screenElement.removeChild(this._selectionContainer);\n        this._terminal.screenElement.removeChild(this._themeStyleElement);\n        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);\n        _super.prototype.dispose.call(this);\n    };\n    DomRenderer.prototype._updateDimensions = function () {\n        var _this = this;\n        this.dimensions.scaledCharWidth = this._terminal.charMeasure.width * window.devicePixelRatio;\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharLeft = 0;\n        this.dimensions.scaledCharTop = 0;\n        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;\n        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this._rowElements.forEach(function (element) {\n            element.style.width = _this.dimensions.canvasWidth + \"px\";\n            element.style.height = _this.dimensions.actualCellHeight + \"px\";\n            element.style.lineHeight = _this.dimensions.actualCellHeight + \"px\";\n            element.style.overflow = 'hidden';\n        });\n        if (!this._dimensionsStyleElement) {\n            this._dimensionsStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" span {\" +\n            \" display: inline-block;\" +\n            \" height: 100%;\" +\n            \" vertical-align: top;\" +\n            (\" width: \" + this.dimensions.actualCellWidth + \"px\") +\n            \"}\";\n        this._dimensionsStyleElement.innerHTML = styles;\n        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    DomRenderer.prototype.setColors = function (colors) {\n        this._colors = colors;\n        this._injectCss();\n    };\n    DomRenderer.prototype._injectCss = function () {\n        var _this = this;\n        if (!this._themeStyleElement) {\n            this._themeStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._themeStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" {\" +\n            (\" color: \" + this._colors.foreground.css + \";\") +\n            (\" background-color: \" + this._colors.background.css + \";\") +\n            (\" font-family: \" + this._terminal.options.fontFamily + \";\") +\n            (\" font-size: \" + this._terminal.options.fontSize + \"px;\") +\n            \"}\";\n        styles +=\n            this._terminalSelector + \" span:not(.\" + DomRendererRowFactory_1.BOLD_CLASS + \") {\" +\n                (\" font-weight: \" + this._terminal.options.fontWeight + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.BOLD_CLASS + \" {\") +\n                (\" font-weight: \" + this._terminal.options.fontWeightBold + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.ITALIC_CLASS + \" {\") +\n                \" font-style: italic;\" +\n                \"}\";\n        styles +=\n            \"@keyframes blink {\" +\n                \" 0% { opacity: 1.0; }\" +\n                \" 50% { opacity: 0.0; }\" +\n                \" 100% { opacity: 1.0; }\" +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \":not(.\" + FOCUS_CLASS + \") .\" + DomRendererRowFactory_1.CURSOR_CLASS + \" {\" +\n                (\" outline: 1px solid \" + this._colors.cursor.css + \";\") +\n                \" outline-offset: -1px;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + \" {\") +\n                \" animation: blink 1s step-end infinite;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + \" {\") +\n                (\" background-color: \" + this._colors.cursor.css + \";\") +\n                (\" color: \" + this._colors.cursorAccent.css + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + \" {\") +\n                (\" box-shadow: 1px 0 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + \" {\") +\n                (\" box-shadow: 0 -1px 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + SELECTION_CLASS + \" {\" +\n                \" position: absolute;\" +\n                \" top: 0;\" +\n                \" left: 0;\" +\n                \" z-index: 1;\" +\n                \" pointer-events: none;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + SELECTION_CLASS + \" div {\") +\n                \" position: absolute;\" +\n                (\" background-color: \" + this._colors.selection.css + \";\") +\n                \"}\";\n        this._colors.ansi.forEach(function (c, i) {\n            styles +=\n                _this._terminalSelector + \" .\" + FG_CLASS_PREFIX + i + \" { color: \" + c.css + \"; }\" +\n                    (_this._terminalSelector + \" .\" + BG_CLASS_PREFIX + i + \" { background-color: \" + c.css + \"; }\");\n        });\n        styles +=\n            this._terminalSelector + \" .\" + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { color: \" + this._colors.background.css + \"; }\" +\n                (this._terminalSelector + \" .\" + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { background-color: \" + this._colors.foreground.css + \"; }\");\n        this._themeStyleElement.innerHTML = styles;\n    };\n    DomRenderer.prototype.onDevicePixelRatioChange = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype._refreshRowElements = function (cols, rows) {\n        for (var i = this._rowElements.length; i <= rows; i++) {\n            var row = document.createElement('div');\n            this._rowContainer.appendChild(row);\n            this._rowElements.push(row);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n    };\n    DomRenderer.prototype.onResize = function (cols, rows) {\n        this._refreshRowElements(cols, rows);\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onCharSizeChanged = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onBlur = function () {\n        this._rowContainer.classList.remove(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onFocus = function () {\n        this._rowContainer.classList.add(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        while (this._selectionContainer.children.length) {\n            this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n        }\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);\n        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        var documentFragment = document.createDocumentFragment();\n        if (columnSelectMode) {\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));\n            }\n        }\n        this._selectionContainer.appendChild(documentFragment);\n    };\n    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {\n        if (rowCount === void 0) { rowCount = 1; }\n        var element = document.createElement('div');\n        element.style.height = rowCount * this.dimensions.actualCellHeight + \"px\";\n        element.style.top = row * this.dimensions.actualCellHeight + \"px\";\n        element.style.left = colStart * this.dimensions.actualCellWidth + \"px\";\n        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + \"px\";\n        return element;\n    };\n    DomRenderer.prototype.onCursorMove = function () {\n    };\n    DomRenderer.prototype.onOptionsChanged = function () {\n        this._updateDimensions();\n        this._injectCss();\n        this._terminal.refresh(0, this._terminal.rows - 1);\n    };\n    DomRenderer.prototype.clear = function () {\n        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });\n    };\n    DomRenderer.prototype.renderRows = function (start, end) {\n        var terminal = this._terminal;\n        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;\n        var cursorX = this._terminal.buffer.x;\n        var cursorBlink = this._terminal.options.cursorBlink;\n        for (var y = start; y <= end; y++) {\n            var rowElement = this._rowElements[y];\n            rowElement.innerHTML = '';\n            var row = y + terminal.buffer.ydisp;\n            var lineData = terminal.buffer.lines.get(row);\n            var cursorStyle = terminal.options.cursorStyle;\n            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));\n        }\n    };\n    Object.defineProperty(DomRenderer.prototype, \"_terminalSelector\", {\n        get: function () {\n            return \".\" + TERMINAL_CLASS_PREFIX + this._terminalClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };\n    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };\n    DomRenderer.prototype._onLinkHover = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n    };\n    DomRenderer.prototype._onLinkLeave = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n    };\n    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {\n        while (x !== x2 || y !== y2) {\n            var row = this._rowElements[y];\n            if (!row) {\n                return;\n            }\n            var span = row.children[x];\n            if (span) {\n                span.style.textDecoration = enabled ? 'underline' : 'none';\n            }\n            if (++x >= cols) {\n                x = 0;\n                y++;\n            }\n        }\n    };\n    return DomRenderer;\n}(Lifecycle_1.Disposable));\nexports.DomRenderer = DomRenderer;\n//# sourceMappingURL=DomRenderer.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/dom/DomRenderer.js\n// module id = 68\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../atlas/Types\");\nvar BufferLine_1 = require(\"../../core/buffer/BufferLine\");\nexports.BOLD_CLASS = 'xterm-bold';\nexports.DIM_CLASS = 'xterm-dim';\nexports.ITALIC_CLASS = 'xterm-italic';\nexports.UNDERLINE_CLASS = 'xterm-underline';\nexports.CURSOR_CLASS = 'xterm-cursor';\nexports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\nvar DomRendererRowFactory = (function () {\n    function DomRendererRowFactory(_terminalOptions, _document) {\n        this._terminalOptions = _terminalOptions;\n        this._document = _document;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {\n        var fragment = this._document.createDocumentFragment();\n        var lineLength = 0;\n        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n            if (lineData.loadCell(x, this._workCell).getCode() !== BufferLine_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n                lineLength = x + 1;\n                break;\n            }\n        }\n        for (var x = 0; x < lineLength; x++) {\n            lineData.loadCell(x, this._workCell);\n            var width = this._workCell.getWidth();\n            if (width === 0) {\n                continue;\n            }\n            var charElement = this._document.createElement('span');\n            if (width > 1) {\n                charElement.style.width = cellWidth * width + \"px\";\n            }\n            if (isCursorRow && x === cursorX) {\n                charElement.classList.add(exports.CURSOR_CLASS);\n                if (cursorBlink) {\n                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);\n                }\n                switch (cursorStyle) {\n                    case 'bar':\n                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);\n                        break;\n                    case 'underline':\n                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);\n                        break;\n                    default:\n                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);\n                        break;\n                }\n            }\n            if (this._workCell.isBold() && this._terminalOptions.enableBold) {\n                charElement.classList.add(exports.BOLD_CLASS);\n            }\n            if (this._workCell.isItalic()) {\n                charElement.classList.add(exports.ITALIC_CLASS);\n            }\n            if (this._workCell.isDim()) {\n                charElement.classList.add(exports.DIM_CLASS);\n            }\n            if (this._workCell.isUnderline()) {\n                charElement.classList.add(exports.UNDERLINE_CLASS);\n            }\n            charElement.textContent = this._workCell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n            var swapColor = this._workCell.isInverse();\n            if (this._workCell.isFgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? 'background-' : '') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isFgPalette()) {\n                var fg = this._workCell.getFgColor();\n                if (this._workCell.isBold() && fg < 8 && !swapColor &&\n                    this._terminalOptions.enableBold && this._terminalOptions.drawBoldTextInBrightColors) {\n                    fg += 8;\n                }\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'b' : 'f') + \"g-\" + fg);\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-bg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            if (this._workCell.isBgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? '' : 'background-') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isBgPalette()) {\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'f' : 'b') + \"g-\" + this._workCell.getBgColor());\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-fg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            fragment.appendChild(charElement);\n        }\n        return fragment;\n    };\n    return DomRendererRowFactory;\n}());\nexports.DomRendererRowFactory = DomRendererRowFactory;\n//# sourceMappingURL=DomRendererRowFactory.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xterm/lib/renderer/dom/DomRendererRowFactory.js\n// module id = 69\n// module chunks = 0"],"sourceRoot":""}